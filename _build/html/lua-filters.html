
<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Pandoc Lua Filters 日本語版 &#8212; 日本Pandocユーザ会</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/translations.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="pandoc-lua-filters">
<h1><a class="toc-backref" href="#id155" role="doc-backlink">Pandoc Lua Filters 日本語版</a><a class="headerlink" href="#pandoc-lua-filters" title="この見出しへのパーマリンク">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>現在の翻訳は <em>プレリリース版</em> です。不完全な翻訳を含んでいます。
（ユーザーズガイド以外のページについてはほぼ翻訳されていません。現在翻訳を進めています）</p>
<ul class="simple">
<li><p>正確な情報については英語の公式 <a class="reference external" href="https://pandoc.org/MANUAL.html">User's Guide</a> を参照してください</p></li>
<li><p>この翻訳に対する問題・改善案については <a class="reference external" href="https://github.com/pandoc-jp/pandoc-doc-ja/issues">GitHubリポジトリのIssue</a> に投稿してください</p></li>
<li><p>翻訳のレビュー作業や翻訳作業へのご協力を希望の方は <a class="reference internal" href="trans-intro.html"><span class="doc">翻訳の手引 for Pandocユーザーズガイド</span></a> をご覧ください</p></li>
</ul>
</div>
<p>原著者:</p>
<blockquote>
<div><ul class="simple">
<li><p>Albert Krewinkel</p></li>
<li><p>John MacFarlane</p></li>
</ul>
</div></blockquote>
<p>原著バージョン: 2.18</p>
<p>更新日: 2023/01/01</p>
<p>翻訳者（アルファベット順）:</p>
<ul class="simple">
<li><p>becolomochi</p></li>
<li><p>makotosan</p></li>
<li><p>niszet</p></li>
<li><p>Takada Atsushi</p></li>
<li><p><a class="reference external" href="https://ishibaki.github.io">Tomoki Ishibashi</a></p></li>
<li><p>Yuki Fujiwara</p></li>
</ul>
<nav class="contents" id="id1">
<p class="topic-title">目次</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pandoc-lua-filters" id="id155">Pandoc Lua Filters 日本語版</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id156">Introduction</a></p></li>
<li><p><a class="reference internal" href="#lua-filter-structure" id="id157">Luaフィルタの構造</a></p>
<ul>
<li><p><a class="reference internal" href="#filters-on-element-sequences" id="id158">Filters on element sequences</a></p></li>
<li><p><a class="reference internal" href="#traversal-order" id="id159">Traversal order</a></p></li>
<li><p><a class="reference internal" href="#global-variables" id="id160">Global variables</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#pandoc-module" id="id161">Pandoc Module</a></p>
<ul>
<li><p><a class="reference internal" href="#element-creation" id="id162">Element creation</a></p></li>
<li><p><a class="reference internal" href="#exposed-pandoc-functionality" id="id163">Exposed pandoc functionality</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#lua-interpreter-initialization" id="id164">Lua interpreter initialization</a></p></li>
<li><p><a class="reference internal" href="#debugging-lua-filters" id="id165">Debugging Lua filters</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id166">Examples</a></p>
<ul>
<li><p><a class="reference internal" href="#macro-substitution" id="id167">Macro substitution</a></p></li>
<li><p><a class="reference internal" href="#center-images-in-latex-and-html-output" id="id168">Center images in LaTeX and HTML output</a></p></li>
<li><p><a class="reference internal" href="#setting-the-date-in-the-metadata" id="id169">Setting the date in the metadata</a></p></li>
<li><p><a class="reference internal" href="#remove-spaces-before-citations" id="id170">Remove spaces before citations</a></p></li>
<li><p><a class="reference internal" href="#replacing-placeholders-with-their-metadata-value" id="id171">Replacing placeholders with their metadata value</a></p></li>
<li><p><a class="reference internal" href="#modifying-pandocs-manual-txt-for-man-pages" id="id172">Modifying pandoc’s <code class="docutils literal notranslate"><span class="pre">MANUAL.txt</span></code> for man pages</a></p></li>
<li><p><a class="reference internal" href="#creating-a-handout-from-a-paper" id="id173">Creating a handout from a paper</a></p></li>
<li><p><a class="reference internal" href="#counting-words-in-a-document" id="id174">Counting words in a document</a></p></li>
<li><p><a class="reference internal" href="#converting-abc-code-to-music-notation" id="id175">Converting ABC code to music notation</a></p></li>
<li><p><a class="reference internal" href="#building-images-with-tikz" id="id176">Building images with Ti<em>k</em>Z</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#lua-type-reference" id="id177">Lua type reference</a></p>
<ul>
<li><p><a class="reference internal" href="#shared-properties" id="id178">Shared Properties</a></p></li>
<li><p><a class="reference internal" href="#pandoc" id="id179">Pandoc</a></p></li>
<li><p><a class="reference internal" href="#meta" id="id180">Meta</a></p></li>
<li><p><a class="reference internal" href="#metavalue" id="id181">MetaValue</a></p></li>
<li><p><a class="reference internal" href="#block" id="id182">Block</a></p></li>
<li><p><a class="reference internal" href="#blocks" id="id183">Blocks</a></p></li>
<li><p><a class="reference internal" href="#inline" id="id184">Inline</a></p></li>
<li><p><a class="reference internal" href="#inlines" id="id185">Inlines</a></p></li>
<li><p><a class="reference internal" href="#element-components" id="id186">Element components</a></p></li>
<li><p><a class="reference internal" href="#readeroptions" id="id187">ReaderOptions</a></p></li>
<li><p><a class="reference internal" href="#writeroptions" id="id188">WriterOptions</a></p></li>
<li><p><a class="reference internal" href="#commonstate" id="id189">CommonState</a></p></li>
<li><p><a class="reference internal" href="#doc" id="id190">Doc</a></p></li>
<li><p><a class="reference internal" href="#list" id="id191">List</a></p></li>
<li><p><a class="reference internal" href="#logmessage" id="id192">LogMessage</a></p></li>
<li><p><a class="reference internal" href="#simpletable" id="id193">SimpleTable</a></p></li>
<li><p><a class="reference internal" href="#template" id="id194">Template</a></p></li>
<li><p><a class="reference internal" href="#version" id="id195">Version</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-text" id="id196">Module text</a></p>
<ul>
<li><p><a class="reference internal" href="#lower" id="id197">lower</a></p></li>
<li><p><a class="reference internal" href="#upper" id="id198">upper</a></p></li>
<li><p><a class="reference internal" href="#reverse" id="id199">reverse</a></p></li>
<li><p><a class="reference internal" href="#len" id="id200">len</a></p></li>
<li><p><a class="reference internal" href="#sub" id="id201">sub</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-pandoc" id="id202">Module pandoc</a></p>
<ul>
<li><p><a class="reference internal" href="#id8" id="id203">Pandoc</a></p></li>
<li><p><a class="reference internal" href="#id9" id="id204">Meta</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id205">MetaValue</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id206">Block</a></p></li>
<li><p><a class="reference internal" href="#id14" id="id207">Blocks</a></p></li>
<li><p><a class="reference internal" href="#id15" id="id208">Inline</a></p></li>
<li><p><a class="reference internal" href="#id19" id="id209">Inlines</a></p></li>
<li><p><a class="reference internal" href="#element-components-1" id="id210">Element components</a></p></li>
<li><p><a class="reference internal" href="#legacy-types" id="id211">Legacy types</a></p></li>
<li><p><a class="reference internal" href="#constants" id="id212">Constants</a></p></li>
<li><p><a class="reference internal" href="#other-constructors" id="id213">Other constructors</a></p></li>
<li><p><a class="reference internal" href="#helper-functions" id="id214">Helper functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-pandoc-utils" id="id215">Module pandoc.utils</a></p>
<ul>
<li><p><a class="reference internal" href="#blocks-to-inlines-blocks-sep" id="id216"><code class="docutils literal notranslate"><span class="pre">blocks_to_inlines</span> <span class="pre">(blocks[,</span> <span class="pre">sep])</span></code></a></p></li>
<li><p><a class="reference internal" href="#equals-element1-element2" id="id217"><code class="docutils literal notranslate"><span class="pre">equals</span> <span class="pre">(element1,</span> <span class="pre">element2)</span></code></a></p></li>
<li><p><a class="reference internal" href="#from-simple-table-table" id="id218"><code class="docutils literal notranslate"><span class="pre">from_simple_table</span> <span class="pre">(table)</span></code></a></p></li>
<li><p><a class="reference internal" href="#make-sections-number-sections-base-level-blocks" id="id219"><code class="docutils literal notranslate"><span class="pre">make_sections</span> <span class="pre">(number_sections,</span> <span class="pre">base_level,</span> <span class="pre">blocks)</span></code></a></p></li>
<li><p><a class="reference internal" href="#references" id="id220">references</a></p></li>
<li><p><a class="reference internal" href="#run-json-filter" id="id221">run_json_filter</a></p></li>
<li><p><a class="reference internal" href="#normalize-date" id="id222">normalize_date</a></p></li>
<li><p><a class="reference internal" href="#sha1" id="id223">sha1</a></p></li>
<li><p><a class="reference internal" href="#stringify" id="id224">stringify</a></p></li>
<li><p><a class="reference internal" href="#to-roman-numeral" id="id225">to_roman_numeral</a></p></li>
<li><p><a class="reference internal" href="#to-simple-table" id="id226">to_simple_table</a></p></li>
<li><p><a class="reference internal" href="#type" id="id227">type</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-pandoc-mediabag" id="id228">Module pandoc.mediabag</a></p>
<ul>
<li><p><a class="reference internal" href="#delete" id="id229">delete</a></p></li>
<li><p><a class="reference internal" href="#empty" id="id230">empty</a></p></li>
<li><p><a class="reference internal" href="#insert" id="id231">insert</a></p></li>
<li><p><a class="reference internal" href="#items" id="id232">items</a></p></li>
<li><p><a class="reference internal" href="#pandoc-mediabag-list" id="id233">list</a></p></li>
<li><p><a class="reference internal" href="#lookup" id="id234">lookup</a></p></li>
<li><p><a class="reference internal" href="#fetch" id="id235">fetch</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-pandoc-list" id="id236">Module pandoc.List</a></p>
<ul>
<li><p><a class="reference internal" href="#constructor" id="id237">Constructor</a></p></li>
<li><p><a class="reference internal" href="#metamethods" id="id238">Metamethods</a></p></li>
<li><p><a class="reference internal" href="#methods-2" id="id239">Methods</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-pandoc-path" id="id240">Module pandoc.path</a></p>
<ul>
<li><p><a class="reference internal" href="#static-fields" id="id241">Static Fields</a></p></li>
<li><p><a class="reference internal" href="#functions" id="id242">Functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-pandoc-system" id="id243">Module pandoc.system</a></p>
<ul>
<li><p><a class="reference internal" href="#id24" id="id244">Static Fields</a></p></li>
<li><p><a class="reference internal" href="#id25" id="id245">Functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-pandoc-layout" id="id246">Module pandoc.layout</a></p>
<ul>
<li><p><a class="reference internal" href="#fields" id="id247">Fields</a></p></li>
<li><p><a class="reference internal" href="#pandoc-layout-functions" id="id248">Functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-pandoc-template" id="id249">Module pandoc.template</a></p>
<ul>
<li><p><a class="reference internal" href="#compile" id="id250">compile</a></p></li>
<li><p><a class="reference internal" href="#default" id="id251">default</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-pandoc-types" id="id252">Module pandoc.types</a></p>
<ul>
<li><p><a class="reference internal" href="#pandoc-types-version" id="id253">Version</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id156" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="この見出しへのパーマリンク">¶</a></h2>
<p>Pandoc has long supported filters, which allow the pandoc abstract
syntax tree (AST) to be manipulated between the parsing and the writing
phase. <a class="reference external" href="https://pandoc.org/filters.html">Traditional pandoc filters</a> accept a JSON representation of the
pandoc AST and produce an altered JSON representation of the AST. They
may be written in any programming language, and invoked from pandoc
using the <code class="docutils literal notranslate"><span class="pre">--filter</span></code> option.</p>
<p>Although traditional filters are very flexible, they have a couple of
disadvantages. First, there is some overhead in writing JSON to stdout
and reading it from stdin (twice, once on each side of the filter).
Second, whether a filter will work will depend on details of the user’s
environment. A filter may require an interpreter for a certain
programming language to be available, as well as a library for
manipulating the pandoc AST in JSON form. One cannot simply provide a
filter that can be used by anyone who has a certain version of the
pandoc executable.</p>
<p>Starting with version 2.0, pandoc makes it possible to write filters in
Lua without any external dependencies at all. A Lua interpreter (version
5.3) and a Lua library for creating pandoc filters is built into the
pandoc executable. Pandoc data types are marshaled to Lua directly,
avoiding the overhead of writing JSON to stdout and reading it from
stdin.</p>
<p>ここで強い強調をスモールキャピタル (small caps) に変換するLuaフィルタの例を紹介します。</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">return</span> <span class="p">{</span>
  <span class="p">{</span>
    <span class="n">Strong</span> <span class="o">=</span> <span class="kr">function</span> <span class="p">(</span><span class="n">elem</span><span class="p">)</span>
      <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">SmallCaps</span><span class="p">(</span><span class="n">elem</span><span class="p">.</span><span class="n">c</span><span class="p">)</span>
    <span class="kr">end</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>これは以下と同等です。</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">function</span> <span class="nf">Strong</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">SmallCaps</span><span class="p">(</span><span class="n">elem</span><span class="p">.</span><span class="n">c</span><span class="p">)</span>
<span class="kr">end</span>
</pre></div>
</div>
<p>This says: walk the AST, and when you find a Strong element, replace it
with a SmallCaps element with the same content.</p>
<p>To run it, save it in a file, say <code class="docutils literal notranslate"><span class="pre">smallcaps.lua</span></code>, and invoke pandoc
with <code class="docutils literal notranslate"><span class="pre">--lua-filter=smallcaps.lua</span></code>.</p>
<p>Here’s a quick performance comparison, converting the pandoc manual
(MANUAL.txt) to HTML, with versions of the same JSON filter written in
compiled Haskell (<code class="docutils literal notranslate"><span class="pre">smallcaps</span></code>) and interpreted Python
(<code class="docutils literal notranslate"><span class="pre">smallcaps.py</span></code>):</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Time</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pandoc</span></code></p></td>
<td><p>1.01s</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pandoc</span> <span class="pre">--filter</span> <span class="pre">./smallcaps</span></code></p></td>
<td><p>1.36s</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pandoc</span> <span class="pre">--filter</span> <span class="pre">./smallcaps.py</span></code></p></td>
<td><p>1.40s</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pandoc</span> <span class="pre">--lua-filter</span> <span class="pre">./smallcaps.lua</span></code></p></td>
<td><p>1.03s</p></td>
</tr>
</tbody>
</table>
<p>As you can see, the Lua filter avoids the substantial overhead
associated with marshaling to and from JSON over a pipe.</p>
</section>
<section id="lua-filter-structure">
<h2><a class="toc-backref" href="#id157" role="doc-backlink">Luaフィルタの構造</a><a class="headerlink" href="#lua-filter-structure" title="この見出しへのパーマリンク">¶</a></h2>
<p>Lua filters are tables with element names as keys and values consisting
of functions acting on those elements.</p>
<p>Filters are expected to be put into separate files and are passed via
the <code class="docutils literal notranslate"><span class="pre">--lua-filter</span></code> command-line argument. For example, if a filter is
defined in a file <code class="docutils literal notranslate"><span class="pre">current-date.lua</span></code>, then it would be applied like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pandoc</span> <span class="o">--</span><span class="n">lua</span><span class="o">-</span><span class="nb">filter</span><span class="o">=</span><span class="n">current</span><span class="o">-</span><span class="n">date</span><span class="o">.</span><span class="n">lua</span> <span class="o">-</span><span class="n">f</span> <span class="n">markdown</span> <span class="n">MANUAL</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--lua-filter</span></code> option may be supplied multiple times. Pandoc
applies all filters (including JSON filters specified via <code class="docutils literal notranslate"><span class="pre">--filter</span></code>
and Lua filters specified via <code class="docutils literal notranslate"><span class="pre">--lua-filter</span></code>) in the order they appear
on the command line.</p>
<p>Pandoc expects each Lua file to return a list of filters. The filters in
that list are called sequentially, each on the result of the previous
filter. If there is no value returned by the filter script, then pandoc
will try to generate a single filter by collecting all top-level
functions whose names correspond to those of pandoc elements (e.g.,
<code class="docutils literal notranslate"><span class="pre">Str</span></code>, <code class="docutils literal notranslate"><span class="pre">Para</span></code>, <code class="docutils literal notranslate"><span class="pre">Meta</span></code>, or <code class="docutils literal notranslate"><span class="pre">Pandoc</span></code>). (That is why the two
examples above are equivalent.)</p>
<p>For each filter, the document is traversed and each element subjected to
the filter. Elements for which the filter contains an entry (i.e. a
function of the same name) are passed to Lua element filtering function.
In other words, filter entries will be called for each corresponding
element in the document, getting the respective element as input.</p>
<p>The return value of a filter function must be one of the following:</p>
<ul class="simple">
<li><p>nil: this means that the object should remain unchanged.</p></li>
<li><p>a pandoc object: this must be of the same type as the input and will
replace the original object.</p></li>
<li><p>a list of pandoc objects: these will replace the original object; the
list is merged with the neighbors of the original objects (spliced
into the list the original object belongs to); returning an empty
list deletes the object.</p></li>
</ul>
<p>The function’s output must result in an element of the same type as the
input. This means a filter function acting on an inline element must
return either nil, an inline, or a list of inlines, and a function
filtering a block element must return one of nil, a block, or a list of
block elements. Pandoc will throw an error if this condition is
violated.</p>
<p>If there is no function matching the element’s node type, then the
filtering system will look for a more general fallback function. Two
fallback functions are supported, <code class="docutils literal notranslate"><span class="pre">Inline</span></code> and <code class="docutils literal notranslate"><span class="pre">Block</span></code>. Each matches
elements of the respective type.</p>
<p>Elements without matching functions are left untouched.</p>
<p>See <a class="reference external" href="#module-pandoc">module documentation</a> for a list of pandoc elements.</p>
<section id="filters-on-element-sequences">
<h3><a class="toc-backref" href="#id158" role="doc-backlink">Filters on element sequences</a><a class="headerlink" href="#filters-on-element-sequences" title="この見出しへのパーマリンク">¶</a></h3>
<p>For some filtering tasks, it is necessary to know the order in which
elements occur in the document. It is not enough then to inspect a
single element at a time.</p>
<p>There are two special function names, which can be used to define
filters on lists of blocks or lists of inlines.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Inlines</span> <span class="pre">(inlines)</span></code></dt><dd><p>If present in a filter, this function will be called on all lists of
inline elements, like the content of a <a class="reference external" href="#type-para">Para</a> (paragraph) block, or
the description of an <a class="reference external" href="#type-image">Image</a>. The <code class="docutils literal notranslate"><span class="pre">inlines</span></code> argument passed to
the function will be a <a href="#id254"><span class="problematic" id="id255">`List`_</span></a> of <a class="reference external" href="#type-inline">Inline</a> elements for each call.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Blocks</span> <span class="pre">(blocks)</span></code></dt><dd><p>If present in a filter, this function will be called on all lists of
block elements, like the content of a <a class="reference external" href="#type-metablocks">MetaBlocks</a> meta element
block, on each item of a list, and the main content of the <a class="reference external" href="#type-pandoc">Pandoc</a>
document. The <code class="docutils literal notranslate"><span class="pre">blocks</span></code> argument passed to the function will be a
<a href="#id256"><span class="problematic" id="id257">`List`_</span></a> of <a class="reference external" href="#type-block">Block</a> elements for each call.</p>
</dd>
</dl>
<p>These filter functions are special in that the result must either be
nil, in which case the list is left unchanged, or must be a list of the
correct type, i.e., the same type as the input argument. Single elements
are <strong>not</strong> allowed as return values, as a single element in this
context usually hints at a bug.</p>
<p>See <a class="reference external" href="#remove-spaces-before-citations">“Remove spaces before normal citations”</a> for an example.</p>
<p>This functionality has been added in pandoc 2.9.2.</p>
</section>
<section id="traversal-order">
<h3><a class="toc-backref" href="#id159" role="doc-backlink">Traversal order</a><a class="headerlink" href="#traversal-order" title="この見出しへのパーマリンク">¶</a></h3>
<p>The traversal order of filters can be selected by setting the key
<code class="docutils literal notranslate"><span class="pre">traverse</span></code> to either <code class="docutils literal notranslate"><span class="pre">'topdown'</span></code> or <code class="docutils literal notranslate"><span class="pre">'typewise'</span></code>; the default is
<code class="docutils literal notranslate"><span class="pre">'typewise'</span></code>.</p>
<p>例：</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">filter</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">traverse</span> <span class="o">=</span> <span class="s1">&#39;topdown&#39;</span><span class="p">,</span>
  <span class="c1">-- ... filter functions ...</span>
<span class="p">}</span>
<span class="kr">return</span> <span class="p">{</span><span class="n">filter</span><span class="p">}</span>
</pre></div>
</div>
<p>Support for this was added in pandoc 2.17; previous versions ignore the
<code class="docutils literal notranslate"><span class="pre">traverse</span></code> setting.</p>
<section id="typewise-traversal">
<h4>Typewise traversal<a class="headerlink" href="#typewise-traversal" title="この見出しへのパーマリンク">¶</a></h4>
<p>Element filter functions within a filter set are called in a fixed
order, skipping any which are not present:</p>
<ol class="arabic simple">
<li><p>functions for <a class="reference external" href="#type-inline">Inline elements</a>,</p></li>
<li><p>the <a href="#id258"><span class="problematic" id="id259">|Inlines|_</span></a> filter function,</p></li>
<li><p>functions for <a class="reference external" href="#type-block">Block elements</a> ,</p></li>
<li><p>the <a href="#id260"><span class="problematic" id="id261">|Blocks|_</span></a> filter function,</p></li>
<li><p>the <a class="reference external" href="#type-meta"><code class="docutils literal notranslate"><span class="pre">Meta</span></code></a> filter function, and last</p></li>
<li><p>the <a class="reference external" href="#type-pandoc"><code class="docutils literal notranslate"><span class="pre">Pandoc</span></code></a> filter function.</p></li>
</ol>
<p>It is still possible to force a different order by explicitly returning
multiple filter sets. For example, if the filter for <em>Meta</em> is to be run
before that for <em>Str</em>, one can write</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- ... filter definitions ...</span>

<span class="kr">return</span> <span class="p">{</span>
  <span class="p">{</span> <span class="n">Meta</span> <span class="o">=</span> <span class="n">Meta</span> <span class="p">},</span>  <span class="c1">-- (1)</span>
  <span class="p">{</span> <span class="n">Str</span> <span class="o">=</span> <span class="n">Str</span> <span class="p">}</span>     <span class="c1">-- (2)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Filter sets are applied in the order in which they are returned. All
functions in set (1) are thus run before those in (2), causing the
filter function for <em>Meta</em> to be run before the filtering of <em>Str</em>
elements is started.</p>
</section>
<section id="topdown-traversal">
<h4>Topdown traversal<a class="headerlink" href="#topdown-traversal" title="この見出しへのパーマリンク">¶</a></h4>
<p>It is sometimes more natural to traverse the document tree depth-first
from the root towards the leaves, and all in a single run.</p>
<p>For example, a block list <code class="docutils literal notranslate"><span class="pre">[Plain</span> <span class="pre">[Str</span> <span class="pre">&quot;a&quot;],</span> <span class="pre">Para</span> <span class="pre">[Str</span> <span class="pre">&quot;b&quot;]]</span></code> will try
the following filter functions, in order: <code class="docutils literal notranslate"><span class="pre">Blocks</span></code>, <code class="docutils literal notranslate"><span class="pre">Plain</span></code>,
<code class="docutils literal notranslate"><span class="pre">Inlines</span></code>, <code class="docutils literal notranslate"><span class="pre">Str</span></code>, <code class="docutils literal notranslate"><span class="pre">Para</span></code>, <code class="docutils literal notranslate"><span class="pre">Inlines</span></code>, <code class="docutils literal notranslate"><span class="pre">Str</span></code>.</p>
<p>Topdown traversals can be cut short by returning <code class="docutils literal notranslate"><span class="pre">false</span></code> as a second
value from the filter function. No child-element of the returned element
is processed in that case.</p>
<p>For example, to exclude the contents of a footnote from being processed,
one might write</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="n">traverse</span> <span class="o">=</span> <span class="s1">&#39;topdown&#39;</span>
<span class="kr">function</span> <span class="nf">Note</span> <span class="p">(</span><span class="n">n</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">n</span><span class="p">,</span> <span class="kc">false</span>
<span class="kr">end</span>
</pre></div>
</div>
</section>
</section>
<section id="global-variables">
<h3><a class="toc-backref" href="#id160" role="doc-backlink">Global variables</a><a class="headerlink" href="#global-variables" title="この見出しへのパーマリンク">¶</a></h3>
<p>Pandoc passes additional data to Lua filters by setting global
variables.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">FORMAT</span></code></dt><dd><p>The global <code class="docutils literal notranslate"><span class="pre">FORMAT</span></code> is set to the format of the pandoc writer being
used (<code class="docutils literal notranslate"><span class="pre">html5</span></code>, <code class="docutils literal notranslate"><span class="pre">latex</span></code>, etc.), so the behavior of a filter can be
made conditional on the eventual output format.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PANDOC_READER_OPTIONS</span></code></dt><dd><p>Table of the options which were provided to the parser.
(<a class="reference external" href="#type-readeroptions">ReaderOptions</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PANDOC_WRITER_OPTIONS</span></code></dt><dd><p>Table of the options that will be passed to the writer. While the
object can be modified, the changes will <strong>not</strong> be picked up by
pandoc. (<a class="reference external" href="#type-writeroptions">WriterOptions</a>)</p>
<p>This variable is also set in custom writers.</p>
<p><em>Since: pandoc 2.17</em></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PANDOC_VERSION</span></code></dt><dd><p>Contains the pandoc version as a <a class="reference external" href="#type-version">Version</a> object which behaves like
a numerically indexed table, most significant number first. E.g., for
pandoc 2.7.3, the value of the variable is equivalent to a table
<code class="docutils literal notranslate"><span class="pre">{2,</span> <span class="pre">7,</span> <span class="pre">3}</span></code>. Use <code class="docutils literal notranslate"><span class="pre">tostring(PANDOC_VERSION)</span></code> to produce a version
string. This variable is also set in custom writers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PANDOC_API_VERSION</span></code></dt><dd><p>Contains the version of the pandoc-types API against which pandoc was
compiled. It is given as a numerically indexed table, most
significant number first. E.g., if pandoc was compiled against
pandoc-types 1.17.3, then the value of the variable will behave like
the table <code class="docutils literal notranslate"><span class="pre">{1,</span> <span class="pre">17,</span> <span class="pre">3}</span></code>. Use <code class="docutils literal notranslate"><span class="pre">tostring(PANDOC_API_VERSION)</span></code> to
produce a version string. This variable is also set in custom
writers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PANDOC_SCRIPT_FILE</span></code></dt><dd><p>The name used to involve the filter. This value can be used to find
files relative to the script file. This variable is also set in
custom writers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PANDOC_STATE</span></code></dt><dd><p>The state shared by all readers and writers. It is used by pandoc to
collect and pass information. The value of this variable is of type
<a class="reference external" href="#type-commonstate">CommonState</a> and is read-only.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pandoc</span></code></dt><dd><p>The <em>pandoc</em> module, described in the next section, is available
through the global <code class="docutils literal notranslate"><span class="pre">pandoc</span></code>. The other modules described herein are
loaded as subfields under their respective name.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lpeg</span></code></dt><dd><p>This variable holds the <code class="docutils literal notranslate"><span class="pre">lpeg</span></code> module, a package based on Parsing
Expression Grammars (PEG). It provides excellent parsing utilities
and is documented on the official <a class="reference external" href="http://www.inf.puc-rio.br/~roberto/lpeg/">LPeg homepage</a>. Pandoc uses a
built-in version of the library, unless it has been configured by the
package maintainer to rely on a system-wide installation.</p>
<p>Note that the result of <code class="docutils literal notranslate"><span class="pre">require</span> <span class="pre">'lpeg'</span></code> is not necessarily equal
to this value; the <code class="docutils literal notranslate"><span class="pre">require</span></code> mechanism prefers the system’s lpeg
library over the built-in version.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">re</span></code></dt><dd><p>Contains the LPeg.re module, which is built on top of LPeg and offers
an implementation of a <a class="reference external" href="http://www.inf.puc-rio.br/~roberto/lpeg/re.html">regex engine</a>. Pandoc uses a built-in
version of the library, unless it has been configured by the package
maintainer to rely on a system-wide installation.</p>
<p>Note that the result of <code class="docutils literal notranslate"><span class="pre">require</span> <span class="pre">'re</span></code> is not necessarily equal to
this value; the <code class="docutils literal notranslate"><span class="pre">require</span></code> mechanism prefers the system’s lpeg
library over the built-in version.</p>
</dd>
</dl>
</section>
</section>
<section id="pandoc-module">
<h2><a class="toc-backref" href="#id161" role="doc-backlink">Pandoc Module</a><a class="headerlink" href="#pandoc-module" title="この見出しへのパーマリンク">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">pandoc</span></code> Lua module is loaded into the filter’s Lua environment
and provides a set of functions and constants to make creation and
manipulation of elements easier. The global variable <code class="docutils literal notranslate"><span class="pre">pandoc</span></code> is bound
to the module and should generally not be overwritten for this reason.</p>
<p>Two major functionalities are provided by the module: element creator
functions and access to some of pandoc’s main functionalities.</p>
<section id="element-creation">
<h3><a class="toc-backref" href="#id162" role="doc-backlink">Element creation</a><a class="headerlink" href="#element-creation" title="この見出しへのパーマリンク">¶</a></h3>
<p>Element creator functions like <code class="docutils literal notranslate"><span class="pre">Str</span></code>, <code class="docutils literal notranslate"><span class="pre">Para</span></code>, and <code class="docutils literal notranslate"><span class="pre">Pandoc</span></code> are
designed to allow easy creation of new elements that are simple to use
and can be read back from the Lua environment. Internally, pandoc uses
these functions to create the Lua objects which are passed to element
filter functions. This means that elements created via this module will
behave exactly as those elements accessible through the filter function
parameter.</p>
</section>
<section id="exposed-pandoc-functionality">
<h3><a class="toc-backref" href="#id163" role="doc-backlink">Exposed pandoc functionality</a><a class="headerlink" href="#exposed-pandoc-functionality" title="この見出しへのパーマリンク">¶</a></h3>
<p>Some pandoc functions have been made available in Lua:</p>
<ul class="simple">
<li><p><a class="reference external" href="#pandoc.walk_block"><code class="docutils literal notranslate"><span class="pre">walk_block</span></code></a> and <a class="reference external" href="#pandoc.walk_inline"><code class="docutils literal notranslate"><span class="pre">walk_inline</span></code></a> allow filters to be applied
inside specific block or inline elements;</p></li>
<li><p><a class="reference external" href="#pandoc.read"><code class="docutils literal notranslate"><span class="pre">read</span></code></a> allows filters to parse strings into pandoc documents;</p></li>
<li><p><a class="reference external" href="#pandoc.pipe"><code class="docutils literal notranslate"><span class="pre">pipe</span></code></a> runs an external command with input from and output to
strings;</p></li>
<li><p>the <a class="reference external" href="#module-pandoc.mediabag"><code class="docutils literal notranslate"><span class="pre">pandoc.mediabag</span></code></a> module allows access to the “mediabag,”
which stores binary content such as images that may be included in
the final document;</p></li>
<li><p>the <a class="reference external" href="#module-pandoc.utils"><code class="docutils literal notranslate"><span class="pre">pandoc.utils</span></code></a> module contains various utility functions.</p></li>
</ul>
</section>
</section>
<section id="lua-interpreter-initialization">
<h2><a class="toc-backref" href="#id164" role="doc-backlink">Lua interpreter initialization</a><a class="headerlink" href="#lua-interpreter-initialization" title="この見出しへのパーマリンク">¶</a></h2>
<p>Initialization of pandoc’s Lua interpreter can be controlled by placing
a file <code class="docutils literal notranslate"><span class="pre">init.lua</span></code> in pandoc’s data directory. A common use-case would
be to load additional modules, or even to alter default modules.</p>
<p>The following snippet is an example of code that might be useful when
added to <code class="docutils literal notranslate"><span class="pre">init.lua</span></code>. The snippet adds all Unicode-aware functions
defined in the <code class="docutils literal notranslate"><span class="pre">`text</span></code> module`_ to the default <code class="docutils literal notranslate"><span class="pre">string</span></code> module,
prefixed with the string <code class="docutils literal notranslate"><span class="pre">uc_</span></code>.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">fn</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="nb">require</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span> <span class="kr">do</span>
  <span class="n">string</span><span class="p">[</span><span class="s1">&#39;uc_&#39;</span> <span class="o">..</span> <span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">fn</span>
<span class="kr">end</span>
</pre></div>
</div>
<p>This makes it possible to apply these functions on strings using colon
syntax (<code class="docutils literal notranslate"><span class="pre">mystring:uc_upper()</span></code>).</p>
</section>
<section id="debugging-lua-filters">
<h2><a class="toc-backref" href="#id165" role="doc-backlink">Debugging Lua filters</a><a class="headerlink" href="#debugging-lua-filters" title="この見出しへのパーマリンク">¶</a></h2>
<p>It is possible to use a debugging interface to halt execution and step
through a Lua filter line by line as it is run inside Pandoc. This is
accomplished using the remote-debugging interface of the package
<a class="reference external" href="https://github.com/pkulchenko/MobDebug"><code class="docutils literal notranslate"><span class="pre">mobdebug</span></code></a>. Although mobdebug can be run from the terminal, it is
more useful run within the donation-ware Lua editor and IDE,
<a class="reference external" href="https://studio.zerobrane.com/">ZeroBrane</a>. ZeroBrane offers a REPL console and UI to step-through and
view all variables and state.</p>
<p>If you already have Lua 5.3 installed, you can add
<code class="docutils literal notranslate"><span class="pre">`mobdebug</span></code> &lt;<a class="reference external" href="https://luarocks.org/modules/paulclinger/mobdebug">https://luarocks.org/modules/paulclinger/mobdebug</a>&gt;`__ and
its dependency <a class="reference external" href="https://luarocks.org/modules/luasocket/luasocket"><code class="docutils literal notranslate"><span class="pre">luasocket</span></code></a> using <a class="reference external" href="https://luarocks.org"><code class="docutils literal notranslate"><span class="pre">luarocks</span></code></a>, which should then
be available on the path. ZeroBrane also includes both of these in its
package, so if you don’t want to install Lua separately, you should
add/modify your <code class="docutils literal notranslate"><span class="pre">LUA_PATH</span></code> and <code class="docutils literal notranslate"><span class="pre">LUA_CPATH</span></code> to include the correct
locations; <a class="reference external" href="https://studio.zerobrane.com/doc-remote-debugging">see detailed instructions here</a>.</p>
</section>
<section id="examples">
<h2><a class="toc-backref" href="#id166" role="doc-backlink">Examples</a><a class="headerlink" href="#examples" title="この見出しへのパーマリンク">¶</a></h2>
<p>The following filters are presented as examples. A repository of useful
Lua filters (which may also serve as good examples) is available at
<a class="reference external" href="https://github.com/pandoc/lua-filters">https://github.com/pandoc/lua-filters</a>.</p>
<section id="macro-substitution">
<h3><a class="toc-backref" href="#id167" role="doc-backlink">Macro substitution</a><a class="headerlink" href="#macro-substitution" title="この見出しへのパーマリンク">¶</a></h3>
<p>The following filter converts the string <code class="docutils literal notranslate"><span class="pre">{{helloworld}}</span></code> into
emphasized text “Hello, World”.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">return</span> <span class="p">{</span>
  <span class="p">{</span>
    <span class="n">Str</span> <span class="o">=</span> <span class="kr">function</span> <span class="p">(</span><span class="n">elem</span><span class="p">)</span>
      <span class="kr">if</span> <span class="n">elem</span><span class="p">.</span><span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;{{helloworld}}&quot;</span> <span class="kr">then</span>
        <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Emph</span> <span class="p">{</span><span class="n">pandoc</span><span class="p">.</span><span class="n">Str</span> <span class="s2">&quot;Hello, World&quot;</span><span class="p">}</span>
      <span class="kr">else</span>
        <span class="kr">return</span> <span class="n">elem</span>
      <span class="kr">end</span>
    <span class="kr">end</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="center-images-in-latex-and-html-output">
<h3><a class="toc-backref" href="#id168" role="doc-backlink">Center images in LaTeX and HTML output</a><a class="headerlink" href="#center-images-in-latex-and-html-output" title="この見出しへのパーマリンク">¶</a></h3>
<p>For LaTeX, wrap an image in LaTeX snippets which cause the image to be
centered horizontally. In HTML, the image element’s style attribute is
used to achieve centering.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Filter images with this function if the target format is LaTeX.</span>
<span class="kr">if</span> <span class="n">FORMAT</span><span class="p">:</span><span class="n">match</span> <span class="s1">&#39;latex&#39;</span> <span class="kr">then</span>
  <span class="kr">function</span> <span class="nf">Image</span> <span class="p">(</span><span class="n">elem</span><span class="p">)</span>
    <span class="c1">-- Surround all images with image-centering raw LaTeX.</span>
    <span class="kr">return</span> <span class="p">{</span>
      <span class="n">pandoc</span><span class="p">.</span><span class="n">RawInline</span><span class="p">(</span><span class="s1">&#39;latex&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">hfill</span><span class="se">\\</span><span class="s1">break{</span><span class="se">\\</span><span class="s1">centering&#39;</span><span class="p">),</span>
      <span class="n">elem</span><span class="p">,</span>
      <span class="n">pandoc</span><span class="p">.</span><span class="n">RawInline</span><span class="p">(</span><span class="s1">&#39;latex&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">par}&#39;</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="c1">-- Filter images with this function if the target format is HTML</span>
<span class="kr">if</span> <span class="n">FORMAT</span><span class="p">:</span><span class="n">match</span> <span class="s1">&#39;html&#39;</span> <span class="kr">then</span>
  <span class="kr">function</span> <span class="nf">Image</span> <span class="p">(</span><span class="n">elem</span><span class="p">)</span>
    <span class="c1">-- Use CSS style to center image</span>
    <span class="n">elem</span><span class="p">.</span><span class="n">attributes</span><span class="p">.</span><span class="n">style</span> <span class="o">=</span> <span class="s1">&#39;margin:auto; display: block;&#39;</span>
    <span class="kr">return</span> <span class="n">elem</span>
  <span class="kr">end</span>
<span class="kr">end</span>
</pre></div>
</div>
</section>
<section id="setting-the-date-in-the-metadata">
<h3><a class="toc-backref" href="#id169" role="doc-backlink">Setting the date in the metadata</a><a class="headerlink" href="#setting-the-date-in-the-metadata" title="この見出しへのパーマリンク">¶</a></h3>
<p>This filter sets the date in the document’s metadata to the current
date, if a date isn’t already set:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">function</span> <span class="nf">Meta</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">m</span><span class="p">.</span><span class="n">date</span> <span class="o">==</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="n">m</span><span class="p">.</span><span class="n">date</span> <span class="o">=</span> <span class="nb">os.date</span><span class="p">(</span><span class="s2">&quot;%B %e, %Y&quot;</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">m</span>
  <span class="kr">end</span>
<span class="kr">end</span>
</pre></div>
</div>
</section>
<section id="remove-spaces-before-citations">
<h3><a class="toc-backref" href="#id170" role="doc-backlink">Remove spaces before citations</a><a class="headerlink" href="#remove-spaces-before-citations" title="この見出しへのパーマリンク">¶</a></h3>
<p>This filter removes all spaces preceding an “author-in-text” citation.
In Markdown, author-in-text citations (e.g., <code class="docutils literal notranslate"><span class="pre">&#64;citekey</span></code>), must be
preceded by a space. If these spaces are undesired, they must be removed
with a filter.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="kr">function</span> <span class="nf">is_space_before_author_in_text</span><span class="p">(</span><span class="n">spc</span><span class="p">,</span> <span class="n">cite</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">spc</span> <span class="ow">and</span> <span class="n">spc</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s1">&#39;Space&#39;</span>
    <span class="ow">and</span> <span class="n">cite</span> <span class="ow">and</span> <span class="n">cite</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s1">&#39;Cite&#39;</span>
    <span class="c1">-- there must be only a single citation, and it must have</span>
    <span class="c1">-- mode &#39;AuthorInText&#39;</span>
    <span class="ow">and</span> <span class="o">#</span><span class="n">cite</span><span class="p">.</span><span class="n">citations</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="ow">and</span> <span class="n">cite</span><span class="p">.</span><span class="n">citations</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;AuthorInText&#39;</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">Inlines</span> <span class="p">(</span><span class="n">inlines</span><span class="p">)</span>
  <span class="c1">-- Go from end to start to avoid problems with shifting indices.</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="o">#</span><span class="n">inlines</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="kr">do</span>
    <span class="kr">if</span> <span class="n">is_space_before_author_in_text</span><span class="p">(</span><span class="n">inlines</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">inlines</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="kr">then</span>
      <span class="n">inlines</span><span class="p">:</span><span class="n">remove</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="kr">end</span>
  <span class="kr">end</span>
  <span class="kr">return</span> <span class="n">inlines</span>
<span class="kr">end</span>
</pre></div>
</div>
</section>
<section id="replacing-placeholders-with-their-metadata-value">
<h3><a class="toc-backref" href="#id171" role="doc-backlink">Replacing placeholders with their metadata value</a><a class="headerlink" href="#replacing-placeholders-with-their-metadata-value" title="この見出しへのパーマリンク">¶</a></h3>
<p>Lua filter functions are run in the order</p>
<blockquote>
<div><p><em>Inlines → Blocks → Meta → Pandoc</em>.</p>
</div></blockquote>
<p>Passing information from a higher level (e.g., metadata) to a lower
level (e.g., inlines) is still possible by using two filters living in
the same file:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">vars</span> <span class="o">=</span> <span class="p">{}</span>

<span class="kr">function</span> <span class="nf">get_vars</span> <span class="p">(</span><span class="n">meta</span><span class="p">)</span>
  <span class="kr">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">meta</span><span class="p">)</span> <span class="kr">do</span>
    <span class="kr">if</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">utils</span><span class="p">.</span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;Inlines&#39;</span> <span class="kr">then</span>
      <span class="n">vars</span><span class="p">[</span><span class="s2">&quot;%&quot;</span> <span class="o">..</span> <span class="n">k</span> <span class="o">..</span> <span class="s2">&quot;%&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="nb">table.unpack</span><span class="p">(</span><span class="n">v</span><span class="p">)}</span>
    <span class="kr">end</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">replace</span> <span class="p">(</span><span class="n">el</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">vars</span><span class="p">[</span><span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">]</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Span</span><span class="p">(</span><span class="n">vars</span><span class="p">[</span><span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">])</span>
  <span class="kr">else</span>
    <span class="kr">return</span> <span class="n">el</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="kr">return</span> <span class="p">{{</span><span class="n">Meta</span> <span class="o">=</span> <span class="n">get_vars</span><span class="p">},</span> <span class="p">{</span><span class="n">Str</span> <span class="o">=</span> <span class="n">replace</span><span class="p">}}</span>
</pre></div>
</div>
<p>If the contents of file <code class="docutils literal notranslate"><span class="pre">occupations.md</span></code> is</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>---
name: Samuel Q. Smith
<span class="gu">occupation: Professor of Phrenology</span>
<span class="gu">---</span>

Name

:   %name%

Occupation

:   %occupation%
</pre></div>
</div>
<p>then running <code class="docutils literal notranslate"><span class="pre">pandoc</span> <span class="pre">--lua-filter=meta-vars.lua</span> <span class="pre">occupations.md</span></code> will
output:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Samuel Q. Smith<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Occupation<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Professor of Phrenology<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
<section id="modifying-pandocs-manual-txt-for-man-pages">
<h3><a class="toc-backref" href="#id172" role="doc-backlink">Modifying pandoc’s <code class="docutils literal notranslate"><span class="pre">MANUAL.txt</span></code> for man pages</a><a class="headerlink" href="#modifying-pandocs-manual-txt-for-man-pages" title="この見出しへのパーマリンク">¶</a></h3>
<p>This is the filter we use when converting <code class="docutils literal notranslate"><span class="pre">MANUAL.txt</span></code> to man pages.
It converts level-1 headers to uppercase (using <a class="reference external" href="#type-block:walk"><code class="docutils literal notranslate"><span class="pre">walk</span></code></a> to transform
inline elements inside headers), removes footnotes, and replaces links
with regular text.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- we use pandoc.text to get a UTF-8 aware &#39;upper&#39; function</span>
<span class="kd">local</span> <span class="n">text</span> <span class="o">=</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">text</span>

<span class="kr">function</span> <span class="nf">Header</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="kr">if</span> <span class="n">el</span><span class="p">.</span><span class="n">level</span> <span class="o">==</span> <span class="mi">1</span> <span class="kr">then</span>
      <span class="kr">return</span> <span class="n">el</span><span class="p">:</span><span class="n">walk</span> <span class="p">{</span>
        <span class="n">Str</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
            <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Str</span><span class="p">(</span><span class="n">text</span><span class="p">.</span><span class="n">upper</span><span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">))</span>
        <span class="kr">end</span>
      <span class="p">}</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">Link</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">el</span><span class="p">.</span><span class="n">content</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">Note</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="kr">return</span> <span class="p">{}</span>
<span class="kr">end</span>
</pre></div>
</div>
</section>
<section id="creating-a-handout-from-a-paper">
<h3><a class="toc-backref" href="#id173" role="doc-backlink">Creating a handout from a paper</a><a class="headerlink" href="#creating-a-handout-from-a-paper" title="この見出しへのパーマリンク">¶</a></h3>
<p>This filter extracts all the numbered examples, section headers, block
quotes, and figures from a document, in addition to any divs with class
<code class="docutils literal notranslate"><span class="pre">handout</span></code>. (Note that only blocks at the “outer level” are included;
this ignores blocks inside nested constructs, like list items.)</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- creates a handout from an article, using its headings,</span>
<span class="c1">-- blockquotes, numbered examples, figures, and any</span>
<span class="c1">-- Divs with class &quot;handout&quot;</span>

<span class="kr">function</span> <span class="nf">Pandoc</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">hblocks</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="kr">for</span> <span class="n">i</span><span class="p">,</span><span class="n">el</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">doc</span><span class="p">.</span><span class="n">blocks</span><span class="p">)</span> <span class="kr">do</span>
        <span class="kr">if</span> <span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;Div&quot;</span> <span class="ow">and</span> <span class="n">el</span><span class="p">.</span><span class="n">classes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;handout&quot;</span><span class="p">)</span> <span class="ow">or</span>
           <span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;BlockQuote&quot;</span><span class="p">)</span> <span class="ow">or</span>
           <span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;OrderedList&quot;</span> <span class="ow">and</span> <span class="n">el</span><span class="p">.</span><span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;Example&quot;</span><span class="p">)</span> <span class="ow">or</span>
           <span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;Para&quot;</span> <span class="ow">and</span> <span class="o">#</span><span class="n">el</span><span class="p">.</span><span class="n">c</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">el</span><span class="p">.</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;Image&quot;</span><span class="p">)</span> <span class="ow">or</span>
           <span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;Header&quot;</span><span class="p">)</span> <span class="kr">then</span>
           <span class="nb">table.insert</span><span class="p">(</span><span class="n">hblocks</span><span class="p">,</span> <span class="n">el</span><span class="p">)</span>
        <span class="kr">end</span>
    <span class="kr">end</span>
    <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Pandoc</span><span class="p">(</span><span class="n">hblocks</span><span class="p">,</span> <span class="n">doc</span><span class="p">.</span><span class="n">meta</span><span class="p">)</span>
<span class="kr">end</span>
</pre></div>
</div>
</section>
<section id="counting-words-in-a-document">
<h3><a class="toc-backref" href="#id174" role="doc-backlink">Counting words in a document</a><a class="headerlink" href="#counting-words-in-a-document" title="この見出しへのパーマリンク">¶</a></h3>
<p>This filter counts the words in the body of a document (omitting
metadata like titles and abstracts), including words in code. It should
be more accurate than <code class="docutils literal notranslate"><span class="pre">wc</span> <span class="pre">-w</span></code> run directly on a Markdown document,
since the latter will count markup characters, like the <code class="docutils literal notranslate"><span class="pre">#</span></code> in front
of an ATX header, or tags in HTML documents, as words. To run it,
<code class="docutils literal notranslate"><span class="pre">pandoc</span> <span class="pre">--lua-filter</span> <span class="pre">wordcount.lua</span> <span class="pre">myfile.md</span></code>.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- counts words in a document</span>

<span class="n">words</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">wordcount</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">Str</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="c1">-- we don&#39;t count a word if it&#39;s entirely punctuation:</span>
    <span class="kr">if</span> <span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">:</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;%P&quot;</span><span class="p">)</span> <span class="kr">then</span>
        <span class="n">words</span> <span class="o">=</span> <span class="n">words</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="kr">end</span>
  <span class="kr">end</span><span class="p">,</span>

  <span class="n">Code</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="n">_</span><span class="p">,</span><span class="n">n</span> <span class="o">=</span> <span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">:</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot;%S+&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">words</span> <span class="o">+</span> <span class="n">n</span>
  <span class="kr">end</span><span class="p">,</span>

  <span class="n">CodeBlock</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="n">_</span><span class="p">,</span><span class="n">n</span> <span class="o">=</span> <span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">:</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot;%S+&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">words</span> <span class="o">+</span> <span class="n">n</span>
  <span class="kr">end</span>
<span class="p">}</span>

<span class="kr">function</span> <span class="nf">Pandoc</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="c1">-- skip metadata, just count body:</span>
    <span class="n">el</span><span class="p">.</span><span class="n">blocks</span><span class="p">:</span><span class="n">walk</span><span class="p">(</span><span class="n">wordcount</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">words</span> <span class="o">..</span> <span class="s2">&quot; words in body&quot;</span><span class="p">)</span>
    <span class="nb">os.exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="kr">end</span>
</pre></div>
</div>
</section>
<section id="converting-abc-code-to-music-notation">
<h3><a class="toc-backref" href="#id175" role="doc-backlink">Converting ABC code to music notation</a><a class="headerlink" href="#converting-abc-code-to-music-notation" title="この見出しへのパーマリンク">¶</a></h3>
<p>This filter replaces code blocks with class <code class="docutils literal notranslate"><span class="pre">abc</span></code> with images created
by running their contents through <code class="docutils literal notranslate"><span class="pre">abcm2ps</span></code> and ImageMagick’s
<code class="docutils literal notranslate"><span class="pre">convert</span></code>. (For more on ABC notation, see <a class="reference external" href="https://abcnotation.com">https://abcnotation.com</a>.)</p>
<p>Images are added to the mediabag. For output to binary formats, pandoc
will use images in the mediabag. For textual formats, use
<code class="docutils literal notranslate"><span class="pre">--extract-media</span></code> to specify a directory where the files in the
mediabag will be written, or (for HTML only) use <code class="docutils literal notranslate"><span class="pre">--self-contained</span></code>.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Pandoc filter to process code blocks with class &quot;abc&quot; containing</span>
<span class="c1">-- ABC notation into images.</span>
<span class="c1">--</span>
<span class="c1">-- * Assumes that abcm2ps and ImageMagick&#39;s convert are in the path.</span>
<span class="c1">-- * For textual output formats, use --extract-media=abc-images</span>
<span class="c1">-- * For HTML formats, you may alternatively use --self-contained</span>

<span class="kd">local</span> <span class="n">filetypes</span> <span class="o">=</span> <span class="p">{</span> <span class="n">html</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="s2">&quot;image/png&quot;</span><span class="p">}</span>
                  <span class="p">,</span> <span class="n">latex</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;application/pdf&quot;</span><span class="p">}</span>
                  <span class="p">}</span>
<span class="kd">local</span> <span class="n">filetype</span> <span class="o">=</span> <span class="n">filetypes</span><span class="p">[</span><span class="n">FORMAT</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;png&quot;</span>
<span class="kd">local</span> <span class="n">mimetype</span> <span class="o">=</span> <span class="n">filetypes</span><span class="p">[</span><span class="n">FORMAT</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;image/png&quot;</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">abc2eps</span><span class="p">(</span><span class="n">abc</span><span class="p">,</span> <span class="n">filetype</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">eps</span> <span class="o">=</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">pipe</span><span class="p">(</span><span class="s2">&quot;abcm2ps&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;-q&quot;</span><span class="p">,</span> <span class="s2">&quot;-O&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">},</span> <span class="n">abc</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">final</span> <span class="o">=</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">pipe</span><span class="p">(</span><span class="s2">&quot;convert&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">filetype</span> <span class="o">..</span> <span class="s2">&quot;:-&quot;</span><span class="p">},</span> <span class="n">eps</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">final</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">CodeBlock</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
    <span class="kr">if</span> <span class="n">block</span><span class="p">.</span><span class="n">classes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;abc&quot;</span> <span class="kr">then</span>
        <span class="kd">local</span> <span class="n">img</span> <span class="o">=</span> <span class="n">abc2eps</span><span class="p">(</span><span class="n">block</span><span class="p">.</span><span class="n">text</span><span class="p">,</span> <span class="n">filetype</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">fname</span> <span class="o">=</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">sha1</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&quot;.&quot;</span> <span class="o">..</span> <span class="n">filetype</span>
        <span class="n">pandoc</span><span class="p">.</span><span class="n">mediabag</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">mimetype</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
        <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Para</span><span class="p">{</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Image</span><span class="p">({</span><span class="n">pandoc</span><span class="p">.</span><span class="n">Str</span><span class="p">(</span><span class="s2">&quot;abc tune&quot;</span><span class="p">)},</span> <span class="n">fname</span><span class="p">)</span> <span class="p">}</span>
    <span class="kr">end</span>
<span class="kr">end</span>
</pre></div>
</div>
</section>
<section id="building-images-with-tikz">
<h3><a class="toc-backref" href="#id176" role="doc-backlink">Building images with Ti<em>k</em>Z</a><a class="headerlink" href="#building-images-with-tikz" title="この見出しへのパーマリンク">¶</a></h3>
<p>This filter converts raw LaTeX Ti<em>k</em>Z environments into images. It
works with both PDF and HTML output. The Ti<em>k</em>Z code is compiled to
an image using <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>, and the image is converted from pdf to svg
format using <a class="reference external" href="https://github.com/dawbarton/pdf2svg"><code class="docutils literal notranslate"><span class="pre">pdf2svg</span></code></a>, so both of these must be in the system
path. Converted images are cached in the working directory and given
filenames based on a hash of the source, so that they need not be
regenerated each time the document is built. (A more sophisticated
version of this might put these in a special cache directory.)</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">system</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;pandoc.system&#39;</span>

<span class="kd">local</span> <span class="n">tikz_doc_template</span> <span class="o">=</span> <span class="s">[[</span>
<span class="s">\documentclass{standalone}</span>
<span class="s">\usepackage{xcolor}</span>
<span class="s">\usepackage{tikz}</span>
<span class="s">\begin{document}</span>
<span class="s">\nopagecolor</span>
<span class="s">%s</span>
<span class="s">\end{document}</span>
<span class="s">]]</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">tikz2image</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">filetype</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
  <span class="n">system</span><span class="p">.</span><span class="n">with_temporary_directory</span><span class="p">(</span><span class="s1">&#39;tikz2image&#39;</span><span class="p">,</span> <span class="kr">function</span> <span class="p">(</span><span class="n">tmpdir</span><span class="p">)</span>
    <span class="n">system</span><span class="p">.</span><span class="n">with_working_directory</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="kr">function</span><span class="p">()</span>
      <span class="kd">local</span> <span class="n">f</span> <span class="o">=</span> <span class="nb">io.open</span><span class="p">(</span><span class="s1">&#39;tikz.tex&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
      <span class="n">f</span><span class="p">:</span><span class="n">write</span><span class="p">(</span><span class="n">tikz_doc_template</span><span class="p">:</span><span class="n">format</span><span class="p">(</span><span class="n">src</span><span class="p">))</span>
      <span class="n">f</span><span class="p">:</span><span class="n">close</span><span class="p">()</span>
      <span class="nb">os.execute</span><span class="p">(</span><span class="s1">&#39;pdflatex tikz.tex&#39;</span><span class="p">)</span>
      <span class="kr">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;pdf&#39;</span> <span class="kr">then</span>
        <span class="nb">os.rename</span><span class="p">(</span><span class="s1">&#39;tikz.pdf&#39;</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
      <span class="kr">else</span>
        <span class="nb">os.execute</span><span class="p">(</span><span class="s1">&#39;pdf2svg tikz.pdf &#39;</span> <span class="o">..</span> <span class="n">outfile</span><span class="p">)</span>
      <span class="kr">end</span>
    <span class="kr">end</span><span class="p">)</span>
  <span class="kr">end</span><span class="p">)</span>
<span class="kr">end</span>

<span class="n">extension_for</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;svg&#39;</span><span class="p">,</span>
  <span class="n">html4</span> <span class="o">=</span> <span class="s1">&#39;svg&#39;</span><span class="p">,</span>
  <span class="n">html5</span> <span class="o">=</span> <span class="s1">&#39;svg&#39;</span><span class="p">,</span>
  <span class="n">latex</span> <span class="o">=</span> <span class="s1">&#39;pdf&#39;</span><span class="p">,</span>
  <span class="n">beamer</span> <span class="o">=</span> <span class="s1">&#39;pdf&#39;</span> <span class="p">}</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">file_exists</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">f</span> <span class="o">=</span> <span class="nb">io.open</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">f</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="nb">io.close</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="kr">return</span> <span class="kc">true</span>
  <span class="kr">else</span>
    <span class="kr">return</span> <span class="kc">false</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">starts_with</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">str</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">str</span><span class="p">:</span><span class="n">sub</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">#</span><span class="n">start</span><span class="p">)</span> <span class="o">==</span> <span class="n">start</span>
<span class="kr">end</span>


<span class="kr">function</span> <span class="nf">RawBlock</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">starts_with</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">begin{tikzpicture}&#39;</span><span class="p">,</span> <span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">)</span> <span class="kr">then</span>
    <span class="kd">local</span> <span class="n">filetype</span> <span class="o">=</span> <span class="n">extension_for</span><span class="p">[</span><span class="n">FORMAT</span><span class="p">]</span> <span class="ow">or</span> <span class="s1">&#39;svg&#39;</span>
    <span class="kd">local</span> <span class="n">fbasename</span> <span class="o">=</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">sha1</span><span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">)</span> <span class="o">..</span> <span class="s1">&#39;.&#39;</span> <span class="o">..</span> <span class="n">filetype</span>
    <span class="kd">local</span> <span class="n">fname</span> <span class="o">=</span> <span class="n">system</span><span class="p">.</span><span class="n">get_working_directory</span><span class="p">()</span> <span class="o">..</span> <span class="s1">&#39;/&#39;</span> <span class="o">..</span> <span class="n">fbasename</span>
    <span class="kr">if</span> <span class="ow">not</span> <span class="n">file_exists</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="kr">then</span>
      <span class="n">tikz2image</span><span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">,</span> <span class="n">filetype</span><span class="p">,</span> <span class="n">fname</span><span class="p">)</span>
    <span class="kr">end</span>
    <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Para</span><span class="p">({</span><span class="n">pandoc</span><span class="p">.</span><span class="n">Image</span><span class="p">({},</span> <span class="n">fbasename</span><span class="p">)})</span>
  <span class="kr">else</span>
   <span class="kr">return</span> <span class="n">el</span>
  <span class="kr">end</span>
<span class="kr">end</span>
</pre></div>
</div>
<p>Example of use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pandoc --lua-filter tikz.lua -s -o cycle.html &lt;&lt;EOF
Here is a diagram of the cycle:

\begin{tikzpicture}

\def \n {5}
\def \radius {3cm}
\def \margin {8} % margin in angles, depends on the radius

\foreach \s in {1,...,\n}
{
  \node[draw, circle] at ({360/\n * (\s - 1)}:\radius) {$\s$};
  \draw[-&gt;, &gt;=latex] ({360/\n * (\s - 1)+\margin}:\radius)
    arc ({360/\n * (\s - 1)+\margin}:{360/\n * (\s)-\margin}:\radius);
}
\end{tikzpicture}
EOF
</pre></div>
</div>
</section>
</section>
<section id="lua-type-reference">
<h2><a class="toc-backref" href="#id177" role="doc-backlink">Lua type reference</a><a class="headerlink" href="#lua-type-reference" title="この見出しへのパーマリンク">¶</a></h2>
<p>This section describes the types of objects available to Lua filters.
See the <a class="reference external" href="#module-pandoc">pandoc module</a> for functions to create these objects.</p>
<section id="shared-properties">
<h3><a class="toc-backref" href="#id178" role="doc-backlink">Shared Properties</a><a class="headerlink" href="#shared-properties" title="この見出しへのパーマリンク">¶</a></h3>
<section id="clone">
<h4><code class="docutils literal notranslate"><span class="pre">clone</span></code><a class="headerlink" href="#clone" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">clone</span> <span class="pre">()</span></code></p>
<p>All instances of the types listed here, with the exception of read-only
objects, can be cloned via the <code class="docutils literal notranslate"><span class="pre">clone()</span></code> method.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">emph</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Emph</span> <span class="p">{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;important&#39;</span><span class="p">}</span>
<span class="n">local</span> <span class="n">cloned_emph</span> <span class="o">=</span> <span class="n">emph</span><span class="p">:</span><span class="n">clone</span><span class="p">()</span>  <span class="o">--</span> <span class="n">note</span> <span class="n">the</span> <span class="n">colon</span>
</pre></div>
</div>
</section>
</section>
<section id="pandoc">
<span id="type-pandoc"></span><h3><a class="toc-backref" href="#id179" role="doc-backlink">Pandoc</a><a class="headerlink" href="#pandoc" title="この見出しへのパーマリンク">¶</a></h3>
<p>Pandoc document</p>
<p>Values of this type can be created with the <a href="#id262"><span class="problematic" id="id263">|pandoc.Pandoc|_</span></a>
constructor. Pandoc values are equal in Lua if and only if they are
equal in Haskell.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">blocks</span></code></dt><dd><p>document content (<a href="#id264"><span class="problematic" id="id265">`Blocks`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">meta</span></code></dt><dd><p>document meta information (<a class="reference external" href="#type-meta">Meta</a> object)</p>
</dd>
</dl>
<section id="walk">
<span id="type-pandoc-walk"></span><h4>walk<a class="headerlink" href="#walk" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">walk(self,</span> <span class="pre">lua_filter)</span></code></p>
<p>Applies a Lua filter to the Pandoc element. Just as for full-document
filters, the order in which elements are traversed can be controlled by
setting the <code class="docutils literal notranslate"><span class="pre">traverse</span></code> field of the filter; see the section on
<a class="reference external" href="#traversal-order">traversal order</a>.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">self</span></code></dt><dd><p>the element (<a class="reference external" href="#type-pandoc">Pandoc</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lua_filter</span></code></dt><dd><p>map of filter functions (table)</p>
</dd>
</dl>
<p>Result:</p>
<ul class="simple">
<li><p>filtered document (<a class="reference external" href="#type-pandoc">Pandoc</a>)</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-- returns `pandoc.Pandoc{pandoc.Para{pandoc.Str &#39;Bye&#39;}}`
return pandoc.Pandoc{pandoc.Para(&#39;Hi&#39;)}:walk {
  Str = function (_) return &#39;Bye&#39; end,
}
</pre></div>
</div>
</section>
</section>
<section id="meta">
<span id="type-meta"></span><h3><a class="toc-backref" href="#id180" role="doc-backlink">Meta</a><a class="headerlink" href="#meta" title="この見出しへのパーマリンク">¶</a></h3>
<p>Meta information on a document; string-indexed collection of
<a class="reference external" href="#type-metavalue">MetaValues</a>.</p>
<p>Values of this type can be created with the <a href="#id266"><span class="problematic" id="id267">|pandoc.Meta|_</span></a>
constructor. Meta values are equal in Lua if and only if they are equal
in Haskell.</p>
</section>
<section id="metavalue">
<span id="type-metavalue"></span><h3><a class="toc-backref" href="#id181" role="doc-backlink">MetaValue</a><a class="headerlink" href="#metavalue" title="この見出しへのパーマリンク">¶</a></h3>
<p>Document meta information items. This is not a separate type, but
describes a set of types that can be used in places were a MetaValue is
expected. The types correspond to the following Haskell type
constructors:</p>
<ul class="simple">
<li><p>boolean → MetaBool</p></li>
<li><p>string or number → MetaString</p></li>
<li><p>Inlines → MetaInlines</p></li>
<li><p>Blocks → MetaBlocks</p></li>
<li><p>List/integer indexed table → MetaList</p></li>
<li><p>string-indexed table → MetaMap</p></li>
</ul>
<p>The corresponding constructors <a href="#id268"><span class="problematic" id="id269">|pandoc.MetaBool|_</span></a>,
<a href="#id270"><span class="problematic" id="id271">|pandoc.MetaString|_</span></a>, <a href="#id272"><span class="problematic" id="id273">|pandoc.MetaInlines|_</span></a>,
<a href="#id274"><span class="problematic" id="id275">|pandoc.MetaBlocks|_</span></a>, <a href="#id276"><span class="problematic" id="id277">|pandoc.MetaList|_</span></a>, and
<a href="#id278"><span class="problematic" id="id279">|pandoc.MetaMap|_</span></a> can be used to ensure that a value is treated in
the intended way. E.g., an empty table is normally treated as a
<code class="docutils literal notranslate"><span class="pre">MetaMap</span></code>, but can be made into an empty <code class="docutils literal notranslate"><span class="pre">MetaList</span></code> by calling
<code class="docutils literal notranslate"><span class="pre">pandoc.MetaList{}</span></code>. However, the same can be accomplished by using
the generic functions like <code class="docutils literal notranslate"><span class="pre">pandoc.List</span></code>, <code class="docutils literal notranslate"><span class="pre">pandoc.Inlines</span></code>, or
<code class="docutils literal notranslate"><span class="pre">pandoc.Blocks</span></code>.</p>
<p>Use the function <a href="#id280"><span class="problematic" id="id281">|pandoc.utils.type|_</span></a> to get the type of a metadata
value.</p>
</section>
<section id="block">
<span id="type-block"></span><h3><a class="toc-backref" href="#id182" role="doc-backlink">Block</a><a class="headerlink" href="#block" title="この見出しへのパーマリンク">¶</a></h3>
<p>Block values are equal in Lua if and only if they are equal in Haskell.</p>
<section id="common-methods">
<h4>Common methods<a class="headerlink" href="#common-methods" title="この見出しへのパーマリンク">¶</a></h4>
<section id="type-block-walk">
<span id="id2"></span><h5>walk<a class="headerlink" href="#type-block-walk" title="この見出しへのパーマリンク">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">walk(self,</span> <span class="pre">lua_filter)</span></code></p>
<p>Applies a Lua filter to the block element. Just as for full-document
filters, the order in which elements are traversed can be controlled by
setting the <code class="docutils literal notranslate"><span class="pre">traverse</span></code> field of the filter; see the section on
<a class="reference external" href="#traversal-order">traversal order</a>.</p>
<p>Note that the filter is applied to the subtree, but not to the <code class="docutils literal notranslate"><span class="pre">self</span></code>
block element. The rationale is that otherwise the element could be
deleted by the filter, or replaced with multiple block elements, which
might lead to possibly unexpected results.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">self</span></code></dt><dd><p>the element (<a class="reference external" href="#type-block">Block</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lua_filter</span></code></dt><dd><p>map of filter functions (table)</p>
</dd>
</dl>
<p>Result:</p>
<ul class="simple">
<li><p>filtered block (<a class="reference external" href="#type-block">Block</a>)</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-- returns `pandoc.Para{pandoc.Str &#39;Bye&#39;}`
return pandoc.Para(&#39;Hi&#39;):walk {
  Str = function (_) return &#39;Bye&#39; end,
}
</pre></div>
</div>
</section>
</section>
<section id="blockquote">
<span id="type-blockquote"></span><h4>BlockQuote<a class="headerlink" href="#blockquote" title="この見出しへのパーマリンク">¶</a></h4>
<p>A block quote element.</p>
<p>Values of this type can be created with the <a href="#id282"><span class="problematic" id="id283">|pandoc.BlockQuote|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>block content (<a href="#id284"><span class="problematic" id="id285">`Blocks`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">BlockQuote</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="bulletlist">
<span id="type-bulletlist"></span><h4>BulletList<a class="headerlink" href="#bulletlist" title="この見出しへのパーマリンク">¶</a></h4>
<p>A bullet list.</p>
<p>Values of this type can be created with the <a href="#id286"><span class="problematic" id="id287">|pandoc.BulletList|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>list items (<a href="#id288"><span class="problematic" id="id289">`List`_</span></a> of items, i.e., <a href="#id290"><span class="problematic" id="id291">`List`_</span></a> of <a href="#id292"><span class="problematic" id="id293">`Blocks`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">BulletList</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="codeblock">
<span id="type-codeblock"></span><h4>CodeBlock<a class="headerlink" href="#codeblock" title="この見出しへのパーマリンク">¶</a></h4>
<p>Block of code.</p>
<p>Values of this type can be created with the <a href="#id294"><span class="problematic" id="id295">|pandoc.CodeBlock|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>code string (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>element attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code> (訳注: 識別子)</dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a href="#id296"><span class="problematic" id="id297">`List`_</span></a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">CodeBlock</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="definitionlist">
<span id="type-definitionlist"></span><h4>DefinitionList<a class="headerlink" href="#definitionlist" title="この見出しへのパーマリンク">¶</a></h4>
<p>Definition list, containing terms and their explanation.</p>
<p>Values of this type can be created with the <a href="#id298"><span class="problematic" id="id299">|pandoc.DefinitionList|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>list of items</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">DefinitionList</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="div">
<span id="type-div"></span><h4>Div<a class="headerlink" href="#div" title="この見出しへのパーマリンク">¶</a></h4>
<p>Generic block container with attributes.</p>
<p>Values of this type can be created with the <a href="#id300"><span class="problematic" id="id301">|pandoc.Div|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>block content (<a href="#id302"><span class="problematic" id="id303">`Blocks`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>element attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code> (訳注: 識別子)</dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a href="#id304"><span class="problematic" id="id305">`List`_</span></a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Div</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="header">
<span id="type-header"></span><h4>Header<a class="headerlink" href="#header" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a header element.</p>
<p>Values of this type can be created with the <a href="#id306"><span class="problematic" id="id307">|pandoc.Header|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">level</span></code></dt><dd><p>header level (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a href="#id308"><span class="problematic" id="id309">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>element attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code> (訳注: 識別子)</dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a href="#id310"><span class="problematic" id="id311">`List`_</span></a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Header</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="horizontalrule">
<span id="type-horizontalrule"></span><h4>HorizontalRule<a class="headerlink" href="#horizontalrule" title="この見出しへのパーマリンク">¶</a></h4>
<p>A horizontal rule.</p>
<p>Values of this type can be created with the <a href="#id312"><span class="problematic" id="id313">|pandoc.HorizontalRule|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">HorizontalRule</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="lineblock">
<span id="type-lineblock"></span><h4>LineBlock<a class="headerlink" href="#lineblock" title="この見出しへのパーマリンク">¶</a></h4>
<p>A line block, i.e. a list of lines, each separated from the next by a
newline.</p>
<p>Values of this type can be created with the <a href="#id314"><span class="problematic" id="id315">|pandoc.LineBlock|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a href="#id316"><span class="problematic" id="id317">`List`_</span></a> of lines, i.e. <a href="#id318"><span class="problematic" id="id319">`List`_</span></a> of <a href="#id320"><span class="problematic" id="id321">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">LineBlock</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="null">
<span id="type-null"></span><h4>Null<a class="headerlink" href="#null" title="この見出しへのパーマリンク">¶</a></h4>
<p>A null element; this element never produces any output in the target
format.</p>
<p>Values of this type can be created with the <a href="#id322"><span class="problematic" id="id323">|pandoc.Null|_</span></a>
constructor.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Null</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="orderedlist">
<span id="type-orderedlist"></span><h4>OrderedList<a class="headerlink" href="#orderedlist" title="この見出しへのパーマリンク">¶</a></h4>
<p>An ordered list.</p>
<p>Values of this type can be created with the <a href="#id324"><span class="problematic" id="id325">|pandoc.OrderedList|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>list items (<a href="#id326"><span class="problematic" id="id327">`List`_</span></a> of items, i.e., <a href="#id328"><span class="problematic" id="id329">`List`_</span></a> of <a href="#id330"><span class="problematic" id="id331">`Blocks`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">listAttributes</span></code></dt><dd><p>list parameters (<a class="reference external" href="#type-listattributes">ListAttributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">start</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">listAttributes.start</span></code> (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">style</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">listAttributes.style</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">delimiter</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">listAttributes.delimiter</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">OrderedList</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="para">
<span id="type-para"></span><h4>Para<a class="headerlink" href="#para" title="この見出しへのパーマリンク">¶</a></h4>
<p>A paragraph.</p>
<p>Values of this type can be created with the <a href="#id332"><span class="problematic" id="id333">|pandoc.Para|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a href="#id334"><span class="problematic" id="id335">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Para</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="plain">
<span id="type-plain"></span><h4>Plain<a class="headerlink" href="#plain" title="この見出しへのパーマリンク">¶</a></h4>
<p>Plain text, not a paragraph.</p>
<p>Values of this type can be created with the <a href="#id336"><span class="problematic" id="id337">|pandoc.Plain|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a href="#id338"><span class="problematic" id="id339">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Plain</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="rawblock">
<span id="type-rawblock"></span><h4>RawBlock<a class="headerlink" href="#rawblock" title="この見出しへのパーマリンク">¶</a></h4>
<p>Raw content of a specified format.</p>
<p>Values of this type can be created with the <a href="#id340"><span class="problematic" id="id341">|pandoc.RawBlock|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code></dt><dd><p>format of content (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>raw content (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">RawBlock</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="table">
<span id="type-table"></span><h4>Table<a class="headerlink" href="#table" title="この見出しへのパーマリンク">¶</a></h4>
<p>A table.</p>
<p>Values of this type can be created with the <a href="#id342"><span class="problematic" id="id343">|pandoc.Table|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>table attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">caption</span></code></dt><dd><p>table caption (<a class="reference external" href="#type-caption">Caption</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">colspecs</span></code></dt><dd><p>column specifications, i.e., alignments and widths (<a href="#id344"><span class="problematic" id="id345">`List`_</span></a> of
<a class="reference external" href="#type-colspec">ColSpec</a>s)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">head</span></code></dt><dd><p>table head (<a class="reference external" href="#type-tablehead">TableHead</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bodies</span></code></dt><dd><p>table bodies (<a href="#id346"><span class="problematic" id="id347">`List`_</span></a> of <a class="reference external" href="#type-tablebody">TableBody</a>s)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">foot</span></code></dt><dd><p>table foot (<a class="reference external" href="#type-tablefoot">TableFoot</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code> (訳注: 識別子)</dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a href="#id348"><span class="problematic" id="id349">`List`_</span></a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Table</span></code> (string)</p>
</dd>
</dl>
<p>A table cell is a list of blocks.</p>
<p><em>Alignment</em> is a string value indicating the horizontal alignment of a
table column. <code class="docutils literal notranslate"><span class="pre">AlignLeft</span></code>, <code class="docutils literal notranslate"><span class="pre">AlignRight</span></code>, and <code class="docutils literal notranslate"><span class="pre">AlignCenter</span></code> leads
cell content to be left-aligned, right-aligned, and centered,
respectively. The default alignment is <code class="docutils literal notranslate"><span class="pre">AlignDefault</span></code> (often
equivalent to centered).</p>
</section>
</section>
<section id="blocks">
<span id="type-blocks"></span><h3><a class="toc-backref" href="#id183" role="doc-backlink">Blocks</a><a class="headerlink" href="#blocks" title="この見出しへのパーマリンク">¶</a></h3>
<p>List of <a class="reference external" href="#type-block">Block</a> elements, with the same methods as a generic <a href="#id350"><span class="problematic" id="id351">`List`_</span></a>.
It is usually not necessary to create values of this type in user
scripts, as pandoc can convert other types into Blocks wherever a value
of this type is expected:</p>
<ul class="simple">
<li><p>a list of <a class="reference external" href="#type-block">Block</a> (or Block-like) values is used directly;</p></li>
<li><p>a single <a href="#id352"><span class="problematic" id="id353">`Inlines`_</span></a> value is wrapped into a <a class="reference external" href="#type-plain">Plain</a> element;</p></li>
<li><p>string values are turned into an <a href="#id354"><span class="problematic" id="id355">`Inlines`_</span></a> value by splitting the
string into words (see <a href="#id356"><span class="problematic" id="id357">`Inlines`_</span></a>), and then wrapping the result into
a Plain singleton.</p></li>
</ul>
<section id="methods">
<h4>Methods<a class="headerlink" href="#methods" title="この見出しへのパーマリンク">¶</a></h4>
<p>Lists of type <code class="docutils literal notranslate"><span class="pre">Blocks</span></code> share all methods available in generic lists,
see the <code class="docutils literal notranslate"><span class="pre">`pandoc.List</span></code> module`_.</p>
<p>Additionally, the following methods are available on Blocks values:</p>
<section id="type-blocks-walk">
<span id="id3"></span><h5>walk<a class="headerlink" href="#type-blocks-walk" title="この見出しへのパーマリンク">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">walk(self,</span> <span class="pre">lua_filter)</span></code></p>
<p>Applies a Lua filter to the Blocks list. Just as for full-document
filters, the order in which elements are traversed can be controlled by
setting the <code class="docutils literal notranslate"><span class="pre">traverse</span></code> field of the filter; see the section on
<a class="reference external" href="#traversal-order">traversal order</a>.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">self</span></code></dt><dd><p>the list (<a href="#id358"><span class="problematic" id="id359">`Blocks`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lua_filter</span></code></dt><dd><p>map of filter functions (table)</p>
</dd>
</dl>
<p>Result:</p>
<ul class="simple">
<li><p>filtered list (<a href="#id360"><span class="problematic" id="id361">`Blocks`_</span></a>)</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-- returns `pandoc.Blocks{pandoc.Para(&#39;Salve!&#39;)}`
return pandoc.Blocks{pandoc.Plain(&#39;Salve!)}:walk {
  Plain = function (p) return pandoc.Para(p.content) end,
}
</pre></div>
</div>
</section>
</section>
</section>
<section id="inline">
<span id="type-inline"></span><h3><a class="toc-backref" href="#id184" role="doc-backlink">Inline</a><a class="headerlink" href="#inline" title="この見出しへのパーマリンク">¶</a></h3>
<p>Inline values are equal in Lua if and only if they are equal in Haskell.</p>
<section id="common-methods-1">
<span id="id4"></span><h4>Common methods<a class="headerlink" href="#common-methods-1" title="この見出しへのパーマリンク">¶</a></h4>
<section id="type-inline-walk">
<span id="id5"></span><h5>walk<a class="headerlink" href="#type-inline-walk" title="この見出しへのパーマリンク">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">walk(self,</span> <span class="pre">lua_filter)</span></code></p>
<p>Applies a Lua filter to the Inline element. Just as for full-document
filters, the order in which elements are traversed can be controlled by
setting the <code class="docutils literal notranslate"><span class="pre">traverse</span></code> field of the filter; see the section on
<a class="reference external" href="#traversal-order">traversal order</a>.</p>
<p>Note that the filter is applied to the subtree, but not to the <code class="docutils literal notranslate"><span class="pre">self</span></code>
inline element. The rationale is that otherwise the element could be
deleted by the filter, or replaced with multiple inline elements, which
might lead to possibly unexpected results.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">self</span></code></dt><dd><p>the element (<a class="reference external" href="#type-inline">Inline</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lua_filter</span></code></dt><dd><p>map of filter functions (table)</p>
</dd>
</dl>
<p>Result:</p>
<ul class="simple">
<li><p>filtered inline element (<a class="reference external" href="#type-inline">Inline</a>)</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-- returns `pandoc.SmallCaps(&#39;SPQR)`
return pandoc.SmallCaps(&#39;spqr&#39;):walk {
  Str = function (s) return string.upper(s.text) end,
}
</pre></div>
</div>
</section>
</section>
<section id="cite">
<span id="type-cite"></span><h4>Cite<a class="headerlink" href="#cite" title="この見出しへのパーマリンク">¶</a></h4>
<p>Citation.</p>
<p>Values of this type can be created with the <a href="#id362"><span class="problematic" id="id363">|pandoc.Cite|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>(<a href="#id364"><span class="problematic" id="id365">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">citations</span></code></dt><dd><p>citation entries (<a href="#id366"><span class="problematic" id="id367">`List`_</span></a> of <a class="reference external" href="#type-citation">Citations</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Cite</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="code">
<span id="type-code"></span><h4>コード<a class="headerlink" href="#code" title="この見出しへのパーマリンク">¶</a></h4>
<p>Inline code</p>
<p>Values of this type can be created with the <a href="#id368"><span class="problematic" id="id369">|pandoc.Code|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>code string (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code> (訳注: 識別子)</dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a href="#id370"><span class="problematic" id="id371">`List`_</span></a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Code</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="emph">
<span id="type-emph"></span><h4>Emph<a class="headerlink" href="#emph" title="この見出しへのパーマリンク">¶</a></h4>
<p>Emphasized text</p>
<p>Values of this type can be created with the <a href="#id372"><span class="problematic" id="id373">|pandoc.Emph|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a href="#id374"><span class="problematic" id="id375">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Emph</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="image">
<span id="type-image"></span><h4>Image<a class="headerlink" href="#image" title="この見出しへのパーマリンク">¶</a></h4>
<p>Image: alt text (list of inlines), target</p>
<p>Values of this type can be created with the <a href="#id376"><span class="problematic" id="id377">|pandoc.Image|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">caption</span></code></dt><dd><p>text used to describe the image (<a href="#id378"><span class="problematic" id="id379">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">src</span></code></dt><dd><p>path to the image file (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">title</span></code></dt><dd><p>brief image description (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code> (訳注: 識別子)</dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a href="#id380"><span class="problematic" id="id381">`List`_</span></a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Image</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="linebreak">
<span id="type-linebreak"></span><h4>LineBreak<a class="headerlink" href="#linebreak" title="この見出しへのパーマリンク">¶</a></h4>
<p>Hard line break</p>
<p>Values of this type can be created with the <a href="#id382"><span class="problematic" id="id383">|pandoc.LineBreak|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">LineBreak</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="link">
<span id="type-link"></span><h4>Link<a class="headerlink" href="#link" title="この見出しへのパーマリンク">¶</a></h4>
<p>Hyperlink: alt text (list of inlines), target</p>
<p>Values of this type can be created with the <a href="#id384"><span class="problematic" id="id385">|pandoc.Link|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>text for this link (<a href="#id386"><span class="problematic" id="id387">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target</span></code></dt><dd><p>the link target (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">title</span></code></dt><dd><p>brief link description</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code> (訳注: 識別子)</dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a href="#id388"><span class="problematic" id="id389">`List`_</span></a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Link</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="math">
<span id="type-math"></span><h4>数式<a class="headerlink" href="#math" title="この見出しへのパーマリンク">¶</a></h4>
<p>TeX math (literal)</p>
<p>Values of this type can be created with the <a href="#id390"><span class="problematic" id="id391">|pandoc.Math|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">mathtype</span></code></dt><dd><p>specifier determining whether the math content should be shown inline
(<code class="docutils literal notranslate"><span class="pre">InlineMath</span></code>) or on a separate line (<code class="docutils literal notranslate"><span class="pre">DisplayMath</span></code>) (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>math content (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Math</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="note">
<span id="type-note"></span><h4>Note<a class="headerlink" href="#note" title="この見出しへのパーマリンク">¶</a></h4>
<p>Footnote or endnote</p>
<p>Values of this type can be created with the <a href="#id392"><span class="problematic" id="id393">|pandoc.Note|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>(<a href="#id394"><span class="problematic" id="id395">`Blocks`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Note</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="quoted">
<span id="type-quoted"></span><h4>Quoted<a class="headerlink" href="#quoted" title="この見出しへのパーマリンク">¶</a></h4>
<p>Quoted text</p>
<p>Values of this type can be created with the <a href="#id396"><span class="problematic" id="id397">|pandoc.Quoted|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">quotetype</span></code></dt><dd><p>type of quotes to be used; one of <code class="docutils literal notranslate"><span class="pre">SingleQuote</span></code> or <code class="docutils literal notranslate"><span class="pre">DoubleQuote</span></code>
(string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>quoted text (<a href="#id398"><span class="problematic" id="id399">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Quoted</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="rawinline">
<span id="type-rawinline"></span><h4>RawInline<a class="headerlink" href="#rawinline" title="この見出しへのパーマリンク">¶</a></h4>
<p>Raw inline</p>
<p>Values of this type can be created with the <a href="#id400"><span class="problematic" id="id401">|pandoc.RawInline|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code></dt><dd><p>the format of the content (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>raw content (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">RawInline</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="smallcaps">
<span id="type-smallcaps"></span><h4>SmallCaps<a class="headerlink" href="#smallcaps" title="この見出しへのパーマリンク">¶</a></h4>
<p>Small caps text</p>
<p>Values of this type can be created with the <a href="#id402"><span class="problematic" id="id403">|pandoc.SmallCaps|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>(<a href="#id404"><span class="problematic" id="id405">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">SmallCaps</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="softbreak">
<span id="type-softbreak"></span><h4>SoftBreak<a class="headerlink" href="#softbreak" title="この見出しへのパーマリンク">¶</a></h4>
<p>Soft line break</p>
<p>Values of this type can be created with the <a href="#id406"><span class="problematic" id="id407">|pandoc.SoftBreak|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">SoftBreak</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="space">
<span id="type-space"></span><h4>Space<a class="headerlink" href="#space" title="この見出しへのパーマリンク">¶</a></h4>
<p>Inter-word space</p>
<p>Values of this type can be created with the <a href="#id408"><span class="problematic" id="id409">|pandoc.Space|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Space</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="span">
<span id="type-span"></span><h4>Span<a class="headerlink" href="#span" title="この見出しへのパーマリンク">¶</a></h4>
<p>Generic inline container with attributes</p>
<p>Values of this type can be created with the <a href="#id410"><span class="problematic" id="id411">|pandoc.Span|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>wrapped content (<a href="#id412"><span class="problematic" id="id413">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code> (訳注: 識別子)</dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a href="#id414"><span class="problematic" id="id415">`List`_</span></a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Span</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="str">
<span id="type-str"></span><h4>Str<a class="headerlink" href="#str" title="この見出しへのパーマリンク">¶</a></h4>
<p>Text</p>
<p>Values of this type can be created with the <a href="#id416"><span class="problematic" id="id417">|pandoc.Str|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>content (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Str</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="strikeout">
<span id="type-strikeout"></span><h4>取り消し線<a class="headerlink" href="#strikeout" title="この見出しへのパーマリンク">¶</a></h4>
<p>Strikeout text</p>
<p>Values of this type can be created with the <a href="#id418"><span class="problematic" id="id419">|pandoc.Strikeout|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a href="#id420"><span class="problematic" id="id421">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Strikeout</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="strong">
<span id="type-strong"></span><h4>Strong<a class="headerlink" href="#strong" title="この見出しへのパーマリンク">¶</a></h4>
<p>Strongly emphasized text</p>
<p>Values of this type can be created with the <a href="#id422"><span class="problematic" id="id423">|pandoc.Strong|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a href="#id424"><span class="problematic" id="id425">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Strong</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="subscript">
<span id="type-subscript"></span><h4>Subscript<a class="headerlink" href="#subscript" title="この見出しへのパーマリンク">¶</a></h4>
<p>Subscripted text</p>
<p>Values of this type can be created with the <a href="#id426"><span class="problematic" id="id427">|pandoc.Subscript|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a href="#id428"><span class="problematic" id="id429">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Subscript</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="superscript">
<span id="type-superscript"></span><h4>Superscript<a class="headerlink" href="#superscript" title="この見出しへのパーマリンク">¶</a></h4>
<p>Superscripted text</p>
<p>Values of this type can be created with the <a href="#id430"><span class="problematic" id="id431">|pandoc.Superscript|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a href="#id432"><span class="problematic" id="id433">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Superscript</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="underline">
<span id="type-underline"></span><h4>下線<a class="headerlink" href="#underline" title="この見出しへのパーマリンク">¶</a></h4>
<p>Underlined text</p>
<p>Values of this type can be created with the <a href="#id434"><span class="problematic" id="id435">|pandoc.Underline|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a href="#id436"><span class="problematic" id="id437">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Underline</span></code> (string)</p>
</dd>
</dl>
</section>
</section>
<section id="inlines">
<span id="type-inlines"></span><h3><a class="toc-backref" href="#id185" role="doc-backlink">Inlines</a><a class="headerlink" href="#inlines" title="この見出しへのパーマリンク">¶</a></h3>
<p>List of <a class="reference external" href="#type-inline">Inline</a> elements, with the same methods as a generic <a href="#id438"><span class="problematic" id="id439">`List`_</span></a>.
It is usually not necessary to create values of this type in user
scripts, as pandoc can convert other types into Blocks wherever a value
of this type is expected:</p>
<ul class="simple">
<li><p>lists of <a class="reference external" href="#type-inline">Inline</a> (or Inline-like) values are used directly;</p></li>
<li><p>single <a class="reference external" href="#type-inline">Inline</a> values are converted into a list containing just
that element;</p></li>
<li><p>String values are split into words, converting line breaks into
<a class="reference external" href="#type-softbreak">SoftBreak</a> elements, and other whitespace characters into
<a class="reference external" href="#type-space">Spaces</a>.</p></li>
</ul>
<section id="methods-1">
<span id="id6"></span><h4>Methods<a class="headerlink" href="#methods-1" title="この見出しへのパーマリンク">¶</a></h4>
<p>Lists of type <code class="docutils literal notranslate"><span class="pre">Inlines</span></code> share all methods available in generic lists,
see the <code class="docutils literal notranslate"><span class="pre">`pandoc.List</span></code> module`_.</p>
<p>Additionally, the following methods are available on <em>Inlines</em> values:</p>
<section id="type-inlines-walk">
<span id="id7"></span><h5>walk<a class="headerlink" href="#type-inlines-walk" title="この見出しへのパーマリンク">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">walk(self,</span> <span class="pre">lua_filter)</span></code></p>
<p>Applies a Lua filter to the Inlines list. Just as for full-document
filters, the order in which elements are handled are are Inline →
Inlines → Block → Blocks. The filter is applied to all list items <em>and</em>
to the list itself.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">self</span></code></dt><dd><p>the list (<a href="#id440"><span class="problematic" id="id441">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lua_filter</span></code></dt><dd><p>map of filter functions (table)</p>
</dd>
</dl>
<p>Result:</p>
<ul class="simple">
<li><p>filtered list (<a href="#id442"><span class="problematic" id="id443">`Inlines`_</span></a>)</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-- returns `pandoc.Inlines{pandoc.SmallCaps(&#39;SPQR&#39;)}`
return pandoc.Inlines{pandoc.Emph(&#39;spqr&#39;)}:walk {
  Str = function (s) return string.upper(s.text) end,
  Emph = function (e) return pandoc.SmallCaps(e.content) end,
}
</pre></div>
</div>
</section>
</section>
</section>
<section id="element-components">
<h3><a class="toc-backref" href="#id186" role="doc-backlink">Element components</a><a class="headerlink" href="#element-components" title="この見出しへのパーマリンク">¶</a></h3>
<section id="attr">
<span id="type-attr"></span><h4>Attr<a class="headerlink" href="#attr" title="この見出しへのパーマリンク">¶</a></h4>
<p>A set of element attributes. Values of this type can be created with the
<a href="#id444"><span class="problematic" id="id445">|pandoc.Attr|_</span></a> constructor. For convenience, it is usually not
necessary to construct the value directly if it is part of an element,
and it is sufficient to pass an HTML-like table. E.g., to create a span
with identifier “text” and classes “a” and “b”, one can write:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>local span = pandoc.Span(&#39;text&#39;, {id = &#39;text&#39;, class = &#39;a b&#39;})
</pre></div>
</div>
<p>This also works when using the <code class="docutils literal notranslate"><span class="pre">attr</span></code> setter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>local span = pandoc.Span &#39;text&#39;
span.attr = {id = &#39;text&#39;, class = &#39;a b&#39;, other_attribute = &#39;1&#39;}
</pre></div>
</div>
<p>Attr values are equal in Lua if and only if they are equal in Haskell.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code> (訳注: 識別子)</dt><dd><p>element identifier (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>element classes (<a href="#id446"><span class="problematic" id="id447">`List`_</span></a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>collection of key/value pairs (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
</dl>
</section>
<section id="attributes">
<span id="type-attributes"></span><h4>Attributes<a class="headerlink" href="#attributes" title="この見出しへのパーマリンク">¶</a></h4>
<p>List of key/value pairs. Values can be accessed by using keys as indices
to the list table.</p>
<p>Attributes values are equal in Lua if and only if they are equal in
Haskell.</p>
</section>
<section id="caption">
<span id="type-caption"></span><h4>Caption<a class="headerlink" href="#caption" title="この見出しへのパーマリンク">¶</a></h4>
<p>The caption of a table, with an optional short caption.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">long</span></code></dt><dd><p>long caption (<a href="#id448"><span class="problematic" id="id449">`Blocks`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">short</span></code></dt><dd><p>short caption (<a href="#id450"><span class="problematic" id="id451">`Inlines`_</span></a>)</p>
</dd>
</dl>
</section>
<section id="cell">
<span id="type-cell"></span><h4>Cell<a class="headerlink" href="#cell" title="この見出しへのパーマリンク">¶</a></h4>
<p>A table cell.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>cell attributes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">alignment</span></code></dt><dd><p>individual cell alignment (<a class="reference external" href="#type-alignment">Alignment</a>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">contents</span></code></dt><dd><p>cell contents (<a href="#id452"><span class="problematic" id="id453">`Blocks`_</span></a>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">col_span</span></code></dt><dd><p>number of columns spanned by the cell; the width of the cell in
columns (integer).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">row_span</span></code></dt><dd><p>number of rows spanned by the cell; the height of the cell in rows
(integer).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code> (訳注: 識別子)</dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a href="#id454"><span class="problematic" id="id455">`List`_</span></a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
</dl>
</section>
<section id="citation">
<span id="type-citation"></span><h4>Citation<a class="headerlink" href="#citation" title="この見出しへのパーマリンク">¶</a></h4>
<p>Single citation entry</p>
<p>Values of this type can be created with the <a href="#id456"><span class="problematic" id="id457">|pandoc.Citation|_</span></a>
constructor.</p>
<p>Citation values are equal in Lua if and only if they are equal in
Haskell.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code></dt><dd><p>citation identifier, e.g., a bibtex key (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code></dt><dd><p>citation mode, one of <code class="docutils literal notranslate"><span class="pre">AuthorInText</span></code>, <code class="docutils literal notranslate"><span class="pre">SuppressAuthor</span></code>, or
<code class="docutils literal notranslate"><span class="pre">NormalCitation</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">prefix</span></code></dt><dd><p>citation prefix (<a href="#id458"><span class="problematic" id="id459">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">suffix</span></code></dt><dd><p>citation suffix (<a href="#id460"><span class="problematic" id="id461">`Inlines`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">note_num</span></code></dt><dd><p>note number (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hash</span></code></dt><dd><p>hash (integer)</p>
</dd>
</dl>
</section>
<section id="colspec">
<span id="type-colspec"></span><h4>ColSpec<a class="headerlink" href="#colspec" title="この見出しへのパーマリンク">¶</a></h4>
<p>Column alignment and width specification for a single table column.</p>
<p>This is a pair, i.e., a plain table, with the following components:</p>
<ol class="arabic simple">
<li><p>cell alignment (<a class="reference external" href="#type-alignment">Alignment</a>).</p></li>
<li><p>table column width, as a fraction of the page width (number).</p></li>
</ol>
</section>
<section id="listattributes">
<span id="type-listattributes"></span><h4>ListAttributes<a class="headerlink" href="#listattributes" title="この見出しへのパーマリンク">¶</a></h4>
<p>List attributes</p>
<p>Values of this type can be created with the <a href="#id462"><span class="problematic" id="id463">|pandoc.ListAttributes|_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">start</span></code></dt><dd><p>number of the first list item (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">style</span></code></dt><dd><p>style used for list numbers; possible values are <code class="docutils literal notranslate"><span class="pre">DefaultStyle</span></code>,
<code class="docutils literal notranslate"><span class="pre">Example</span></code>, <code class="docutils literal notranslate"><span class="pre">Decimal</span></code>, <code class="docutils literal notranslate"><span class="pre">LowerRoman</span></code>, <code class="docutils literal notranslate"><span class="pre">UpperRoman</span></code>,
<code class="docutils literal notranslate"><span class="pre">LowerAlpha</span></code>, and <code class="docutils literal notranslate"><span class="pre">UpperAlpha</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">delimiter</span></code></dt><dd><p>delimiter of list numbers; one of <code class="docutils literal notranslate"><span class="pre">DefaultDelim</span></code>, <code class="docutils literal notranslate"><span class="pre">Period</span></code>,
<code class="docutils literal notranslate"><span class="pre">OneParen</span></code>, and <code class="docutils literal notranslate"><span class="pre">TwoParens</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="row">
<span id="type-row"></span><h4>Row<a class="headerlink" href="#row" title="この見出しへのパーマリンク">¶</a></h4>
<p>A table row.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>element attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cells</span></code></dt><dd><p>list of table cells (<a href="#id464"><span class="problematic" id="id465">`List`_</span></a> of <a class="reference external" href="#type-cell">Cell</a>s)</p>
</dd>
</dl>
</section>
<section id="tablebody">
<span id="type-tablebody"></span><h4>TableBody<a class="headerlink" href="#tablebody" title="この見出しへのパーマリンク">¶</a></h4>
<p>A body of a table, with an intermediate head and the specified number of
row header columns.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>table body attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">body</span></code></dt><dd><p>table body rows (<a href="#id466"><span class="problematic" id="id467">`List`_</span></a> of <a class="reference external" href="#type-row">Row</a>s)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">head</span></code></dt><dd><p>intermediate head (<a href="#id468"><span class="problematic" id="id469">`List`_</span></a> of <a class="reference external" href="#type-row">Row</a>s)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">row_head_columns</span></code></dt><dd><p>number of columns taken up by the row head of each row of a
<a class="reference external" href="#type-tablebody">TableBody</a>. The row body takes up the remaining columns.</p>
</dd>
</dl>
</section>
<section id="tablefoot">
<span id="type-tablefoot"></span><h4>TableFoot<a class="headerlink" href="#tablefoot" title="この見出しへのパーマリンク">¶</a></h4>
<p>The foot of a table.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>element attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rows</span></code></dt><dd><p>list of rows (<a href="#id470"><span class="problematic" id="id471">`List`_</span></a> of <a class="reference external" href="#type-row">Row</a>s)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code> (訳注: 識別子)</dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a href="#id472"><span class="problematic" id="id473">`List`_</span></a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
</dl>
</section>
<section id="tablehead">
<span id="type-tablehead"></span><h4>TableHead<a class="headerlink" href="#tablehead" title="この見出しへのパーマリンク">¶</a></h4>
<p>The head of a table.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>element attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rows</span></code></dt><dd><p>list of rows (<a href="#id474"><span class="problematic" id="id475">`List`_</span></a> of <a class="reference external" href="#type-row">Row</a>s)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code> (訳注: 識別子)</dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a href="#id476"><span class="problematic" id="id477">`List`_</span></a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
</dl>
</section>
</section>
<section id="readeroptions">
<span id="type-readeroptions"></span><h3><a class="toc-backref" href="#id187" role="doc-backlink">ReaderOptions</a><a class="headerlink" href="#readeroptions" title="この見出しへのパーマリンク">¶</a></h3>
<p>Pandoc reader options</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">abbreviations</span></code></dt><dd><p>set of known abbreviations (set of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">columns</span></code></dt><dd><p>number of columns in terminal (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">default_image_extension</span></code></dt><dd><p>default extension for images (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extensions</span></code></dt><dd><p>string representation of the syntax extensions bit field (sequence of
strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">indented_code_classes</span></code></dt><dd><p>default classes for indented code blocks (list of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">standalone</span></code></dt><dd><p>whether the input was a standalone document with header (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">strip_comments</span></code></dt><dd><p>HTML comments are stripped instead of parsed as raw HTML (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tab_stop</span></code></dt><dd><p>width (i.e. equivalent number of spaces) of tab stops (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track_changes</span></code></dt><dd><p>track changes setting for docx; one of <code class="docutils literal notranslate"><span class="pre">accept-changes</span></code>,
<code class="docutils literal notranslate"><span class="pre">reject-changes</span></code>, and <code class="docutils literal notranslate"><span class="pre">all-changes</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="writeroptions">
<span id="type-writeroptions"></span><h3><a class="toc-backref" href="#id188" role="doc-backlink">WriterOptions</a><a class="headerlink" href="#writeroptions" title="この見出しへのパーマリンク">¶</a></h3>
<p>Pandoc writer options</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cite_method</span></code></dt><dd><p>How to print cites – one of ‘citeproc’, ‘natbib’, or ‘biblatex’
(string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">columns</span></code></dt><dd><p>Characters in a line (for text wrapping) (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dpi</span></code></dt><dd><p>DPI for pixel to/from inch/cm conversions (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">email_obfuscation</span></code></dt><dd><p>How to obfuscate emails – one of ‘none’, ‘references’, or
‘javascript’ (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">epub_chapter_level</span></code></dt><dd><p>Header level for chapters, i.e., how the document is split into
separate files (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">epub_fonts</span></code></dt><dd><p>Paths to fonts to embed (sequence of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">epub_metadata</span></code></dt><dd><p>Metadata to include in EPUB (string|nil)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">epub_subdirectory</span></code></dt><dd><p>Subdir for epub in OCF (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extensions</span></code></dt><dd><p>Markdown extensions that can be used (sequence of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">highlight_style</span></code></dt><dd><p>Style to use for highlighting; see the output of
<code class="docutils literal notranslate"><span class="pre">pandoc</span> <span class="pre">--print-highlight-style=...</span></code> for an example structure. The
value <code class="docutils literal notranslate"><span class="pre">nil</span></code> means that no highlighting is used. (table|nil)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">html_math_method</span></code></dt><dd><p>How to print math in HTML; one ‘plain’, ‘gladtex’, ‘webtex’,
‘mathml’, ‘mathjax’, or a table with keys <code class="docutils literal notranslate"><span class="pre">method</span></code> and <code class="docutils literal notranslate"><span class="pre">url</span></code>.
(string|table)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">html_q_tags</span></code></dt><dd><p>Use <code class="docutils literal notranslate"><span class="pre">&lt;q&gt;</span></code> tags for quotes in HTML (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier_prefix</span></code></dt><dd><p>Prefix for section &amp; note ids in HTML and for footnote marks in
markdown (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">incremental</span></code></dt><dd><p>True if lists should be incremental (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">listings</span></code></dt><dd><p>Use listings package for code (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">number_offset</span></code></dt><dd><p>Starting number for section, subsection, … (sequence of integers)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">number_sections</span></code></dt><dd><p>Number sections in LaTeX (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">prefer_ascii</span></code></dt><dd><p>Prefer ASCII representations of characters when possible (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reference_doc</span></code></dt><dd><p>Path to reference document if specified (string|nil)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reference_links</span></code></dt><dd><p>Use reference links in writing markdown, rst (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reference_location</span></code></dt><dd><p>Location of footnotes and references for writing markdown; one of
‘end-of-block’, ‘end-of-section’, ‘end-of-document’. The common
prefix may be omitted when setting this value. (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">section_divs</span></code></dt><dd><p>Put sections in div tags in HTML (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">setext_headers</span></code></dt><dd><p>Use setext headers for levels 1-2 in markdown (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">slide_level</span></code></dt><dd><p>Force header level of slides (integer|nil)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tab_stop</span></code></dt><dd><p>Tabstop for conversion btw spaces and tabs (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">table_of_contents</span></code></dt><dd><p>Include table of contents (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">template</span></code></dt><dd><p>Template to use (<a class="reference external" href="#type-template">Template</a>|nil)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">toc_depth</span></code></dt><dd><p>Number of levels to include in TOC (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">top_level_division</span></code></dt><dd><p>Type of top-level divisions; one of ‘top-level-part’,
‘top-level-chapter’, ‘top-level-section’, or ‘top-level-default’. The
prefix <code class="docutils literal notranslate"><span class="pre">top-level</span></code> may be omitted when setting this value. (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">variables</span></code></dt><dd><p>Variables to set in template; string-indexed table (table)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wrap_text</span></code></dt><dd><p>Option for wrapping text; one of ‘wrap-auto’, ‘wrap-none’, or
‘wrap-preserve’. The <code class="docutils literal notranslate"><span class="pre">wrap-</span></code> prefix may be omitted when setting
this value. (string)</p>
</dd>
</dl>
</section>
<section id="commonstate">
<span id="type-commonstate"></span><h3><a class="toc-backref" href="#id189" role="doc-backlink">CommonState</a><a class="headerlink" href="#commonstate" title="この見出しへのパーマリンク">¶</a></h3>
<p>The state used by pandoc to collect information and make it available to
readers and writers.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">input_files</span></code></dt><dd><p>List of input files from command line (<a href="#id478"><span class="problematic" id="id479">`List`_</span></a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">output_file</span></code></dt><dd><p>Output file from command line (string or nil)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">log</span></code></dt><dd><p>A list of log messages in reverse order (<a href="#id480"><span class="problematic" id="id481">`List`_</span></a> of <a class="reference external" href="#type-logmessage">LogMessage</a>s)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">request_headers</span></code></dt><dd><p>Headers to add for HTTP requests; table with header names as keys and
header contents as value (table)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">resource_path</span></code></dt><dd><p>Path to search for resources like included images (<a href="#id482"><span class="problematic" id="id483">`List`_</span></a> of
strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">source_url</span></code></dt><dd><p>Absolute URL or directory of first source file (string or nil)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">user_data_dir</span></code></dt><dd><p>Directory to search for data files (string or nil)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">trace</span></code></dt><dd><p>Whether tracing messages are issued (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">verbosity</span></code></dt><dd><p>Verbosity level; one of <code class="docutils literal notranslate"><span class="pre">INFO</span></code>, <code class="docutils literal notranslate"><span class="pre">WARNING</span></code>, <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> (string)</p>
</dd>
</dl>
</section>
<section id="doc">
<span id="type-doc"></span><h3><a class="toc-backref" href="#id190" role="doc-backlink">Doc</a><a class="headerlink" href="#doc" title="この見出しへのパーマリンク">¶</a></h3>
<p>Reflowable plain-text document. A Doc value can be rendered and reflown
to fit a given column width.</p>
<p>The <a class="reference external" href="#module-pandoc.layout"><code class="docutils literal notranslate"><span class="pre">pandoc.layout</span></code></a> module can be used to create and modify Doc
values. All functions in that module that take a Doc value as their
first argument are also available as Doc methods. E.g.,
<code class="docutils literal notranslate"><span class="pre">(pandoc.layout.literal</span> <span class="pre">'text'):render()</span></code>.</p>
<p>If a string is passed to a function expecting a Doc, then the string is
treated as a literal value. I.e., the following two lines are
equivalent:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="n">test</span> <span class="o">=</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">quotes</span><span class="p">(</span><span class="n">pandoc</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">literal</span> <span class="s1">&#39;this&#39;</span><span class="p">)</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">quotes</span><span class="p">(</span><span class="s1">&#39;this&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="list">
<span id="type-list"></span><h3><a class="toc-backref" href="#id191" role="doc-backlink">List</a><a class="headerlink" href="#list" title="この見出しへのパーマリンク">¶</a></h3>
<p>A list is any Lua table with integer indices. Indices start at one, so
if <code class="docutils literal notranslate"><span class="pre">alist</span> <span class="pre">=</span> <span class="pre">{'value'}</span></code> then <code class="docutils literal notranslate"><span class="pre">alist[1]</span> <span class="pre">==</span> <span class="pre">'value'</span></code>.</p>
<p>Lists, when part of an element, or when generated during marshaling, are
made instances of the <code class="docutils literal notranslate"><span class="pre">pandoc.List</span></code> type for convenience. The
<code class="docutils literal notranslate"><span class="pre">pandoc.List</span></code> type is defined in the <a href="#id484"><span class="problematic" id="id485">`pandoc.List`_</span></a> module. See there
for available methods.</p>
<p>Values of this type can be created with the <a href="#id486"><span class="problematic" id="id487">|pandoc.List|_</span></a>
constructor, turning a normal Lua table into a List.</p>
</section>
<section id="logmessage">
<span id="type-logmessage"></span><h3><a class="toc-backref" href="#id192" role="doc-backlink">LogMessage</a><a class="headerlink" href="#logmessage" title="この見出しへのパーマリンク">¶</a></h3>
<p>A pandoc log message. Objects have no fields, but can be converted to a
string via <code class="docutils literal notranslate"><span class="pre">tostring</span></code>.</p>
</section>
<section id="simpletable">
<span id="type-simpletable"></span><h3><a class="toc-backref" href="#id193" role="doc-backlink">SimpleTable</a><a class="headerlink" href="#simpletable" title="この見出しへのパーマリンク">¶</a></h3>
<p>A simple table is a table structure which resembles the old (pre pandoc
2.10) Table type. Bi-directional conversion from and to <a class="reference external" href="#type-table">Tables</a> is
possible with the <a href="#id488"><span class="problematic" id="id489">|pandoc.utils.to_simple_table|_</span></a> and
<a href="#id490"><span class="problematic" id="id491">|pandoc.utils.from_simple_table|_</span></a> function, respectively. Instances
of this type can also be created directly with the
<a href="#id492"><span class="problematic" id="id493">|pandoc.SimpleTable|_</span></a> constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">caption</span></code></dt><dd><p><a href="#id494"><span class="problematic" id="id495">`Inlines`_</span></a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aligns</span></code></dt><dd><p>column alignments (<a href="#id496"><span class="problematic" id="id497">`List`_</span></a> of <a class="reference external" href="#type-alignment">Alignments</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">widths</span></code></dt><dd><p>column widths; a (<a href="#id498"><span class="problematic" id="id499">`List`_</span></a> of numbers)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">headers</span></code></dt><dd><p>table header row (<a href="#id500"><span class="problematic" id="id501">`List`_</span></a> of simple cells, i.e., <a href="#id502"><span class="problematic" id="id503">`List`_</span></a> of
<a href="#id504"><span class="problematic" id="id505">`Blocks`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rows</span></code></dt><dd><p>table rows (<a href="#id506"><span class="problematic" id="id507">`List`_</span></a> of rows, where a row is a list of simple cells,
i.e., <a href="#id508"><span class="problematic" id="id509">`List`_</span></a> of <a href="#id510"><span class="problematic" id="id511">`Blocks`_</span></a>)</p>
</dd>
</dl>
</section>
<section id="template">
<span id="type-template"></span><h3><a class="toc-backref" href="#id194" role="doc-backlink">Template</a><a class="headerlink" href="#template" title="この見出しへのパーマリンク">¶</a></h3>
<p>Opaque type holding a compiled template.</p>
</section>
<section id="version">
<span id="type-version"></span><h3><a class="toc-backref" href="#id195" role="doc-backlink">Version</a><a class="headerlink" href="#version" title="この見出しへのパーマリンク">¶</a></h3>
<p>A version object. This represents a software version like “2.7.3”. The
object behaves like a numerically indexed table, i.e., if <code class="docutils literal notranslate"><span class="pre">version</span></code>
represents the version <code class="docutils literal notranslate"><span class="pre">2.7.3</span></code>, then</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span>
<span class="n">version</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">7</span>
<span class="n">version</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span>
<span class="c1">#version == 3   -- length</span>
</pre></div>
</div>
<p>Comparisons are performed element-wise, i.e.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Version</span> <span class="s1">&#39;1.12&#39;</span> <span class="o">&gt;</span> <span class="n">Version</span> <span class="s1">&#39;1.9&#39;</span>
</pre></div>
</div>
<p>Values of this type can be created with the <a href="#id512"><span class="problematic" id="id513">|pandoc.types.Version|_</span></a>
constructor.</p>
<section id="must-be-at-least">
<h4><code class="docutils literal notranslate"><span class="pre">must_be_at_least</span></code><a class="headerlink" href="#must-be-at-least" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">must_be_at_least(actual,</span> <span class="pre">expected</span> <span class="pre">[,</span> <span class="pre">error_message])</span></code></p>
<p>Raise an error message if the actual version is older than the expected
version; does nothing if <code class="docutils literal notranslate"><span class="pre">actual</span></code> is equal to or newer than the
expected version.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">actual</span></code></dt><dd><p>actual version specifier (<a class="reference external" href="#type-version">Version</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>minimum expected version (<a class="reference external" href="#type-version">Version</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">error_message</span></code></dt><dd><p>optional error message template. The string is used as format string,
with the expected and actual versions as arguments. Defaults to
<code class="docutils literal notranslate"><span class="pre">&quot;expected</span> <span class="pre">version</span> <span class="pre">%s</span> <span class="pre">or</span> <span class="pre">newer,</span> <span class="pre">got</span> <span class="pre">%s&quot;</span></code>.</p>
</dd>
</dl>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PANDOC_VERSION</span><span class="p">:</span><span class="n">must_be_at_least</span> <span class="s1">&#39;2.7.3&#39;</span>
<span class="n">PANDOC_API_VERSION</span><span class="p">:</span><span class="n">must_be_at_least</span><span class="p">(</span>
  <span class="s1">&#39;1.17.4&#39;</span><span class="p">,</span>
  <span class="s1">&#39;pandoc-types is too old: expected version </span><span class="si">%s</span><span class="s1">, got </span><span class="si">%s</span><span class="s1">&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="module-text">
<h2><a class="toc-backref" href="#id196" role="doc-backlink">Module text</a><a class="headerlink" href="#module-text" title="この見出しへのパーマリンク">¶</a></h2>
<p>UTF-8 aware text manipulation functions, implemented in Haskell. The
module is made available as part of the <code class="docutils literal notranslate"><span class="pre">pandoc</span></code> module via
<code class="docutils literal notranslate"><span class="pre">pandoc.text</span></code>. The text module can also be loaded explicitly:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- uppercase all regular text in a document:</span>
<span class="n">text</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;text&#39;</span>
<span class="kr">function</span> <span class="nf">Str</span> <span class="p">(</span><span class="n">s</span><span class="p">)</span>
  <span class="n">s</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="n">upper</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">s</span>
<span class="kr">end</span>
</pre></div>
</div>
<section id="lower">
<span id="text-lower"></span><h3><a class="toc-backref" href="#id197" role="doc-backlink">lower</a><a class="headerlink" href="#lower" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">lower</span> <span class="pre">(s)</span></code></p>
<p>Returns a copy of a UTF-8 string, converted to lowercase.</p>
</section>
<section id="upper">
<span id="text-upper"></span><h3><a class="toc-backref" href="#id198" role="doc-backlink">upper</a><a class="headerlink" href="#upper" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">upper</span> <span class="pre">(s)</span></code></p>
<p>Returns a copy of a UTF-8 string, converted to uppercase.</p>
</section>
<section id="reverse">
<span id="text-reverse"></span><h3><a class="toc-backref" href="#id199" role="doc-backlink">reverse</a><a class="headerlink" href="#reverse" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">reverse</span> <span class="pre">(s)</span></code></p>
<p>Returns a copy of a UTF-8 string, with characters reversed.</p>
</section>
<section id="len">
<span id="text-len"></span><h3><a class="toc-backref" href="#id200" role="doc-backlink">len</a><a class="headerlink" href="#len" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">len</span> <span class="pre">(s)</span></code></p>
<p>Returns the length of a UTF-8 string.</p>
</section>
<section id="sub">
<span id="text-sub"></span><h3><a class="toc-backref" href="#id201" role="doc-backlink">sub</a><a class="headerlink" href="#sub" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">sub</span> <span class="pre">(s)</span></code></p>
<p>Returns a substring of a UTF-8 string, using Lua’s string indexing
rules.</p>
</section>
</section>
<section id="module-pandoc">
<h2><a class="toc-backref" href="#id202" role="doc-backlink">Module pandoc</a><a class="headerlink" href="#module-pandoc" title="この見出しへのパーマリンク">¶</a></h2>
<p>Lua functions for pandoc scripts; includes constructors for document
tree elements, functions to parse text in a given format, and functions
to filter and modify a subtree.</p>
<section id="id8">
<h3><a class="toc-backref" href="#id203" role="doc-backlink">Pandoc</a><a class="headerlink" href="#id8" title="この見出しへのパーマリンク">¶</a></h3>
<section id="pandoc-blocks-meta">
<span id="pandoc-pandoc"></span><h4><code class="docutils literal notranslate"><span class="pre">Pandoc</span> <span class="pre">(blocks[,</span> <span class="pre">meta])</span></code><a class="headerlink" href="#pandoc-blocks-meta" title="この見出しへのパーマリンク">¶</a></h4>
<p>A complete pandoc document</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">blocks</span></code></dt><dd><p>document content</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">meta</span></code></dt><dd><p>document meta data</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-pandoc">Pandoc</a> object</p>
</section>
</section>
<section id="id9">
<h3><a class="toc-backref" href="#id204" role="doc-backlink">Meta</a><a class="headerlink" href="#id9" title="この見出しへのパーマリンク">¶</a></h3>
<section id="meta-table">
<span id="pandoc-meta"></span><h4><code class="docutils literal notranslate"><span class="pre">Meta</span> <span class="pre">(table)</span></code><a class="headerlink" href="#meta-table" title="この見出しへのパーマリンク">¶</a></h4>
<p>Create a new Meta object.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">table</span></code></dt><dd><p>table containing document meta information</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-meta">Meta</a> object</p>
</section>
</section>
<section id="id10">
<h3><a class="toc-backref" href="#id205" role="doc-backlink">MetaValue</a><a class="headerlink" href="#id10" title="この見出しへのパーマリンク">¶</a></h3>
<section id="metablocks-blocks">
<span id="pandoc-metablocks"></span><h4><code class="docutils literal notranslate"><span class="pre">MetaBlocks</span> <span class="pre">(blocks)</span></code><a class="headerlink" href="#metablocks-blocks" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a value to be used as a MetaBlocks value in meta data; creates a
copy of the input list via <code class="docutils literal notranslate"><span class="pre">pandoc.Blocks</span></code>, discarding all non-list
keys.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">blocks</span></code></dt><dd><p>blocks</p>
</dd>
</dl>
<p>Returns: <a href="#id514"><span class="problematic" id="id515">`Blocks`_</span></a></p>
</section>
<section id="metainlines-inlines">
<span id="pandoc-metainlines"></span><h4><code class="docutils literal notranslate"><span class="pre">MetaInlines</span> <span class="pre">(inlines)</span></code><a class="headerlink" href="#metainlines-inlines" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a value to be used as a MetaInlines value in meta data; creates
a copy of the input list via <code class="docutils literal notranslate"><span class="pre">pandoc.Inlines</span></code>, discarding all non-list
keys.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">inlines</span></code></dt><dd><p>inlines</p>
</dd>
</dl>
<p>Returns: <a href="#id516"><span class="problematic" id="id517">`Inlines`_</span></a></p>
</section>
<section id="metalist-meta-values">
<span id="pandoc-metalist"></span><h4><code class="docutils literal notranslate"><span class="pre">MetaList</span> <span class="pre">(meta_values)</span></code><a class="headerlink" href="#metalist-meta-values" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a value to be used as a MetaList in meta data; creates a copy of
the input list via <code class="docutils literal notranslate"><span class="pre">pandoc.List</span></code>, discarding all non-list keys.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">meta_values</span></code></dt><dd><p>list of meta values</p>
</dd>
</dl>
<p>Returns: <a href="#id518"><span class="problematic" id="id519">`List`_</span></a></p>
</section>
<section id="metamap-key-value-map">
<span id="pandoc-metamap"></span><h4><code class="docutils literal notranslate"><span class="pre">MetaMap</span> <span class="pre">(key_value_map)</span></code><a class="headerlink" href="#metamap-key-value-map" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a value to be used as a MetaMap in meta data; creates a copy of
the input table, keeping only pairs with string keys and discards all
other keys.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">key_value_map</span></code></dt><dd><p>a string-indexed map of meta values</p>
</dd>
</dl>
<p>Returns: table</p>
</section>
<section id="metastring-str">
<span id="pandoc-metastring"></span><h4><code class="docutils literal notranslate"><span class="pre">MetaString</span> <span class="pre">(str)</span></code><a class="headerlink" href="#metastring-str" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a value to be used as a MetaString in meta data; this is the
identity function for boolean values and exists only for completeness.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">str</span></code></dt><dd><p>string value</p>
</dd>
</dl>
<p>Returns: string</p>
</section>
<section id="metabool-bool">
<span id="pandoc-metabool"></span><h4><code class="docutils literal notranslate"><span class="pre">MetaBool</span> <span class="pre">(bool)</span></code><a class="headerlink" href="#metabool-bool" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a value to be used as MetaBool in meta data; this is the
identity function for boolean values and exists only for completeness.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">bool</span></code></dt><dd><p>boolean value</p>
</dd>
</dl>
<p>Returns: boolean</p>
</section>
</section>
<section id="id11">
<h3><a class="toc-backref" href="#id206" role="doc-backlink">Block</a><a class="headerlink" href="#id11" title="この見出しへのパーマリンク">¶</a></h3>
<section id="blockquote-content">
<span id="pandoc-blockquote"></span><h4><code class="docutils literal notranslate"><span class="pre">BlockQuote</span> <span class="pre">(content)</span></code><a class="headerlink" href="#blockquote-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a block quote element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>block content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-blockquote">BlockQuote</a> object</p>
</section>
<section id="bulletlist-items">
<span id="pandoc-bulletlist"></span><h4><code class="docutils literal notranslate"><span class="pre">BulletList</span> <span class="pre">(items)</span></code><a class="headerlink" href="#bulletlist-items" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a bullet list.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">items</span></code></dt><dd><p>list items</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-bulletlist">BulletList</a> object</p>
</section>
<section id="codeblock-text-attr">
<span id="pandoc-codeblock"></span><h4><code class="docutils literal notranslate"><span class="pre">CodeBlock</span> <span class="pre">(text[,</span> <span class="pre">attr])</span></code><a class="headerlink" href="#codeblock-text-attr" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a code block element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>code string</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>element attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-codeblock">CodeBlock</a> object</p>
</section>
<section id="definitionlist-content">
<span id="pandoc-definitionlist"></span><h4><code class="docutils literal notranslate"><span class="pre">DefinitionList</span> <span class="pre">(content)</span></code><a class="headerlink" href="#definitionlist-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a definition list, containing terms and their explanation.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>list of items</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-definitionlist">DefinitionList</a> object</p>
</section>
<section id="div-content-attr">
<span id="pandoc-div"></span><h4><code class="docutils literal notranslate"><span class="pre">Div</span> <span class="pre">(content[,</span> <span class="pre">attr])</span></code><a class="headerlink" href="#div-content-attr" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a div element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>block content</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>element attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-div">Div</a> object</p>
</section>
<section id="header-level-content-attr">
<span id="pandoc-header"></span><h4><code class="docutils literal notranslate"><span class="pre">Header</span> <span class="pre">(level,</span> <span class="pre">content[,</span> <span class="pre">attr])</span></code><a class="headerlink" href="#header-level-content-attr" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a header element.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">level</span></code></dt><dd><p>header level</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>element attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-header">Header</a> object</p>
</section>
<section id="pandoc-horizontalrule">
<span id="id12"></span><h4><code class="docutils literal notranslate"><span class="pre">HorizontalRule</span> <span class="pre">()</span></code><a class="headerlink" href="#pandoc-horizontalrule" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a horizontal rule.</p>
<p>Returns: <a class="reference external" href="#type-horizontalrule">HorizontalRule</a> object</p>
</section>
<section id="lineblock-content">
<span id="pandoc-lineblock"></span><h4><code class="docutils literal notranslate"><span class="pre">LineBlock</span> <span class="pre">(content)</span></code><a class="headerlink" href="#lineblock-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a line block element.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-lineblock">LineBlock</a> object</p>
</section>
<section id="pandoc-null">
<span id="id13"></span><h4><code class="docutils literal notranslate"><span class="pre">Null</span> <span class="pre">()</span></code><a class="headerlink" href="#pandoc-null" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a null element.</p>
<p>Returns: <a class="reference external" href="#type-null">Null</a> object</p>
</section>
<section id="orderedlist-items-listattributes">
<span id="pandoc-orderedlist"></span><h4><code class="docutils literal notranslate"><span class="pre">OrderedList</span> <span class="pre">(items[,</span> <span class="pre">listAttributes])</span></code><a class="headerlink" href="#orderedlist-items-listattributes" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates an ordered list.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">items</span></code></dt><dd><p>list items</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">listAttributes</span></code></dt><dd><p>list parameters</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-orderedlist">OrderedList</a> object</p>
</section>
<section id="para-content">
<span id="pandoc-para"></span><h4><code class="docutils literal notranslate"><span class="pre">Para</span> <span class="pre">(content)</span></code><a class="headerlink" href="#para-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a para element.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-para">Para</a> object</p>
</section>
<section id="plain-content">
<span id="pandoc-plain"></span><h4><code class="docutils literal notranslate"><span class="pre">Plain</span> <span class="pre">(content)</span></code><a class="headerlink" href="#plain-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a plain element.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-plain">Plain</a> object</p>
</section>
<section id="rawblock-format-text">
<span id="pandoc-rawblock"></span><h4><code class="docutils literal notranslate"><span class="pre">RawBlock</span> <span class="pre">(format,</span> <span class="pre">text)</span></code><a class="headerlink" href="#rawblock-format-text" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a raw content block of the specified format.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code></dt><dd><p>format of content</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>string content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-rawblock">RawBlock</a> object</p>
</section>
<section id="table-caption-colspecs-head-bodies-foot-attr">
<span id="pandoc-table"></span><h4><code class="docutils literal notranslate"><span class="pre">Table</span> <span class="pre">(caption,</span> <span class="pre">colspecs,</span> <span class="pre">head,</span> <span class="pre">bodies,</span> <span class="pre">foot[,</span> <span class="pre">attr])</span></code><a class="headerlink" href="#table-caption-colspecs-head-bodies-foot-attr" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a table element.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">caption</span></code></dt><dd><p>table <a class="reference external" href="#type-caption">caption</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">colspecs</span></code></dt><dd><p>column alignments and widths (list of <a class="reference external" href="#type-colspec">ColSpec</a>s)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">head</span></code></dt><dd><p><a class="reference external" href="#type-tablehead">table head</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bodies</span></code></dt><dd><p><a class="reference external" href="#type-tablebody">table bodies</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">foot</span></code></dt><dd><p><a class="reference external" href="#type-tablefoot">table foot</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>element attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-table">Table</a> object</p>
</section>
</section>
<section id="id14">
<h3><a class="toc-backref" href="#id207" role="doc-backlink">Blocks</a><a class="headerlink" href="#id14" title="この見出しへのパーマリンク">¶</a></h3>
<section id="blocks-block-like-elements">
<span id="pandoc-blocks"></span><h4><code class="docutils literal notranslate"><span class="pre">Blocks</span> <span class="pre">(block_like_elements)</span></code><a class="headerlink" href="#blocks-block-like-elements" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a <a href="#id520"><span class="problematic" id="id521">`Blocks`_</span></a> list.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">block_like_elements</span></code></dt><dd><p>List where each element can be treated as a <a class="reference external" href="#type-block">Block</a> value, or a
single such value.</p>
</dd>
</dl>
<p>Returns: <a href="#id522"><span class="problematic" id="id523">`Blocks`_</span></a></p>
</section>
</section>
<section id="id15">
<h3><a class="toc-backref" href="#id208" role="doc-backlink">Inline</a><a class="headerlink" href="#id15" title="この見出しへのパーマリンク">¶</a></h3>
<section id="cite-content-citations">
<span id="pandoc-cite"></span><h4><code class="docutils literal notranslate"><span class="pre">Cite</span> <span class="pre">(content,</span> <span class="pre">citations)</span></code><a class="headerlink" href="#cite-content-citations" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a Cite inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>List of inlines</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">citations</span></code></dt><dd><p>List of citations</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-cite">Cite</a> object</p>
</section>
<section id="code-text-attr">
<span id="pandoc-code"></span><h4><code class="docutils literal notranslate"><span class="pre">Code</span> <span class="pre">(text[,</span> <span class="pre">attr])</span></code><a class="headerlink" href="#code-text-attr" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a Code inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>code string</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>additional attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-code">Code</a> object</p>
</section>
<section id="emph-content">
<span id="pandoc-emph"></span><h4><code class="docutils literal notranslate"><span class="pre">Emph</span> <span class="pre">(content)</span></code><a class="headerlink" href="#emph-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates an inline element representing emphasized text.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-emph">Emph</a> object</p>
</section>
<section id="image-caption-src-title-attr">
<span id="pandoc-image"></span><h4><code class="docutils literal notranslate"><span class="pre">Image</span> <span class="pre">(caption,</span> <span class="pre">src[,</span> <span class="pre">title[,</span> <span class="pre">attr]])</span></code><a class="headerlink" href="#image-caption-src-title-attr" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a Image inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">caption</span></code></dt><dd><p>text used to describe the image</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">src</span></code></dt><dd><p>path to the image file</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">title</span></code></dt><dd><p>brief image description</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>additional attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-image">Image</a> object</p>
</section>
<section id="pandoc-linebreak">
<span id="id16"></span><h4><code class="docutils literal notranslate"><span class="pre">LineBreak</span> <span class="pre">()</span></code><a class="headerlink" href="#pandoc-linebreak" title="この見出しへのパーマリンク">¶</a></h4>
<p>Create a LineBreak inline element</p>
<p>Returns: <a class="reference external" href="#type-linebreak">LineBreak</a> object</p>
</section>
<section id="link-content-target-title-attr">
<span id="pandoc-link"></span><h4><code class="docutils literal notranslate"><span class="pre">Link</span> <span class="pre">(content,</span> <span class="pre">target[,</span> <span class="pre">title[,</span> <span class="pre">attr]])</span></code><a class="headerlink" href="#link-content-target-title-attr" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a link inline element, usually a hyperlink.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>text for this link</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target</span></code></dt><dd><p>the link target</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">title</span></code></dt><dd><p>brief link description</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>additional attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-link">Link</a> object</p>
</section>
<section id="math-mathtype-text">
<span id="pandoc-math"></span><h4><code class="docutils literal notranslate"><span class="pre">Math</span> <span class="pre">(mathtype,</span> <span class="pre">text)</span></code><a class="headerlink" href="#math-mathtype-text" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a Math element, either inline or displayed.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">mathtype</span></code></dt><dd><p>rendering specifier</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>Math content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-math">Math</a> object</p>
</section>
<section id="displaymath-text">
<span id="pandoc-displaymath"></span><h4><code class="docutils literal notranslate"><span class="pre">DisplayMath</span> <span class="pre">(text)</span></code><a class="headerlink" href="#displaymath-text" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a math element of type “DisplayMath” (DEPRECATED).</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>Math content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-math">Math</a> object</p>
</section>
<section id="inlinemath-text">
<span id="pandoc-inlinemath"></span><h4><code class="docutils literal notranslate"><span class="pre">InlineMath</span> <span class="pre">(text)</span></code><a class="headerlink" href="#inlinemath-text" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a math element of type “InlineMath” (DEPRECATED).</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>Math content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-math">Math</a> object</p>
</section>
<section id="note-content">
<span id="pandoc-note"></span><h4><code class="docutils literal notranslate"><span class="pre">Note</span> <span class="pre">(content)</span></code><a class="headerlink" href="#note-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a Note inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>footnote block content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-note">Note</a> object</p>
</section>
<section id="quoted-quotetype-content">
<span id="pandoc-quoted"></span><h4><code class="docutils literal notranslate"><span class="pre">Quoted</span> <span class="pre">(quotetype,</span> <span class="pre">content)</span></code><a class="headerlink" href="#quoted-quotetype-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a Quoted inline element given the quote type and quoted content.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">quotetype</span></code></dt><dd><p>type of quotes to be used</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-quoted">Quoted</a> object</p>
</section>
<section id="singlequoted-content">
<span id="pandoc-singlequoted"></span><h4><code class="docutils literal notranslate"><span class="pre">SingleQuoted</span> <span class="pre">(content)</span></code><a class="headerlink" href="#singlequoted-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a single-quoted inline element (DEPRECATED).</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-quoted">Quoted</a></p>
</section>
<section id="doublequoted-content">
<span id="pandoc-doublequoted"></span><h4><code class="docutils literal notranslate"><span class="pre">DoubleQuoted</span> <span class="pre">(content)</span></code><a class="headerlink" href="#doublequoted-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a single-quoted inline element (DEPRECATED).</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-quoted">Quoted</a></p>
</section>
<section id="rawinline-format-text">
<span id="pandoc-rawinline"></span><h4><code class="docutils literal notranslate"><span class="pre">RawInline</span> <span class="pre">(format,</span> <span class="pre">text)</span></code><a class="headerlink" href="#rawinline-format-text" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a raw inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code></dt><dd><p>format of the contents</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>string content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-rawinline">RawInline</a> object</p>
</section>
<section id="smallcaps-content">
<span id="pandoc-smallcaps"></span><h4><code class="docutils literal notranslate"><span class="pre">SmallCaps</span> <span class="pre">(content)</span></code><a class="headerlink" href="#smallcaps-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates text rendered in small caps</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-smallcaps">SmallCaps</a> object</p>
</section>
<section id="pandoc-softbreak">
<span id="id17"></span><h4><code class="docutils literal notranslate"><span class="pre">SoftBreak</span> <span class="pre">()</span></code><a class="headerlink" href="#pandoc-softbreak" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a SoftBreak inline element.</p>
<p>Returns: <a class="reference external" href="#type-softbreak">SoftBreak</a> object</p>
</section>
<section id="pandoc-space">
<span id="id18"></span><h4><code class="docutils literal notranslate"><span class="pre">Space</span> <span class="pre">()</span></code><a class="headerlink" href="#pandoc-space" title="この見出しへのパーマリンク">¶</a></h4>
<p>Create a Space inline element</p>
<p>Returns: <a class="reference external" href="#type-space">Space</a> object</p>
</section>
<section id="span-content-attr">
<span id="pandoc-span"></span><h4><code class="docutils literal notranslate"><span class="pre">Span</span> <span class="pre">(content[,</span> <span class="pre">attr])</span></code><a class="headerlink" href="#span-content-attr" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a Span inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>additional attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-span">Span</a> object</p>
</section>
<section id="str-text">
<span id="pandoc-str"></span><h4><code class="docutils literal notranslate"><span class="pre">Str</span> <span class="pre">(text)</span></code><a class="headerlink" href="#str-text" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a Str inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-str">Str</a> object</p>
</section>
<section id="strikeout-content">
<span id="pandoc-strikeout"></span><h4><code class="docutils literal notranslate"><span class="pre">Strikeout</span> <span class="pre">(content)</span></code><a class="headerlink" href="#strikeout-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates text which is struck out.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-strikeout">Strikeout</a> object</p>
</section>
<section id="strong-content">
<span id="pandoc-strong"></span><h4><code class="docutils literal notranslate"><span class="pre">Strong</span> <span class="pre">(content)</span></code><a class="headerlink" href="#strong-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a Strong element, whose text is usually displayed in a bold
font.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-strong">Strong</a> object</p>
</section>
<section id="subscript-content">
<span id="pandoc-subscript"></span><h4><code class="docutils literal notranslate"><span class="pre">Subscript</span> <span class="pre">(content)</span></code><a class="headerlink" href="#subscript-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a Subscript inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-subscript">Subscript</a> object</p>
</section>
<section id="superscript-content">
<span id="pandoc-superscript"></span><h4><code class="docutils literal notranslate"><span class="pre">Superscript</span> <span class="pre">(content)</span></code><a class="headerlink" href="#superscript-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a Superscript inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-superscript">Superscript</a> object</p>
</section>
<section id="underline-content">
<span id="pandoc-underline"></span><h4><code class="docutils literal notranslate"><span class="pre">Underline</span> <span class="pre">(content)</span></code><a class="headerlink" href="#underline-content" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates an Underline inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-underline">Underline</a> object</p>
</section>
</section>
<section id="id19">
<h3><a class="toc-backref" href="#id209" role="doc-backlink">Inlines</a><a class="headerlink" href="#id19" title="この見出しへのパーマリンク">¶</a></h3>
<section id="inlines-inline-like-elements">
<span id="pandoc-inlines"></span><h4><code class="docutils literal notranslate"><span class="pre">Inlines</span> <span class="pre">(inline_like_elements)</span></code><a class="headerlink" href="#inlines-inline-like-elements" title="この見出しへのパーマリンク">¶</a></h4>
<p>Converts its argument into an <a href="#id524"><span class="problematic" id="id525">`Inlines`_</span></a> list:</p>
<ul class="simple">
<li><p>copies a list of <a class="reference external" href="#type-inline">Inline</a> elements into a fresh list; any string
<code class="docutils literal notranslate"><span class="pre">s</span></code> within the list is treated as <code class="docutils literal notranslate"><span class="pre">pandoc.Str(s)</span></code>;</p></li>
<li><p>turns a single <a class="reference external" href="#type-inline">Inline</a> into a singleton list;</p></li>
<li><p>splits a string into <code class="docutils literal notranslate"><span class="pre">Str</span></code>-wrapped words, treating interword spaces
as <code class="docutils literal notranslate"><span class="pre">Space</span></code>s or <code class="docutils literal notranslate"><span class="pre">SoftBreak</span></code>s.</p></li>
</ul>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">inline_like_elements</span></code></dt><dd><p>List where each element can be treated as an <a class="reference external" href="#type-inline">Inline</a> values, or
just a single such value.</p>
</dd>
</dl>
<p>Returns: <a href="#id526"><span class="problematic" id="id527">`Inlines`_</span></a> list</p>
</section>
</section>
<section id="element-components-1">
<span id="id20"></span><h3><a class="toc-backref" href="#id210" role="doc-backlink">Element components</a><a class="headerlink" href="#element-components-1" title="この見出しへのパーマリンク">¶</a></h3>
<section id="attr-identifier-classes-attributes">
<span id="pandoc-attr"></span><h4><code class="docutils literal notranslate"><span class="pre">Attr</span> <span class="pre">([identifier[,</span> <span class="pre">classes[,</span> <span class="pre">attributes]]])</span></code><a class="headerlink" href="#attr-identifier-classes-attributes" title="この見出しへのパーマリンク">¶</a></h4>
<p>Create a new set of attributes (Attr).</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code> (訳注: 識別子)</dt><dd><p>element identifier</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>element classes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>table containing string keys and values</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-attr">Attr</a> object</p>
</section>
<section id="cell-blocks-align-rowspan-colspan-attr">
<span id="pandoc-cell"></span><h4><code class="docutils literal notranslate"><span class="pre">Cell</span> <span class="pre">(blocks[,</span> <span class="pre">align[,</span> <span class="pre">rowspan[,</span> <span class="pre">colspan[,</span> <span class="pre">attr]]]])</span></code><a class="headerlink" href="#cell-blocks-align-rowspan-colspan-attr" title="この見出しへのパーマリンク">¶</a></h4>
<p>Create a new table cell.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">blocks</span></code></dt><dd><p>cell contents (<a href="#id528"><span class="problematic" id="id529">`Blocks`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">align</span></code></dt><dd><p>text alignment; defaults to <code class="docutils literal notranslate"><span class="pre">AlignDefault</span></code> (Alignment)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rowspan</span></code></dt><dd><p>number of rows occupied by the cell; defaults to <code class="docutils literal notranslate"><span class="pre">1</span></code> (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">colspan</span></code></dt><dd><p>number of columns spanned by the cell; defaults to <code class="docutils literal notranslate"><span class="pre">1</span></code> (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>cell attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p><a class="reference external" href="#type-cell">Cell</a> object</p></li>
</ul>
</section>
<section id="citation-id-mode-prefix-suffix-note-num-hash">
<span id="pandoc-citation"></span><h4><code class="docutils literal notranslate"><span class="pre">Citation</span> <span class="pre">(id,</span> <span class="pre">mode[,</span> <span class="pre">prefix[,</span> <span class="pre">suffix[,</span> <span class="pre">note_num[,</span> <span class="pre">hash]]]])</span></code><a class="headerlink" href="#citation-id-mode-prefix-suffix-note-num-hash" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a single citation.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code></dt><dd><p>citation identifier (like a bibtex key)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code></dt><dd><p>citation mode</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">prefix</span></code></dt><dd><p>citation prefix</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">suffix</span></code></dt><dd><p>citation suffix</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">note_num</span></code></dt><dd><p>note number</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hash</span></code></dt><dd><p>hash number</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-citation">Citation</a> object</p>
</section>
<section id="listattributes-start-style-delimiter">
<span id="pandoc-listattributes"></span><h4><code class="docutils literal notranslate"><span class="pre">ListAttributes</span> <span class="pre">([start[,</span> <span class="pre">style[,</span> <span class="pre">delimiter]]])</span></code><a class="headerlink" href="#listattributes-start-style-delimiter" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a set of list attributes.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">start</span></code></dt><dd><p>number of the first list item</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">style</span></code></dt><dd><p>style used for list numbering</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">delimiter</span></code></dt><dd><p>delimiter of list numbers</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-listattributes">ListAttributes</a> object</p>
</section>
<section id="row-cells-attr">
<span id="pandoc-row"></span><h4><code class="docutils literal notranslate"><span class="pre">Row</span> <span class="pre">([cells[,</span> <span class="pre">attr]])</span></code><a class="headerlink" href="#row-cells-attr" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a table row.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cells</span></code></dt><dd><p>list of table cells in this row</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>row attributes</p>
</dd>
</dl>
</section>
<section id="tablefoot-rows-attr">
<span id="pandoc-tablefoot"></span><h4><code class="docutils literal notranslate"><span class="pre">TableFoot</span> <span class="pre">([rows[,</span> <span class="pre">attr]])</span></code><a class="headerlink" href="#tablefoot-rows-attr" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a table foot.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">rows</span></code></dt><dd><p>list of table rows</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>table foot attributes</p>
</dd>
</dl>
</section>
<section id="tablehead-rows-attr">
<span id="pandoc-tablehead"></span><h4><code class="docutils literal notranslate"><span class="pre">TableHead</span> <span class="pre">([rows[,</span> <span class="pre">attr]])</span></code><a class="headerlink" href="#tablehead-rows-attr" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a table head.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">rows</span></code></dt><dd><p>list of table rows</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>table head attributes</p>
</dd>
</dl>
</section>
</section>
<section id="legacy-types">
<h3><a class="toc-backref" href="#id211" role="doc-backlink">Legacy types</a><a class="headerlink" href="#legacy-types" title="この見出しへのパーマリンク">¶</a></h3>
<section id="simpletable-caption-aligns-widths-headers-rows">
<span id="pandoc-simpletable"></span><h4><code class="docutils literal notranslate"><span class="pre">SimpleTable</span> <span class="pre">(caption,</span> <span class="pre">aligns,</span> <span class="pre">widths,</span> <span class="pre">headers,</span> <span class="pre">rows)</span></code><a class="headerlink" href="#simpletable-caption-aligns-widths-headers-rows" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a simple table resembling the old (pre pandoc 2.10) table type.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">caption</span></code></dt><dd><p><a href="#id530"><span class="problematic" id="id531">`Inlines`_</span></a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aligns</span></code></dt><dd><p>column alignments (<a href="#id532"><span class="problematic" id="id533">`List`_</span></a> of <a class="reference external" href="#type-alignment">Alignments</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">widths</span></code></dt><dd><p>column widths; a (<a href="#id534"><span class="problematic" id="id535">`List`_</span></a> of numbers)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">headers</span></code></dt><dd><p>table header row (<a href="#id536"><span class="problematic" id="id537">`List`_</span></a> of <a href="#id538"><span class="problematic" id="id539">`Blocks`_</span></a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rows</span></code></dt><dd><p>table rows (<a href="#id540"><span class="problematic" id="id541">`List`_</span></a> of rows, where a row is a list of <a href="#id542"><span class="problematic" id="id543">`Blocks`_</span></a>)</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-simpletable">SimpleTable</a> object</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">caption</span> <span class="o">=</span> <span class="s2">&quot;Overview&quot;</span>
<span class="n">local</span> <span class="n">aligns</span> <span class="o">=</span> <span class="p">{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">AlignDefault</span><span class="p">,</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">AlignDefault</span><span class="p">}</span>
<span class="n">local</span> <span class="n">widths</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span> <span class="o">--</span> <span class="n">let</span> <span class="n">pandoc</span> <span class="n">determine</span> <span class="n">col</span> <span class="n">widths</span>
<span class="n">local</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">{{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Plain</span><span class="p">({</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s2">&quot;Language&quot;</span><span class="p">})},</span>
                 <span class="p">{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Plain</span><span class="p">({</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s2">&quot;Typing&quot;</span><span class="p">})}}</span>
<span class="n">local</span> <span class="n">rows</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">{{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Plain</span> <span class="s2">&quot;Haskell&quot;</span><span class="p">},</span> <span class="p">{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Plain</span> <span class="s2">&quot;static&quot;</span><span class="p">}},</span>
  <span class="p">{{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Plain</span> <span class="s2">&quot;Lua&quot;</span><span class="p">},</span> <span class="p">{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Plain</span> <span class="s2">&quot;Dynamic&quot;</span><span class="p">}},</span>
<span class="p">}</span>
<span class="n">simple_table</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">SimpleTable</span><span class="p">(</span>
  <span class="n">caption</span><span class="p">,</span>
  <span class="n">aligns</span><span class="p">,</span>
  <span class="n">widths</span><span class="p">,</span>
  <span class="n">headers</span><span class="p">,</span>
  <span class="n">rows</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="constants">
<h3><a class="toc-backref" href="#id212" role="doc-backlink">Constants</a><a class="headerlink" href="#constants" title="この見出しへのパーマリンク">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">AuthorInText</span></code></dt><dd><p>Author name is mentioned in the text.</p>
<p>See also: <a class="reference external" href="#type-citation">Citation</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SuppressAuthor</span></code></dt><dd><p>Author name is suppressed.</p>
<p>See also: <a class="reference external" href="#type-citation">Citation</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">NormalCitation</span></code></dt><dd><p>Default citation style is used.</p>
<p>See also: <a class="reference external" href="#type-citation">Citation</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">AlignLeft</span></code></dt><dd><p>Table cells aligned left.</p>
<p>See also: <a class="reference external" href="#type-alignment">Table</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">AlignRight</span></code></dt><dd><p>Table cells right-aligned.</p>
<p>See also: <a class="reference external" href="#type-alignment">Table</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">AlignCenter</span></code></dt><dd><p>Table cell content is centered.</p>
<p>See also: <a class="reference external" href="#type-alignment">Table</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">AlignDefault</span></code></dt><dd><p>Table cells are alignment is unaltered.</p>
<p>See also: <a class="reference external" href="#type-alignment">Table</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">DefaultDelim</span></code></dt><dd><p>Default list number delimiters are used.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Period</span></code></dt><dd><p>List numbers are delimited by a period.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">OneParen</span></code></dt><dd><p>List numbers are delimited by a single parenthesis.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">TwoParens</span></code></dt><dd><p>List numbers are delimited by a double parentheses.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">DefaultStyle</span></code></dt><dd><p>List are numbered in the default style</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Example</span></code></dt><dd><p>List items are numbered as examples.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Decimal</span></code></dt><dd><p>List are numbered using decimal integers.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LowerRoman</span></code></dt><dd><p>List are numbered using lower-case roman numerals.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">UpperRoman</span></code></dt><dd><p>List are numbered using upper-case roman numerals</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LowerAlpha</span></code></dt><dd><p>List are numbered using lower-case alphabetic characters.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">UpperAlpha</span></code></dt><dd><p>List are numbered using upper-case alphabetic characters.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sha1</span></code></dt><dd><p>Alias for <a href="#id544"><span class="problematic" id="id545">|pandoc.utils.sha1|_</span></a> (DEPRECATED, use
<code class="docutils literal notranslate"><span class="pre">pandoc.utils.sha1</span></code> instead).</p>
</dd>
</dl>
</section>
<section id="other-constructors">
<h3><a class="toc-backref" href="#id213" role="doc-backlink">Other constructors</a><a class="headerlink" href="#other-constructors" title="この見出しへのパーマリンク">¶</a></h3>
<section id="readeroptions-opts">
<span id="pandoc-readeroptions"></span><h4><code class="docutils literal notranslate"><span class="pre">ReaderOptions</span> <span class="pre">(opts)</span></code><a class="headerlink" href="#readeroptions-opts" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a new <a class="reference external" href="#type-readeroptions">ReaderOptions</a> value.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">opts</span></code></dt><dd><p>Either a table with a subset of the properties of a <a class="reference external" href="#type-readeroptions">ReaderOptions</a>
object, or another ReaderOptions object. Uses the defaults specified
in the manual for all properties that are not explicitly specified.
Throws an error if a table contains properties which are not present
in a ReaderOptions object. (<a class="reference external" href="#type-readeroptions">ReaderOptions</a>|table)</p>
</dd>
</dl>
<p>Returns: new <a class="reference external" href="#type-readeroptions">ReaderOptions</a> object</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">copy</span> <span class="n">of</span> <span class="n">the</span> <span class="n">reader</span> <span class="n">options</span> <span class="n">that</span> <span class="n">were</span> <span class="n">defined</span> <span class="n">on</span> <span class="n">the</span> <span class="n">command</span> <span class="n">line</span><span class="o">.</span>
<span class="n">local</span> <span class="n">cli_opts</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">ReaderOptions</span><span class="p">(</span><span class="n">PANDOC_READER_OPTIONS</span><span class="p">)</span>

<span class="o">--</span> <span class="n">default</span> <span class="n">reader</span> <span class="n">options</span><span class="p">,</span> <span class="n">but</span> <span class="n">columns</span> <span class="nb">set</span> <span class="n">to</span> <span class="mf">66.</span>
<span class="n">local</span> <span class="n">short_colums_opts</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">ReaderOptions</span> <span class="p">{</span><span class="n">columns</span> <span class="o">=</span> <span class="mi">66</span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="writeroptions-opts">
<span id="pandoc-writeroptions"></span><h4><code class="docutils literal notranslate"><span class="pre">WriterOptions</span> <span class="pre">(opts)</span></code><a class="headerlink" href="#writeroptions-opts" title="この見出しへのパーマリンク">¶</a></h4>
<p>Creates a new <a class="reference external" href="#type-writeroptions">WriterOptions</a> value.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">opts</span></code></dt><dd><p>Either a table with a subset of the properties of a <a class="reference external" href="#type-writeroptions">WriterOptions</a>
object, or another WriterOptions object. Uses the defaults specified
in the manual for all properties that are not explicitly specified.
Throws an error if a table contains properties which are not present
in a WriterOptions object. (<a class="reference external" href="#type-writeroptions">WriterOptions</a>|table)</p>
</dd>
</dl>
<p>Returns: new <a class="reference external" href="#type-writeroptions">WriterOptions</a> object</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">copy</span> <span class="n">of</span> <span class="n">the</span> <span class="n">writer</span> <span class="n">options</span> <span class="n">that</span> <span class="n">were</span> <span class="n">defined</span> <span class="n">on</span> <span class="n">the</span> <span class="n">command</span> <span class="n">line</span><span class="o">.</span>
<span class="n">local</span> <span class="n">cli_opts</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">WriterOptions</span><span class="p">(</span><span class="n">PANDOC_WRITER_OPTIONS</span><span class="p">)</span>

<span class="o">--</span> <span class="n">default</span> <span class="n">writer</span> <span class="n">options</span><span class="p">,</span> <span class="n">but</span> <span class="n">DPI</span> <span class="nb">set</span> <span class="n">to</span> <span class="mf">300.</span>
<span class="n">local</span> <span class="n">short_colums_opts</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">WriterOptions</span> <span class="p">{</span><span class="n">dpi</span> <span class="o">=</span> <span class="mi">300</span><span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="helper-functions">
<h3><a class="toc-backref" href="#id214" role="doc-backlink">Helper functions</a><a class="headerlink" href="#helper-functions" title="この見出しへのパーマリンク">¶</a></h3>
<section id="pipe-command-args-input">
<span id="pandoc-pipe"></span><h4><code class="docutils literal notranslate"><span class="pre">pipe</span> <span class="pre">(command,</span> <span class="pre">args,</span> <span class="pre">input)</span></code><a class="headerlink" href="#pipe-command-args-input" title="この見出しへのパーマリンク">¶</a></h4>
<p>Runs command with arguments, passing it some input, and returns the
output.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">command</span></code></dt><dd><p>program to run; the executable will be resolved using default system
methods (string).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">args</span></code></dt><dd><p>list of arguments to pass to the program (list of strings).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">input</span></code></dt><dd><p>data which is piped into the program via stdin (string).</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>Output of command, i.e. data printed to stdout (string)</p></li>
</ul>
<p>Raises:</p>
<ul class="simple">
<li><p>A table containing the keys <code class="docutils literal notranslate"><span class="pre">command</span></code>, <code class="docutils literal notranslate"><span class="pre">error_code</span></code>, and
<code class="docutils literal notranslate"><span class="pre">output</span></code> is thrown if the command exits with a non-zero error code.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">output</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="s2">&quot;sed&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;-e&quot;</span><span class="p">,</span><span class="s2">&quot;s/a/b/&quot;</span><span class="p">},</span> <span class="s2">&quot;abc&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="walk-block-element-filter">
<span id="pandoc-walk-block"></span><h4><code class="docutils literal notranslate"><span class="pre">walk_block</span> <span class="pre">(element,</span> <span class="pre">filter)</span></code><a class="headerlink" href="#walk-block-element-filter" title="この見出しへのパーマリンク">¶</a></h4>
<p>Apply a filter inside a block element, walking its contents.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">element</span></code></dt><dd><p>the block element</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filter</span></code></dt><dd><p>a Lua filter (table of functions) to be applied within the block
element</p>
</dd>
</dl>
<p>Returns: the transformed block element</p>
</section>
<section id="walk-inline-element-filter">
<span id="pandoc-walk-inline"></span><h4><code class="docutils literal notranslate"><span class="pre">walk_inline</span> <span class="pre">(element,</span> <span class="pre">filter)</span></code><a class="headerlink" href="#walk-inline-element-filter" title="この見出しへのパーマリンク">¶</a></h4>
<p>Apply a filter inside an inline element, walking its contents.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">element</span></code></dt><dd><p>the inline element</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filter</span></code></dt><dd><p>a Lua filter (table of functions) to be applied within the inline
element</p>
</dd>
</dl>
<p>Returns: the transformed inline element</p>
</section>
<section id="read-markup-format-reader-options">
<span id="pandoc-read"></span><h4><code class="docutils literal notranslate"><span class="pre">read</span> <span class="pre">(markup[,</span> <span class="pre">format[,</span> <span class="pre">reader_options]])</span></code><a class="headerlink" href="#read-markup-format-reader-options" title="この見出しへのパーマリンク">¶</a></h4>
<p>Parse the given string into a Pandoc document.</p>
<p>The parser is run in the same environment that was used to read the main
input files; it has full access to the file-system and the mediabag.
This means that if the document specifies files to be included, as is
possible in formats like LaTeX, reStructuredText, and Org, then these
will be included in the resulting document. Any media elements are added
to those retrieved from the other parsed input files.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">markup</span></code></dt><dd><p>the markup to be parsed (string|Sources)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code></dt><dd><p>format specification, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;markdown&quot;</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reader_options</span></code></dt><dd><p>options passed to the reader; may be a ReaderOptions object or a
table with a subset of the keys and values of a ReaderOptions object;
defaults to the default values documented in the manual.
(<a class="reference external" href="#type-readeroptions">ReaderOptions</a>|table)</p>
</dd>
</dl>
<p>Returns: pandoc document (<a class="reference external" href="#type-pandoc">Pandoc</a>)</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>local org_markup = &quot;/emphasis/&quot;  -- Input to be read
local document = pandoc.read(org_markup, &quot;org&quot;)
-- Get the first block of the document
local block = document.blocks[1]
-- The inline element in that block is an `Emph`
assert(block.content[1].t == &quot;Emph&quot;)
</pre></div>
</div>
</section>
<section id="write-doc-format-writer-options">
<span id="pandoc-write"></span><h4><code class="docutils literal notranslate"><span class="pre">write</span> <span class="pre">(doc[,</span> <span class="pre">format[,</span> <span class="pre">writer_options]])</span></code><a class="headerlink" href="#write-doc-format-writer-options" title="この見出しへのパーマリンク">¶</a></h4>
<p>Converts a document to the given target format.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document to convert (<a class="reference external" href="#type-pandoc">Pandoc</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code></dt><dd><p>format specification, defaults to <code class="docutils literal notranslate"><span class="pre">'html'</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">writer_options</span></code></dt><dd><p>options passed to the writer; may be a WriterOptions object or a
table with a subset of the keys and values of a WriterOptions object;
defaults to the default values documented in the manual.
(<a class="reference external" href="#type-writeroptions">WriterOptions</a>|table)</p>
</dd>
</dl>
<p>Returns: - converted document (string)</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">doc</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Pandoc</span><span class="p">(</span>
  <span class="p">{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Para</span> <span class="p">{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Strong</span> <span class="s1">&#39;Tea&#39;</span><span class="p">}}</span>
<span class="p">)</span>
<span class="n">local</span> <span class="n">html</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">)</span>
<span class="k">assert</span><span class="p">(</span><span class="n">html</span> <span class="o">==</span> <span class="s2">&quot;&lt;p&gt;&lt;strong&gt;Tea&lt;/strong&gt;&lt;/p&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="module-pandoc-utils">
<h2><a class="toc-backref" href="#id215" role="doc-backlink">Module pandoc.utils</a><a class="headerlink" href="#module-pandoc-utils" title="この見出しへのパーマリンク">¶</a></h2>
<p>This module exposes internal pandoc functions and utility functions.</p>
<p>The module is loaded as part of the <code class="docutils literal notranslate"><span class="pre">pandoc</span></code> module and available as
<code class="docutils literal notranslate"><span class="pre">pandoc.utils</span></code>. In versions up-to and including pandoc 2.6, this
module had to be loaded explicitly. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span> <span class="o">=</span> <span class="n">require</span> <span class="s1">&#39;pandoc.utils&#39;</span>
</pre></div>
</div>
<p>Use the above for backwards compatibility.</p>
<section id="blocks-to-inlines-blocks-sep">
<span id="pandoc-utils-blocks-to-inlines"></span><h3><a class="toc-backref" href="#id216" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">blocks_to_inlines</span> <span class="pre">(blocks[,</span> <span class="pre">sep])</span></code></a><a class="headerlink" href="#blocks-to-inlines-blocks-sep" title="この見出しへのパーマリンク">¶</a></h3>
<p>Squash a list of blocks into a list of inlines.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">blocks</span></code></dt><dd><p>List of <a class="reference external" href="#type-block">Block</a> elements to be flattened.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sep</span></code></dt><dd><p>List of <a class="reference external" href="#type-inline">Inline</a> elements inserted as separator between two
consecutive blocks; defaults to
<code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">pandoc.Space(),</span> <span class="pre">pandoc.Str'¶',</span> <span class="pre">pandoc.Space()}</span></code>.</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p><a href="#id546"><span class="problematic" id="id547">`Inlines`_</span></a></p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">blocks</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">pandoc</span><span class="o">.</span><span class="n">Para</span><span class="p">{</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;Paragraph1&#39;</span> <span class="p">},</span>
  <span class="n">pandoc</span><span class="o">.</span><span class="n">Para</span><span class="p">{</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Emph</span> <span class="s1">&#39;Paragraph2&#39;</span> <span class="p">}</span>
<span class="p">}</span>
<span class="n">local</span> <span class="n">inlines</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">blocks_to_inlines</span><span class="p">(</span><span class="n">blocks</span><span class="p">)</span>
<span class="o">--</span> <span class="n">inlines</span> <span class="o">=</span> <span class="p">{</span>
<span class="o">--</span>   <span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;Paragraph1&#39;</span><span class="p">,</span>
<span class="o">--</span>   <span class="n">pandoc</span><span class="o">.</span><span class="n">Space</span><span class="p">(),</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span><span class="s1">&#39;¶&#39;</span><span class="p">,</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Space</span><span class="p">(),</span>
<span class="o">--</span>   <span class="n">pandoc</span><span class="o">.</span><span class="n">Emph</span><span class="p">{</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;Paragraph2&#39;</span> <span class="p">}</span>
<span class="o">--</span> <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="equals-element1-element2">
<span id="pandoc-utils-equals"></span><h3><a class="toc-backref" href="#id217" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">equals</span> <span class="pre">(element1,</span> <span class="pre">element2)</span></code></a><a class="headerlink" href="#equals-element1-element2" title="この見出しへのパーマリンク">¶</a></h3>
<p>Test equality of AST elements. Elements in Lua are considered equal if
and only if the objects obtained by unmarshaling are equal.</p>
<p><strong>This function is deprecated.</strong> Use the normal Lua <code class="docutils literal notranslate"><span class="pre">==</span></code> equality
operator instead.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">element1</span></code>, <code class="docutils literal notranslate"><span class="pre">element2</span></code></dt><dd><p>Objects to be compared (any type)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>Whether the two objects represent the same element (boolean)</p></li>
</ul>
</section>
<section id="from-simple-table-table">
<span id="pandoc-utils-from-simple-table"></span><h3><a class="toc-backref" href="#id218" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">from_simple_table</span> <span class="pre">(table)</span></code></a><a class="headerlink" href="#from-simple-table-table" title="この見出しへのパーマリンク">¶</a></h3>
<p>Creates a <a class="reference external" href="#type-table">Table</a> block element from a <a class="reference external" href="#type-simpletable">SimpleTable</a>. This is useful
for dealing with legacy code which was written for pandoc versions older
than 2.10.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>table block element (<a class="reference external" href="#type-table">Table</a>)</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">simple</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">SimpleTable</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="o">--</span> <span class="n">modify</span><span class="p">,</span> <span class="n">using</span> <span class="n">pre</span> <span class="n">pandoc</span> <span class="mf">2.10</span> <span class="n">methods</span>
<span class="n">simple</span><span class="o">.</span><span class="n">caption</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">SmallCaps</span><span class="p">(</span><span class="n">simple</span><span class="o">.</span><span class="n">caption</span><span class="p">)</span>
<span class="o">--</span> <span class="n">create</span> <span class="n">normal</span> <span class="n">table</span> <span class="n">block</span> <span class="n">again</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">from_simple_table</span><span class="p">(</span><span class="n">simple</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="make-sections-number-sections-base-level-blocks">
<span id="pandoc-utils-make-sections"></span><h3><a class="toc-backref" href="#id219" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">make_sections</span> <span class="pre">(number_sections,</span> <span class="pre">base_level,</span> <span class="pre">blocks)</span></code></a><a class="headerlink" href="#make-sections-number-sections-base-level-blocks" title="この見出しへのパーマリンク">¶</a></h3>
<p>Converts list of <a class="reference external" href="#type-block">Block</a> elements into sections. <code class="docutils literal notranslate"><span class="pre">Div</span></code>s will be
created beginning at each <code class="docutils literal notranslate"><span class="pre">Header</span></code> and containing following content
until the next <code class="docutils literal notranslate"><span class="pre">Header</span></code> of comparable level. If <code class="docutils literal notranslate"><span class="pre">number_sections</span></code> is
true, a <code class="docutils literal notranslate"><span class="pre">number</span></code> attribute will be added to each <code class="docutils literal notranslate"><span class="pre">Header</span></code> containing
the section number. If <code class="docutils literal notranslate"><span class="pre">base_level</span></code> is non-null, <code class="docutils literal notranslate"><span class="pre">Header</span></code> levels
will be reorganized so that there are no gaps, and so that the base
level is the level specified.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">number_sections</span></code></dt><dd><p>whether section divs should get an additional <code class="docutils literal notranslate"><span class="pre">number</span></code> attribute
containing the section number. (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">base_level</span></code></dt><dd><p>shift top-level headings to this level. (integer|nil)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">blocks</span></code></dt><dd><p>list of blocks to process (<a href="#id548"><span class="problematic" id="id549">`Blocks`_</span></a>)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p><a href="#id550"><span class="problematic" id="id551">`Blocks`_</span></a>.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">blocks</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">pandoc</span><span class="o">.</span><span class="n">Header</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;first&#39;</span><span class="p">),</span>
  <span class="n">pandoc</span><span class="o">.</span><span class="n">Header</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;second&#39;</span><span class="p">),</span>
<span class="p">}</span>
<span class="n">local</span> <span class="n">newblocks</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">make_sections</span><span class="p">(</span><span class="n">true</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">blocks</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="references">
<span id="pandoc-references"></span><h3><a class="toc-backref" href="#id220" role="doc-backlink">references</a><a class="headerlink" href="#references" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">references</span> <span class="pre">(doc)</span></code></p>
<p>Get references defined inline in the metadata and via an external
bibliography. Only references that are actually cited in the document
(either with a genuine citation or with <code class="docutils literal notranslate"><span class="pre">nocite</span></code>) are returned. URL
variables are converted to links.</p>
<p>The structure used represent reference values corresponds to that used
in CSL JSON; the return value can be use as <code class="docutils literal notranslate"><span class="pre">references</span></code> metadata,
which is one of the values used by pandoc and citeproc when generating
bibliographies.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-pandoc">Pandoc</a>)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>list of references. (table)</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Include</span> <span class="nb">all</span> <span class="n">cited</span> <span class="n">references</span> <span class="ow">in</span> <span class="n">document</span>
<span class="n">function</span> <span class="n">Pandoc</span> <span class="p">(</span><span class="n">doc</span><span class="p">)</span>
  <span class="n">doc</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">references</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">references</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
  <span class="n">doc</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">bibliography</span> <span class="o">=</span> <span class="n">nil</span>
  <span class="k">return</span> <span class="n">doc</span>
<span class="n">end</span>
</pre></div>
</div>
</section>
<section id="run-json-filter">
<span id="pandoc-utils-run-json-filter"></span><h3><a class="toc-backref" href="#id221" role="doc-backlink">run_json_filter</a><a class="headerlink" href="#run-json-filter" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">run_json_filter</span> <span class="pre">(doc,</span> <span class="pre">filter[,</span> <span class="pre">args])</span></code></p>
<p>Filter the given doc by passing it through the a JSON filter.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>the Pandoc document to filter</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filter</span></code></dt><dd><p>filter to run</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">args</span></code></dt><dd><p>list of arguments passed to the filter. Defaults to <code class="docutils literal notranslate"><span class="pre">{FORMAT}</span></code>.</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>(<a class="reference external" href="#type-pandoc">Pandoc</a>) Filtered document</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-- Assumes `some_blocks` contains blocks for which a
-- separate literature section is required.
local sub_doc = pandoc.Pandoc(some_blocks, metadata)
sub_doc_with_bib = pandoc.utils.run_json_filter(
  sub_doc,
  &#39;pandoc-citeproc&#39;
)
some_blocks = sub_doc.blocks -- some blocks with bib
</pre></div>
</div>
</section>
<section id="normalize-date">
<span id="pandoc-utils-normalize-date"></span><h3><a class="toc-backref" href="#id222" role="doc-backlink">normalize_date</a><a class="headerlink" href="#normalize-date" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">normalize_date</span> <span class="pre">(date_string)</span></code></p>
<p>Parse a date and convert (if possible) to “YYYY-MM-DD” format. We limit
years to the range 1601-9999 (ISO 8601 accepts greater than or equal to
1583, but MS Word only accepts dates starting 1601).</p>
<p>Returns:</p>
<ul class="simple">
<li><p>A date string, or nil when the conversion failed.</p></li>
</ul>
</section>
<section id="sha1">
<span id="pandoc-utils-sha1"></span><h3><a class="toc-backref" href="#id223" role="doc-backlink">sha1</a><a class="headerlink" href="#sha1" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">sha1</span> <span class="pre">(contents)</span></code></p>
<p>Returns the SHA1 has of the contents.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>SHA1 hash of the contents.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">fp</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">sha1</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="stringify">
<span id="pandoc-utils-stringify"></span><h3><a class="toc-backref" href="#id224" role="doc-backlink">stringify</a><a class="headerlink" href="#stringify" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">stringify</span> <span class="pre">(element)</span></code></p>
<p>Converts the given element (Pandoc, Meta, Block, or Inline) into a
string with all formatting removed.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>A plain string representation of the given element.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">inline</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Emph</span><span class="p">{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;Moin&#39;</span><span class="p">}</span>
<span class="o">--</span> <span class="n">outputs</span> <span class="s2">&quot;Moin&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">inline</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="to-roman-numeral">
<span id="pandoc-utils-to-roman-numeral"></span><h3><a class="toc-backref" href="#id225" role="doc-backlink">to_roman_numeral</a><a class="headerlink" href="#to-roman-numeral" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">to_roman_numeral</span> <span class="pre">(integer)</span></code></p>
<p>Converts an integer &lt; 4000 to uppercase roman numeral.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>A roman numeral string.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">to_roman_numeral</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">to_roman_numeral</span>
<span class="n">local</span> <span class="n">pandoc_birth_year</span> <span class="o">=</span> <span class="n">to_roman_numeral</span><span class="p">(</span><span class="mi">2006</span><span class="p">)</span>
<span class="o">--</span> <span class="n">pandoc_birth_year</span> <span class="o">==</span> <span class="s1">&#39;MMVI&#39;</span>
</pre></div>
</div>
</section>
<section id="to-simple-table">
<span id="pandoc-utils-to-simple-table"></span><h3><a class="toc-backref" href="#id226" role="doc-backlink">to_simple_table</a><a class="headerlink" href="#to-simple-table" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">to_simple_table</span> <span class="pre">(table)</span></code></p>
<p>Creates a <a class="reference external" href="#type-simpletable">SimpleTable</a> out of a <a class="reference external" href="#type-table">Table</a> block.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>a simple table object (<a class="reference external" href="#type-simpletable">SimpleTable</a>)</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">simple</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">to_simple_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="o">--</span> <span class="n">modify</span><span class="p">,</span> <span class="n">using</span> <span class="n">pre</span> <span class="n">pandoc</span> <span class="mf">2.10</span> <span class="n">methods</span>
<span class="n">simple</span><span class="o">.</span><span class="n">caption</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">SmallCaps</span><span class="p">(</span><span class="n">simple</span><span class="o">.</span><span class="n">caption</span><span class="p">)</span>
<span class="o">--</span> <span class="n">create</span> <span class="n">normal</span> <span class="n">table</span> <span class="n">block</span> <span class="n">again</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">from_simple_table</span><span class="p">(</span><span class="n">simple</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="type">
<span id="pandoc-utils-type"></span><h3><a class="toc-backref" href="#id227" role="doc-backlink">type</a><a class="headerlink" href="#type" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">(value)</span></code></p>
<p>Pandoc-friendly version of Lua’s default <code class="docutils literal notranslate"><span class="pre">type</span></code> function, returning
the type of a value. This function works with all types listed in
section <a class="reference external" href="#lua-type-reference">Lua type reference</a>, except if noted otherwise.</p>
<p>The function works by checking the metafield <code class="docutils literal notranslate"><span class="pre">__name</span></code>. If the argument
has a string-valued metafield <code class="docutils literal notranslate"><span class="pre">__name</span></code>, then it returns that string.
Otherwise it behaves just like the normal <code class="docutils literal notranslate"><span class="pre">type</span></code> function.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">value</span></code></dt><dd><p>any Lua value</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>type of the given value (string)</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Prints</span> <span class="n">one</span> <span class="n">of</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;Inlines&#39;</span><span class="p">,</span> <span class="s1">&#39;Blocks&#39;</span><span class="p">,</span>
<span class="o">--</span> <span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="ow">and</span> <span class="s1">&#39;nil&#39;</span><span class="p">,</span> <span class="n">corresponding</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Haskell</span> <span class="n">constructors</span>
<span class="o">--</span> <span class="n">MetaString</span><span class="p">,</span> <span class="n">MetaBool</span><span class="p">,</span> <span class="n">MetaInlines</span><span class="p">,</span> <span class="n">MetaBlocks</span><span class="p">,</span> <span class="n">MetaMap</span><span class="p">,</span>
<span class="o">--</span> <span class="ow">and</span> <span class="n">an</span> <span class="n">unset</span> <span class="n">value</span><span class="p">,</span> <span class="n">respectively</span><span class="o">.</span>
<span class="n">function</span> <span class="n">Meta</span> <span class="p">(</span><span class="n">meta</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;type of metavalue `author`:&#39;</span><span class="p">,</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">type</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">author</span><span class="p">))</span>
<span class="n">end</span>
</pre></div>
</div>
</section>
</section>
<section id="module-pandoc-mediabag">
<h2><a class="toc-backref" href="#id228" role="doc-backlink">Module pandoc.mediabag</a><a class="headerlink" href="#module-pandoc-mediabag" title="この見出しへのパーマリンク">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">pandoc.mediabag</span></code> module allows accessing pandoc’s media storage.
The “media bag” is used when pandoc is called with the
<code class="docutils literal notranslate"><span class="pre">--extract-media</span></code> or (for HTML only) <code class="docutils literal notranslate"><span class="pre">--self-contained</span></code> option.</p>
<p>The module is loaded as part of module <code class="docutils literal notranslate"><span class="pre">pandoc</span></code> and can either be
accessed via the <code class="docutils literal notranslate"><span class="pre">pandoc.mediabag</span></code> field, or explicitly required,
e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">mb</span> <span class="o">=</span> <span class="n">require</span> <span class="s1">&#39;pandoc.mediabag&#39;</span>
</pre></div>
</div>
<section id="delete">
<span id="pandoc-mediabag-delete"></span><h3><a class="toc-backref" href="#id229" role="doc-backlink">delete</a><a class="headerlink" href="#delete" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">(filepath)</span></code></p>
<p>Removes a single entry from the media bag.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepath</span></code></dt><dd><p>filename of the item to be deleted. The media bag will be left
unchanged if no entry with the given filename exists.</p>
</dd>
</dl>
</section>
<section id="empty">
<span id="pandoc-mediabag-empty"></span><h3><a class="toc-backref" href="#id230" role="doc-backlink">empty</a><a class="headerlink" href="#empty" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">empty</span> <span class="pre">()</span></code></p>
<p>Clear-out the media bag, deleting all items.</p>
</section>
<section id="insert">
<span id="pandoc-mediabag-insert"></span><h3><a class="toc-backref" href="#id231" role="doc-backlink">insert</a><a class="headerlink" href="#insert" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">insert</span> <span class="pre">(filepath,</span> <span class="pre">mime_type,</span> <span class="pre">contents)</span></code></p>
<p>Adds a new entry to pandoc’s media bag. Replaces any existing mediabag
entry with the same <code class="docutils literal notranslate"><span class="pre">filepath</span></code>.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepath</span></code></dt><dd><p>filename and path relative to the output folder.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mime_type</span></code></dt><dd><p>the file’s MIME type; use <code class="docutils literal notranslate"><span class="pre">nil</span></code> if unknown or unavailable.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">contents</span></code></dt><dd><p>the binary contents of the file.</p>
</dd>
</dl>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">fp</span> <span class="o">=</span> <span class="s2">&quot;media/hello.txt&quot;</span>
<span class="n">local</span> <span class="n">mt</span> <span class="o">=</span> <span class="s2">&quot;text/plain&quot;</span>
<span class="n">local</span> <span class="n">contents</span> <span class="o">=</span> <span class="s2">&quot;Hello, World!&quot;</span>
<span class="n">pandoc</span><span class="o">.</span><span class="n">mediabag</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">mt</span><span class="p">,</span> <span class="n">contents</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="items">
<span id="pandoc-mediabag-items"></span><h3><a class="toc-backref" href="#id232" role="doc-backlink">items</a><a class="headerlink" href="#items" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">items</span> <span class="pre">()</span></code></p>
<p>Returns an iterator triple to be used with Lua’s generic <code class="docutils literal notranslate"><span class="pre">for</span></code>
statement. The iterator returns the filepath, MIME type, and content of
a media bag item on each invocation. Items are processed one-by-one to
avoid excessive memory use.</p>
<p>This function should be used only when full access to all items,
including their contents, is required. For all other cases, <a href="#id552"><span class="problematic" id="id553">|list|_</span></a>
should be preferred.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>The iterator function; must be called with the iterator state and the
current iterator value.</p></li>
<li><p>Iterator state – an opaque value to be passed to the iterator
function.</p></li>
<li><p>Initial iterator value.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">fp</span><span class="p">,</span> <span class="n">mt</span><span class="p">,</span> <span class="n">contents</span> <span class="ow">in</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">mediabag</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="n">do</span>
  <span class="o">--</span> <span class="nb">print</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">mt</span><span class="p">,</span> <span class="n">contents</span><span class="p">)</span>
<span class="n">end</span>
</pre></div>
</div>
</section>
<section id="pandoc-mediabag-list">
<span id="id21"></span><h3><a class="toc-backref" href="#id233" role="doc-backlink">list</a><a class="headerlink" href="#pandoc-mediabag-list" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">list</span> <span class="pre">()</span></code></p>
<p>Get a summary of the current media bag contents.</p>
<p>Returns: A list of elements summarizing each entry in the media bag. The
summary item contains the keys <code class="docutils literal notranslate"><span class="pre">path</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span></code>, and <code class="docutils literal notranslate"><span class="pre">length</span></code>,
giving the filepath, MIME type, and length of contents in bytes,
respectively.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">calculate</span> <span class="n">the</span> <span class="n">size</span> <span class="n">of</span> <span class="n">the</span> <span class="n">media</span> <span class="n">bag</span><span class="o">.</span>
<span class="n">local</span> <span class="n">mb_items</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">mediabag</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="n">local</span> <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">#mb_items do</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">mb_items</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">length</span>
<span class="n">end</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="lookup">
<span id="pandoc-mediabag-lookup"></span><h3><a class="toc-backref" href="#id234" role="doc-backlink">lookup</a><a class="headerlink" href="#lookup" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">lookup</span> <span class="pre">(filepath)</span></code></p>
<p>Lookup a media item in the media bag, and return its MIME type and
contents.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepath</span></code></dt><dd><p>name of the file to look up.</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>the entry’s MIME type, or nil if the file was not found.</p></li>
<li><p>contents of the file, or nil if the file was not found.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;media/diagram.png&quot;</span>
<span class="n">local</span> <span class="n">mt</span><span class="p">,</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">mediabag</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="fetch">
<span id="pandoc-mediabag-fetch"></span><h3><a class="toc-backref" href="#id235" role="doc-backlink">fetch</a><a class="headerlink" href="#fetch" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">fetch</span> <span class="pre">(source)</span></code></p>
<p>Fetches the given source from a URL or local file. Returns two values:
the contents of the file and the MIME type (or an empty string).</p>
<p>The function will first try to retrieve <code class="docutils literal notranslate"><span class="pre">source</span></code> from the mediabag; if
that fails, it will try to download it or read it from the local file
system while respecting pandoc’s “resource path” setting.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">source</span></code></dt><dd><p>path to a resource; either a local file path or URI</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>the entries MIME type, or nil if the file was not found.</p></li>
<li><p>contents of the file, or nil if the file was not found.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">diagram_url</span> <span class="o">=</span> <span class="s2">&quot;https://pandoc.org/diagram.jpg&quot;</span>
<span class="n">local</span> <span class="n">mt</span><span class="p">,</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">mediabag</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">diagram_url</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="module-pandoc-list">
<h2><a class="toc-backref" href="#id236" role="doc-backlink">Module pandoc.List</a><a class="headerlink" href="#module-pandoc-list" title="この見出しへのパーマリンク">¶</a></h2>
<p>This module defines pandoc’s list type. It comes with useful methods and
convenience functions.</p>
<section id="constructor">
<h3><a class="toc-backref" href="#id237" role="doc-backlink">Constructor</a><a class="headerlink" href="#constructor" title="この見出しへのパーマリンク">¶</a></h3>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List([table])</span></code></dt><dd><p>Create a new List. If the optional argument <code class="docutils literal notranslate"><span class="pre">table</span></code> is given, set
the metatable of that value to <code class="docutils literal notranslate"><span class="pre">pandoc.List</span></code>. This is an alias for
<a class="reference external" href="#pandoc.list:new"><a href="#id153"><span class="problematic" id="id154">|pandoc.List:new([table])|_</span></a></a>.</p>
</dd>
</dl>
</section>
<section id="metamethods">
<h3><a class="toc-backref" href="#id238" role="doc-backlink">Metamethods</a><a class="headerlink" href="#metamethods" title="この見出しへのパーマリンク">¶</a></h3>
<section id="pandoc-list-concat-list">
<span id="pandoc-list-concat"></span><h4><code class="docutils literal notranslate"><span class="pre">pandoc.List:__concat</span> <span class="pre">(list)</span></code><a class="headerlink" href="#pandoc-list-concat-list" title="この見出しへのパーマリンク">¶</a></h4>
<p>Concatenates two lists.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">list</span></code></dt><dd><p>second list concatenated to the first</p>
</dd>
</dl>
<p>Returns: a new list containing all elements from list1 and list2</p>
</section>
<section id="pandoc-list-eq-a-b">
<span id="pandoc-list-eq"></span><h4><code class="docutils literal notranslate"><span class="pre">pandoc.List:__eq</span> <span class="pre">(a,</span> <span class="pre">b)</span></code><a class="headerlink" href="#pandoc-list-eq-a-b" title="この見出しへのパーマリンク">¶</a></h4>
<p>Compares two lists for equality. The lists are taken as equal if and
only if they are of the same type (i.e., have the same non-nil
metatable), have the same length, and if all elements are equal.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code></dt><dd><p>any Lua object</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">true</span></code> if the two lists are equal, <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise.</p></li>
</ul>
</section>
</section>
<section id="methods-2">
<span id="id22"></span><h3><a class="toc-backref" href="#id239" role="doc-backlink">Methods</a><a class="headerlink" href="#methods-2" title="この見出しへのパーマリンク">¶</a></h3>
<section id="pandoc-list-clone">
<span id="id23"></span><h4><code class="docutils literal notranslate"><span class="pre">pandoc.List:clone</span> <span class="pre">()</span></code><a class="headerlink" href="#pandoc-list-clone" title="この見出しへのパーマリンク">¶</a></h4>
<p>Returns a (shallow) copy of the list.</p>
</section>
<section id="pandoc-list-extend-list">
<span id="pandoc-list-extend"></span><h4><code class="docutils literal notranslate"><span class="pre">pandoc.List:extend</span> <span class="pre">(list)</span></code><a class="headerlink" href="#pandoc-list-extend-list" title="この見出しへのパーマリンク">¶</a></h4>
<p>Adds the given list to the end of this list.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">list</span></code></dt><dd><p>list to appended</p>
</dd>
</dl>
</section>
<section id="pandoc-list-find-needle-init">
<span id="pandoc-list-find"></span><h4><code class="docutils literal notranslate"><span class="pre">pandoc.List:find</span> <span class="pre">(needle,</span> <span class="pre">init)</span></code><a class="headerlink" href="#pandoc-list-find-needle-init" title="この見出しへのパーマリンク">¶</a></h4>
<p>Returns the value and index of the first occurrence of the given item.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">needle</span></code></dt><dd><p>item to search for</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">init</span></code></dt><dd><p>index at which the search is started</p>
</dd>
</dl>
<p>Returns: first item equal to the needle, or nil if no such item exists.</p>
</section>
<section id="pandoc-list-find-if-pred-init">
<span id="pandoc-list-find-if"></span><h4><code class="docutils literal notranslate"><span class="pre">pandoc.List:find_if</span> <span class="pre">(pred,</span> <span class="pre">init)</span></code><a class="headerlink" href="#pandoc-list-find-if-pred-init" title="この見出しへのパーマリンク">¶</a></h4>
<p>Returns the value and index of the first element for which the predicate
holds true.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">pred</span></code></dt><dd><p>the predicate function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">init</span></code></dt><dd><p>index at which the search is started</p>
</dd>
</dl>
<p>Returns: first item for which `test` succeeds, or nil if no such item
exists.</p>
</section>
<section id="pandoc-list-filter-pred">
<span id="pandoc-list-filter"></span><h4><code class="docutils literal notranslate"><span class="pre">pandoc.List:filter</span> <span class="pre">(pred)</span></code><a class="headerlink" href="#pandoc-list-filter-pred" title="この見出しへのパーマリンク">¶</a></h4>
<p>Returns a new list containing all items satisfying a given condition.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">pred</span></code></dt><dd><p>condition items must satisfy.</p>
</dd>
</dl>
<p>Returns: a new list containing all items for which `test` was true.</p>
</section>
<section id="pandoc-list-includes-needle-init">
<span id="pandoc-list-includes"></span><h4><code class="docutils literal notranslate"><span class="pre">pandoc.List:includes</span> <span class="pre">(needle,</span> <span class="pre">init)</span></code><a class="headerlink" href="#pandoc-list-includes-needle-init" title="この見出しへのパーマリンク">¶</a></h4>
<p>Checks if the list has an item equal to the given needle.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">needle</span></code></dt><dd><p>item to search for</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">init</span></code></dt><dd><p>index at which the search is started</p>
</dd>
</dl>
<p>Returns: true if a list item is equal to the needle, false otherwise</p>
</section>
<section id="pandoc-list-insert-pos-value">
<span id="pandoc-list-insert"></span><h4><code class="docutils literal notranslate"><span class="pre">pandoc.List:insert</span> <span class="pre">([pos],</span> <span class="pre">value)</span></code><a class="headerlink" href="#pandoc-list-insert-pos-value" title="この見出しへのパーマリンク">¶</a></h4>
<p>Inserts element <code class="docutils literal notranslate"><span class="pre">value</span></code> at position <code class="docutils literal notranslate"><span class="pre">pos</span></code> in list, shifting elements
to the next-greater index if necessary.</p>
<p>This function is identical to <a class="reference external" href="https://www.lua.org/manual/5.3/manual.html#6.6"><code class="docutils literal notranslate"><span class="pre">table.insert</span></code></a>.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">pos</span></code></dt><dd><p>index of the new value; defaults to length of the list + 1</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">value</span></code></dt><dd><p>value to insert into the list</p>
</dd>
</dl>
</section>
<section id="pandoc-list-map-fn">
<span id="pandoc-list-map"></span><h4><code class="docutils literal notranslate"><span class="pre">pandoc.List:map</span> <span class="pre">(fn)</span></code><a class="headerlink" href="#pandoc-list-map-fn" title="この見出しへのパーマリンク">¶</a></h4>
<p>Returns a copy of the current list by applying the given function to all
elements.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fn</span></code></dt><dd><p>function which is applied to all list items.</p>
</dd>
</dl>
</section>
<section id="pandoc-list-new-table">
<span id="pandoc-list-new"></span><h4><code class="docutils literal notranslate"><span class="pre">pandoc.List:new([table])</span></code><a class="headerlink" href="#pandoc-list-new-table" title="この見出しへのパーマリンク">¶</a></h4>
<p>Create a new List. If the optional argument <code class="docutils literal notranslate"><span class="pre">table</span></code> is given, set the
metatable of that value to <code class="docutils literal notranslate"><span class="pre">pandoc.List</span></code>.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">table</span></code></dt><dd><p>table which should be treatable as a list; defaults to an empty table</p>
</dd>
</dl>
<p>Returns: the updated input value</p>
</section>
<section id="pandoc-list-remove-pos">
<span id="pandoc-list-remove"></span><h4><code class="docutils literal notranslate"><span class="pre">pandoc.List:remove</span> <span class="pre">([pos])</span></code><a class="headerlink" href="#pandoc-list-remove-pos" title="この見出しへのパーマリンク">¶</a></h4>
<p>Removes the element at position <code class="docutils literal notranslate"><span class="pre">pos</span></code>, returning the value of the
removed element.</p>
<p>This function is identical to <a class="reference external" href="https://www.lua.org/manual/5.3/manual.html#6.6"><code class="docutils literal notranslate"><span class="pre">table.remove</span></code></a>.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">pos</span></code></dt><dd><p>position of the list value that will be removed; defaults to the
index of the last element</p>
</dd>
</dl>
<p>Returns: the removed element</p>
</section>
<section id="pandoc-list-sort-comp">
<span id="pandoc-list-sort"></span><h4><code class="docutils literal notranslate"><span class="pre">pandoc.List:sort</span> <span class="pre">([comp])</span></code><a class="headerlink" href="#pandoc-list-sort-comp" title="この見出しへのパーマリンク">¶</a></h4>
<p>Sorts list elements in a given order, in-place. If <code class="docutils literal notranslate"><span class="pre">comp</span></code> is given,
then it must be a function that receives two list elements and returns
true when the first element must come before the second in the final
order (so that, after the sort, <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">&lt;</span> <span class="pre">j</span></code> implies
<code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">comp(list[j],list[i]))</span></code>. If comp is not given, then the standard
Lua operator <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> is used instead.</p>
<p>Note that the comp function must define a strict partial order over the
elements in the list; that is, it must be asymmetric and transitive.
Otherwise, no valid sort may be possible.</p>
<p>The sort algorithm is not stable: elements considered equal by the given
order may have their relative positions changed by the sort.</p>
<p>This function is identical to <a class="reference external" href="https://www.lua.org/manual/5.3/manual.html#6.6"><code class="docutils literal notranslate"><span class="pre">table.sort</span></code></a>.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">comp</span></code></dt><dd><p>Comparison function as described above.</p>
</dd>
</dl>
</section>
</section>
</section>
<section id="module-pandoc-path">
<h2><a class="toc-backref" href="#id240" role="doc-backlink">Module pandoc.path</a><a class="headerlink" href="#module-pandoc-path" title="この見出しへのパーマリンク">¶</a></h2>
<p>Module for file path manipulations.</p>
<section id="static-fields">
<span id="pandoc-path-fields"></span><h3><a class="toc-backref" href="#id241" role="doc-backlink">Static Fields</a><a class="headerlink" href="#static-fields" title="この見出しへのパーマリンク">¶</a></h3>
<section id="separator">
<span id="pandoc-path-separator"></span><h4>separator<a class="headerlink" href="#separator" title="この見出しへのパーマリンク">¶</a></h4>
<p>The character that separates directories.</p>
</section>
<section id="search-path-separator">
<span id="pandoc-path-search-path-separator"></span><h4>search_path_separator<a class="headerlink" href="#search-path-separator" title="この見出しへのパーマリンク">¶</a></h4>
<p>The character that is used to separate the entries in the <code class="docutils literal notranslate"><span class="pre">PATH</span></code>
environment variable.</p>
</section>
</section>
<section id="functions">
<span id="pandoc-path-functions"></span><h3><a class="toc-backref" href="#id242" role="doc-backlink">Functions</a><a class="headerlink" href="#functions" title="この見出しへのパーマリンク">¶</a></h3>
<section id="directory-filepath">
<span id="pandoc-path-directory"></span><h4>directory (filepath)<a class="headerlink" href="#directory-filepath" title="この見出しへのパーマリンク">¶</a></h4>
<p>Gets the directory name, i.e., removes the last directory separator and
everything after from the given path.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepath</span></code></dt><dd><p>path (string)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>The filepath up to the last directory separator. (string)</p></li>
</ul>
</section>
<section id="filename-filepath">
<span id="pandoc-path-filename"></span><h4>filename (filepath)<a class="headerlink" href="#filename-filepath" title="この見出しへのパーマリンク">¶</a></h4>
<p>Get the file name.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepath</span></code></dt><dd><p>path (string)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>File name part of the input path. (string)</p></li>
</ul>
</section>
<section id="is-absolute-filepath">
<span id="pandoc-path-is-absolute"></span><h4>is_absolute (filepath)<a class="headerlink" href="#is-absolute-filepath" title="この見出しへのパーマリンク">¶</a></h4>
<p>Checks whether a path is absolute, i.e. not fixed to a root.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepath</span></code></dt><dd><p>path (string)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">true</span></code> if <code class="docutils literal notranslate"><span class="pre">filepath</span></code> is an absolute path, <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise.
(boolean)</p></li>
</ul>
</section>
<section id="is-relative-filepath">
<span id="pandoc-path-is-relative"></span><h4>is_relative (filepath)<a class="headerlink" href="#is-relative-filepath" title="この見出しへのパーマリンク">¶</a></h4>
<p>Checks whether a path is relative or fixed to a root.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepath</span></code></dt><dd><p>path (string)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">true</span></code> if <code class="docutils literal notranslate"><span class="pre">filepath</span></code> is a relative path, <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise.
(boolean)</p></li>
</ul>
</section>
<section id="join-filepaths">
<span id="pandoc-path-join"></span><h4>join (filepaths)<a class="headerlink" href="#join-filepaths" title="この見出しへのパーマリンク">¶</a></h4>
<p>Join path elements back together by the directory separator.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepaths</span></code></dt><dd><p>path components (list of strings)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>The joined path. (string)</p></li>
</ul>
</section>
<section id="make-relative-path-root-unsafe">
<span id="pandoc-path-make-relative"></span><h4>make_relative (path, root[, unsafe])<a class="headerlink" href="#make-relative-path-root-unsafe" title="この見出しへのパーマリンク">¶</a></h4>
<p>Contract a filename, based on a relative path. Note that the resulting
path will usually not introduce <code class="docutils literal notranslate"><span class="pre">..</span></code> paths, as the presence of
symlinks means <code class="docutils literal notranslate"><span class="pre">../b</span></code> may not reach <code class="docutils literal notranslate"><span class="pre">a/b</span></code> if it starts from <code class="docutils literal notranslate"><span class="pre">a/c</span></code>.
For a worked example see <a class="reference external" href="https://neilmitchell.blogspot.co.uk/2015/10/filepaths-are-subtle-symlinks-are-hard.html">this blog post</a>.</p>
<p>Set <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> to a truthy value to a allow <code class="docutils literal notranslate"><span class="pre">..</span></code> in paths.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">path</span></code></dt><dd><p>path to be made relative (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">root</span></code></dt><dd><p>root path (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsafe</span></code></dt><dd><p>whether to allow <code class="docutils literal notranslate"><span class="pre">..</span></code> in the result. (boolean)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>contracted filename (string)</p></li>
</ul>
</section>
<section id="normalize-filepath">
<span id="pandoc-path-normalize"></span><h4>normalize (filepath)<a class="headerlink" href="#normalize-filepath" title="この見出しへのパーマリンク">¶</a></h4>
<p>Normalizes a path.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">//</span></code> makes sense only as part of a (Windows) network drive;
elsewhere, multiple slashes are reduced to a single
<code class="docutils literal notranslate"><span class="pre">path.separator</span></code> (platform dependent).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/</span></code> becomes <code class="docutils literal notranslate"><span class="pre">path.separator</span></code> (platform dependent)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./</span></code> -&gt; ’’</p></li>
<li><p>an empty path becomes <code class="docutils literal notranslate"><span class="pre">.</span></code></p></li>
</ul>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepath</span></code></dt><dd><p>path (string)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>The normalized path. (string)</p></li>
</ul>
</section>
<section id="split-filepath">
<span id="pandoc-path-split"></span><h4>split (filepath)<a class="headerlink" href="#split-filepath" title="この見出しへのパーマリンク">¶</a></h4>
<p>Splits a path by the directory separator.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepath</span></code></dt><dd><p>path (string)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>List of all path components. (list of strings)</p></li>
</ul>
</section>
<section id="split-extension-filepath">
<span id="pandoc-path-split-extension"></span><h4>split_extension (filepath)<a class="headerlink" href="#split-extension-filepath" title="この見出しへのパーマリンク">¶</a></h4>
<p>Splits the last extension from a file path and returns the parts. The
extension, if present, includes the leading separator; if the path has
no extension, then the empty string is returned as the extension.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepath</span></code></dt><dd><p>path (string)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>filepath without extension (string)</p></li>
<li><p>extension or empty string (string)</p></li>
</ul>
</section>
<section id="split-search-path-search-path">
<span id="pandoc-path-split-search-path"></span><h4>split_search_path (search_path)<a class="headerlink" href="#split-search-path-search-path" title="この見出しへのパーマリンク">¶</a></h4>
<p>Takes a string and splits it on the <code class="docutils literal notranslate"><span class="pre">search_path_separator</span></code> character.
Blank items are ignored on Windows, and converted to <code class="docutils literal notranslate"><span class="pre">.</span></code> on Posix. On
Windows path elements are stripped of quotes.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">search_path</span></code></dt><dd><p>platform-specific search path (string)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>list of directories in search path (list of strings)</p></li>
</ul>
</section>
</section>
</section>
<section id="module-pandoc-system">
<h2><a class="toc-backref" href="#id243" role="doc-backlink">Module pandoc.system</a><a class="headerlink" href="#module-pandoc-system" title="この見出しへのパーマリンク">¶</a></h2>
<p>Access to system information and functionality.</p>
<section id="id24">
<h3><a class="toc-backref" href="#id244" role="doc-backlink">Static Fields</a><a class="headerlink" href="#id24" title="この見出しへのパーマリンク">¶</a></h3>
<section id="arch">
<span id="pandoc-system-arch"></span><h4>arch<a class="headerlink" href="#arch" title="この見出しへのパーマリンク">¶</a></h4>
<p>The machine architecture on which the program is running.</p>
</section>
<section id="os">
<span id="pandoc-system-os"></span><h4>os<a class="headerlink" href="#os" title="この見出しへのパーマリンク">¶</a></h4>
<p>The operating system on which the program is running.</p>
</section>
</section>
<section id="id25">
<h3><a class="toc-backref" href="#id245" role="doc-backlink">Functions</a><a class="headerlink" href="#id25" title="この見出しへのパーマリンク">¶</a></h3>
<section id="environment">
<span id="pandoc-system-environment"></span><h4>environment<a class="headerlink" href="#environment" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">environment</span> <span class="pre">()</span></code></p>
<p>Retrieve the entire environment as a string-indexed table.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>A table mapping environment variables names to their string value
(table).</p></li>
</ul>
</section>
<section id="get-working-directory">
<span id="pandoc-system-get-working-directory"></span><h4>get_working_directory<a class="headerlink" href="#get-working-directory" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">get_working_directory</span> <span class="pre">()</span></code></p>
<p>Obtain the current working directory as an absolute path.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>The current working directory (string).</p></li>
</ul>
</section>
<section id="with-environment">
<span id="pandoc-system-with-environment"></span><h4>with_environment<a class="headerlink" href="#with-environment" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">with_environment</span> <span class="pre">(environment,</span> <span class="pre">callback)</span></code></p>
<p>Run an action within a custom environment. Only the environment
variables given by <code class="docutils literal notranslate"><span class="pre">environment</span></code> will be set, when <code class="docutils literal notranslate"><span class="pre">callback</span></code> is
called. The original environment is restored after this function
finishes, even if an error occurs while running the callback action.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">environment</span></code></dt><dd><p>Environment variables and their values to be set before running
<code class="docutils literal notranslate"><span class="pre">callback</span></code>. (table with string keys and string values)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">callback</span></code></dt><dd><p>Action to execute in the custom environment (function)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>The result(s) of the call to <code class="docutils literal notranslate"><span class="pre">callback</span></code></p></li>
</ul>
</section>
<section id="with-temporary-directory">
<span id="pandoc-system-with-temporary-directory"></span><h4>with_temporary_directory<a class="headerlink" href="#with-temporary-directory" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">with_temporary_directory</span> <span class="pre">([parent_dir,]</span> <span class="pre">templ,</span> <span class="pre">callback)</span></code></p>
<p>Create and use a temporary directory inside the given directory. The
directory is deleted after the callback returns.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">parent_dir</span></code></dt><dd><p>Parent directory to create the directory in (string). If this
parameter is omitted, the system’s canonical temporary directory is
used.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">templ</span></code></dt><dd><p>Directory name template (string).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">callback</span></code></dt><dd><p>Function which takes the name of the temporary directory as its first
argument (function).</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>The result of the call to <code class="docutils literal notranslate"><span class="pre">callback</span></code>.</p></li>
</ul>
</section>
<section id="with-working-directory">
<span id="pandoc-system-with-working-directory"></span><h4>with_working_directory<a class="headerlink" href="#with-working-directory" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">with_working_directory</span> <span class="pre">(directory,</span> <span class="pre">callback)</span></code></p>
<p>Run an action within a different directory. This function will change
the working directory to <code class="docutils literal notranslate"><span class="pre">directory</span></code>, execute <code class="docutils literal notranslate"><span class="pre">callback</span></code>, then
switch back to the original working directory, even if an error occurs
while running the callback action.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">directory</span></code></dt><dd><p>Directory in which the given <code class="docutils literal notranslate"><span class="pre">callback</span></code> should be executed (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">callback</span></code></dt><dd><p>Action to execute in the given directory (function)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>The result(s) of the call to <code class="docutils literal notranslate"><span class="pre">callback</span></code></p></li>
</ul>
</section>
</section>
</section>
<section id="module-pandoc-layout">
<h2><a class="toc-backref" href="#id246" role="doc-backlink">Module pandoc.layout</a><a class="headerlink" href="#module-pandoc-layout" title="この見出しへのパーマリンク">¶</a></h2>
<p>Plain-text document layouting.</p>
<section id="fields">
<span id="pandoc-layout-fields"></span><h3><a class="toc-backref" href="#id247" role="doc-backlink">Fields</a><a class="headerlink" href="#fields" title="この見出しへのパーマリンク">¶</a></h3>
<section id="blankline">
<span id="pandoc-layout-blankline"></span><h4>blankline<a class="headerlink" href="#blankline" title="この見出しへのパーマリンク">¶</a></h4>
<p>Inserts a blank line unless one exists already.</p>
</section>
<section id="cr">
<span id="pandoc-layout-cr"></span><h4>cr<a class="headerlink" href="#cr" title="この見出しへのパーマリンク">¶</a></h4>
<p>A carriage return. Does nothing if we're at the beginning of a line;
otherwise inserts a newline.</p>
</section>
<section id="pandoc-layout-empty">
<span id="id26"></span><h4>empty<a class="headerlink" href="#pandoc-layout-empty" title="この見出しへのパーマリンク">¶</a></h4>
<p>The empty document.</p>
</section>
<section id="pandoc-layout-space">
<span id="id27"></span><h4>space<a class="headerlink" href="#pandoc-layout-space" title="この見出しへのパーマリンク">¶</a></h4>
<p>A breaking (reflowable) space.</p>
</section>
</section>
<section id="pandoc-layout-functions">
<span id="id28"></span><h3><a class="toc-backref" href="#id248" role="doc-backlink">Functions</a><a class="headerlink" href="#pandoc-layout-functions" title="この見出しへのパーマリンク">¶</a></h3>
<section id="after-break">
<span id="pandoc-layout-after-break"></span><h4>after_break<a class="headerlink" href="#after-break" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">after_break</span> <span class="pre">(text)</span></code></p>
<p>Creates a <code class="docutils literal notranslate"><span class="pre">Doc</span></code> which is conditionally included only if it comes at
the beginning of a line.</p>
<p>An example where this is useful is for escaping line-initial <code class="docutils literal notranslate"><span class="pre">.</span></code> in
roff man.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>content to include when placed after a break (string)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>new doc (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="before-non-blank">
<span id="pandoc-layout-before-non-blank"></span><h4>before_non_blank<a class="headerlink" href="#before-non-blank" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">before_non_blank</span> <span class="pre">(doc)</span></code></p>
<p>Conditionally includes the given <code class="docutils literal notranslate"><span class="pre">doc</span></code> unless it is followed by a
blank space.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>conditional doc (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="blanklines">
<span id="pandoc-layout-blanklines"></span><h4>blanklines<a class="headerlink" href="#blanklines" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">blanklines</span> <span class="pre">(n)</span></code></p>
<p>Inserts blank lines unless they exist already.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">n</span></code></dt><dd><p>number of blank lines (integer)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>conditional blank lines (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="braces">
<span id="pandoc-layout-braces"></span><h4>braces<a class="headerlink" href="#braces" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">braces</span> <span class="pre">(doc)</span></code></p>
<p>Puts the <code class="docutils literal notranslate"><span class="pre">doc</span></code> in curly braces.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>doc enclosed by {}. (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="brackets">
<span id="pandoc-layout-brackets"></span><h4>brackets<a class="headerlink" href="#brackets" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">brackets</span> <span class="pre">(doc)</span></code></p>
<p>Puts the <code class="docutils literal notranslate"><span class="pre">doc</span></code> in square brackets</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>doc enclosed by []. (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="cblock">
<span id="pandoc-layout-cblock"></span><h4>cblock<a class="headerlink" href="#cblock" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">cblock</span> <span class="pre">(doc,</span> <span class="pre">width)</span></code></p>
<p>Creates a block with the given width and content, aligned centered.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">width</span></code></dt><dd><p>block width in chars (integer)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>doc, aligned centered in a block with max<code class="docutils literal notranslate"><span class="pre">width</span></code> chars per line.
(<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="chomp">
<span id="pandoc-layout-chomp"></span><h4>chomp<a class="headerlink" href="#chomp" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">chomp</span> <span class="pre">(doc)</span></code></p>
<p>Chomps trailing blank space off of the <code class="docutils literal notranslate"><span class="pre">doc</span></code>.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">doc</span></code> without trailing blanks (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="concat">
<span id="pandoc-layout-concat"></span><h4>concat<a class="headerlink" href="#concat" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">concat</span> <span class="pre">(docs[,</span> <span class="pre">sep])</span></code></p>
<p>Concatenates a list of <code class="docutils literal notranslate"><span class="pre">Doc</span></code>s.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">docs</span></code></dt><dd><p>list of Docs (<code class="docutils literal notranslate"><span class="pre">{Doc,...}</span></code>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sep</span></code></dt><dd><p>separator (default: none) (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>concatenated doc (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="double-quotes">
<span id="pandoc-layout-double-quotes"></span><h4>double_quotes<a class="headerlink" href="#double-quotes" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">double_quotes</span> <span class="pre">(doc)</span></code></p>
<p>Wraps a <code class="docutils literal notranslate"><span class="pre">Doc</span></code> in double quotes.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">doc</span></code> enclosed by <code class="docutils literal notranslate"><span class="pre">&quot;</span></code> chars (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="flush">
<span id="pandoc-layout-flush"></span><h4>flush<a class="headerlink" href="#flush" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">flush</span> <span class="pre">(doc)</span></code></p>
<p>Makes a <code class="docutils literal notranslate"><span class="pre">Doc</span></code> flush against the left margin.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>flushed <code class="docutils literal notranslate"><span class="pre">doc</span></code> (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="hang">
<span id="pandoc-layout-hang"></span><h4>hang<a class="headerlink" href="#hang" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">hang</span> <span class="pre">(doc,</span> <span class="pre">ind,</span> <span class="pre">start)</span></code></p>
<p>Creates a hanging indent.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ind</span></code></dt><dd><p>indentation width (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">start</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">doc</span></code> prefixed by <code class="docutils literal notranslate"><span class="pre">start</span></code> on the first line, subsequent lines
indented by <code class="docutils literal notranslate"><span class="pre">ind</span></code> spaces. (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="inside">
<span id="pandoc-layout-inside"></span><h4>inside<a class="headerlink" href="#inside" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">inside</span> <span class="pre">(contents,</span> <span class="pre">start,</span> <span class="pre">end)</span></code></p>
<p>Encloses a <code class="docutils literal notranslate"><span class="pre">Doc</span></code> inside a start and end <code class="docutils literal notranslate"><span class="pre">Doc</span></code>.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">contents</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">start</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">end</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>enclosed contents (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="lblock">
<span id="pandoc-layout-lblock"></span><h4>lblock<a class="headerlink" href="#lblock" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">lblock</span> <span class="pre">(doc,</span> <span class="pre">width)</span></code></p>
<p>Creates a block with the given width and content, aligned to the left.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">width</span></code></dt><dd><p>block width in chars (integer)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>doc put into block with max <code class="docutils literal notranslate"><span class="pre">width</span></code> chars per line. (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="literal">
<span id="pandoc-layout-literal"></span><h4>literal<a class="headerlink" href="#literal" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">literal</span> <span class="pre">(text)</span></code></p>
<p>Creates a <code class="docutils literal notranslate"><span class="pre">Doc</span></code> from a string.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>literal value (string)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>doc contatining just the literal string (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="nest">
<span id="pandoc-layout-nest"></span><h4>nest<a class="headerlink" href="#nest" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">nest</span> <span class="pre">(doc,</span> <span class="pre">ind)</span></code></p>
<p>Indents a <code class="docutils literal notranslate"><span class="pre">Doc</span></code> by the specified number of spaces.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ind</span></code></dt><dd><p>indentation size (integer)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">doc</span></code> indented by <code class="docutils literal notranslate"><span class="pre">ind</span></code> spaces (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="nestle">
<span id="pandoc-layout-nestle"></span><h4>nestle<a class="headerlink" href="#nestle" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">nestle</span> <span class="pre">(doc)</span></code></p>
<p>Removes leading blank lines from a <code class="docutils literal notranslate"><span class="pre">Doc</span></code>.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">doc</span></code> with leading blanks removed (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="nowrap">
<span id="pandoc-layout-nowrap"></span><h4>nowrap<a class="headerlink" href="#nowrap" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">nowrap</span> <span class="pre">(doc)</span></code></p>
<p>Makes a <code class="docutils literal notranslate"><span class="pre">Doc</span></code> non-reflowable.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>same as input, but non-reflowable (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="parens">
<span id="pandoc-layout-parens"></span><h4>parens<a class="headerlink" href="#parens" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">parens</span> <span class="pre">(doc)</span></code></p>
<p>Puts the <code class="docutils literal notranslate"><span class="pre">doc</span></code> in parentheses.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>doc enclosed by (). (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="prefixed">
<span id="pandoc-layout-prefixed"></span><h4>prefixed<a class="headerlink" href="#prefixed" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">prefixed</span> <span class="pre">(doc,</span> <span class="pre">prefix)</span></code></p>
<p>Uses the specified string as a prefix for every line of the inside
document (except the first, if not at the beginning of the line).</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">prefix</span></code></dt><dd><p>prefix for each line (string)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>prefixed <code class="docutils literal notranslate"><span class="pre">doc</span></code> (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="quotes">
<span id="pandoc-layout-quotes"></span><h4>quotes<a class="headerlink" href="#quotes" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">quotes</span> <span class="pre">(doc)</span></code></p>
<p>Wraps a <code class="docutils literal notranslate"><span class="pre">Doc</span></code> in single quotes.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (Doc)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>doc enclosed in <code class="docutils literal notranslate"><span class="pre">'</span></code>. (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="rblock">
<span id="pandoc-layout-rblock"></span><h4>rblock<a class="headerlink" href="#rblock" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">rblock</span> <span class="pre">(doc,</span> <span class="pre">width)</span></code></p>
<p>Creates a block with the given width and content, aligned to the right.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (Doc)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">width</span></code></dt><dd><p>block width in chars (integer)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>doc, right aligned in a block with max<code class="docutils literal notranslate"><span class="pre">width</span></code> chars per line.
(<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="vfill">
<span id="pandoc-layout-vfill"></span><h4>vfill<a class="headerlink" href="#vfill" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">vfill</span> <span class="pre">(border)</span></code></p>
<p>An expandable border that, when placed next to a box, expands to the
height of the box. Strings cycle through the list provided.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">border</span></code></dt><dd><p>vertically expanded characters (string)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>automatically expanding border Doc (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="render">
<span id="pandoc-layout-render"></span><h4>render<a class="headerlink" href="#render" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">render</span> <span class="pre">(doc[,</span> <span class="pre">colwidth])</span></code></p>
<p>Render a &#64;'Doc'&#64;. The text is reflowed on breakable spacesto match the
given line length. Text is not reflowed if theline length parameter is
omitted or nil.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (Doc)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">colwidth</span></code></dt><dd><p>planned maximum line length (integer)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>rendered doc (<a class="reference external" href="#type-doc">Doc</a>)</p></li>
</ul>
</section>
<section id="is-empty">
<span id="pandoc-layout-is-empty"></span><h4>is_empty<a class="headerlink" href="#is-empty" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">is_empty</span> <span class="pre">(doc)</span></code></p>
<p>Checks whether a doc is empty.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">true</span></code> iff <code class="docutils literal notranslate"><span class="pre">doc</span></code> is the empty document, <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise.
(boolean)</p></li>
</ul>
</section>
<section id="height">
<span id="pandoc-layout-height"></span><h4>height<a class="headerlink" href="#height" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">height</span> <span class="pre">(doc)</span></code></p>
<p>Returns the height of a block or other Doc.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>doc height (integer|string)</p></li>
</ul>
</section>
<section id="min-offset">
<span id="pandoc-layout-min-offset"></span><h4>min_offset<a class="headerlink" href="#min-offset" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">min_offset</span> <span class="pre">(doc)</span></code></p>
<p>Returns the minimal width of a <code class="docutils literal notranslate"><span class="pre">Doc</span></code> when reflowed at breakable
spaces.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>minimal possible width (integer|string)</p></li>
</ul>
</section>
<section id="offset">
<span id="pandoc-layout-offset"></span><h4>offset<a class="headerlink" href="#offset" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">offset</span> <span class="pre">(doc)</span></code></p>
<p>Returns the width of a <code class="docutils literal notranslate"><span class="pre">Doc</span></code> as number of characters.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>doc width (integer|string)</p></li>
</ul>
</section>
<section id="real-length">
<span id="pandoc-layout-real-length"></span><h4>real_length<a class="headerlink" href="#real-length" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">real_length</span> <span class="pre">(str)</span></code></p>
<p>Returns the real length of a string in a monospace font: 0 for a
combining chaeracter, 1 for a regular character, 2 for an East Asian
wide character.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">str</span></code></dt><dd><p>UTF-8 string to measure (string)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>text length (integer|string)</p></li>
</ul>
</section>
<section id="update-column">
<span id="pandoc-layout-update-column"></span><h4>update_column<a class="headerlink" href="#update-column" title="この見出しへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">update_column</span> <span class="pre">(doc,</span> <span class="pre">i)</span></code></p>
<p>Returns the column that would be occupied by the last laid out
character.</p>
<p>Parameters</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>document (<a class="reference external" href="#type-doc">Doc</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">i</span></code></dt><dd><p>start column (integer)</p>
</dd>
</dl>
<p>Returns</p>
<ul class="simple">
<li><p>column number (integer|string)</p></li>
</ul>
</section>
</section>
</section>
<section id="module-pandoc-template">
<h2><a class="toc-backref" href="#id249" role="doc-backlink">Module pandoc.template</a><a class="headerlink" href="#module-pandoc-template" title="この見出しへのパーマリンク">¶</a></h2>
<p>Handle pandoc templates.</p>
<section id="compile">
<span id="pandoc-template-compile"></span><h3><a class="toc-backref" href="#id250" role="doc-backlink">compile</a><a class="headerlink" href="#compile" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">compile</span> <span class="pre">(template[,</span> <span class="pre">templates_path])</span></code></p>
<p>Compiles a template string into a <a class="reference external" href="#type-template">Template</a> object usable by pandoc.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">templates_path</span></code> parameter is specified, should be the file
path associated with the template. It is used when checking for
partials. Partials will be taken only from the default data files if
this parameter is omitted.</p>
<p>An error is raised if compilation fails.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">template</span></code></dt><dd><p>template string (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">templates_path</span></code></dt><dd><p>parameter to determine a default path and extension for partials;
uses the data files templates path by default. (string)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>compiled template (Template)</p></li>
</ul>
</section>
<section id="default">
<span id="pandoc-template-default"></span><h3><a class="toc-backref" href="#id251" role="doc-backlink">default</a><a class="headerlink" href="#default" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">default</span> <span class="pre">([writer])</span></code></p>
<p>Returns the default template for a given writer as a string. An error if
no such template can be found.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">writer</span></code></dt><dd><p>name of the writer for which the template should be retrieved;
defaults to the global <code class="docutils literal notranslate"><span class="pre">FORMAT</span></code>.</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>raw template (string)</p></li>
</ul>
</section>
</section>
<section id="module-pandoc-types">
<h2><a class="toc-backref" href="#id252" role="doc-backlink">Module pandoc.types</a><a class="headerlink" href="#module-pandoc-types" title="この見出しへのパーマリンク">¶</a></h2>
<p>Constructors for types which are not part of the pandoc AST.</p>
<section id="pandoc-types-version">
<span id="id29"></span><h3><a class="toc-backref" href="#id253" role="doc-backlink">Version</a><a class="headerlink" href="#pandoc-types-version" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Version</span> <span class="pre">(version_specifier)</span></code></p>
<p>Creates a Version object.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">version_specifier</span></code></dt><dd><p>Version specifier: this can be a version string like <code class="docutils literal notranslate"><span class="pre">'2.7.3'</span></code>, a
list of integers like <code class="docutils literal notranslate"><span class="pre">{2,</span> <span class="pre">7,</span> <span class="pre">3}</span></code>, a single integer, or a
<a class="reference external" href="#type-version">Version</a>.</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>A new <a class="reference external" href="#type-version">Version</a> object.</p></li>
</ul>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/icon_pandoc_square_small.jpg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">日本Pandocユーザ会</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=pandoc-jp&repo=pandoc-doc-ja&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>ナビゲーション</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">日本Pandocユーザ会</a></li>
<li class="toctree-l1"><a class="reference internal" href="users-guide.html">Pandoc User’s Guide 日本語版</a></li>
<li class="toctree-l1"><a class="reference internal" href="trans-intro.html">翻訳の手引 for Pandocユーザーズガイド</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="検索" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, 日本Pandocユーザ会.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>

<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>Pandoc Lua Filters 日本語版 &#8212; 日本Pandocユーザ会 2019.02.21 ドキュメント</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/translations.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="pandoc-lua-filters">
<h1><a class="toc-backref" href="#id215">Pandoc Lua Filters 日本語版</a><a class="headerlink" href="#pandoc-lua-filters" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>現在の翻訳は <em>プレリリース版</em> です。不完全な翻訳を含んでいます。
（ユーザーズガイド以外のページについてはほぼ翻訳されていません。現在翻訳を進めています）</p>
<ul class="simple">
<li><p>正確な情報については英語の公式 <a class="reference external" href="https://pandoc.org/MANUAL.html">User's Guide</a> を参照してください</p></li>
<li><p>この翻訳に対する問題・改善案については <a class="reference external" href="https://github.com/pandoc-jp/pandoc-doc-ja/issues">GitHubリポジトリのIssue</a> に投稿してください</p></li>
<li><p>翻訳のレビュー作業や翻訳作業へのご協力を希望の方は <a class="reference internal" href="trans-intro.html"><span class="doc">翻訳の手引 for Pandocユーザーズガイド</span></a> をご覧ください</p></li>
</ul>
</div>
<p>原著者:</p>
<blockquote>
<div><ul class="simple">
<li><p>Albert Krewinkel</p></li>
<li><p>John MacFarlane</p></li>
</ul>
</div></blockquote>
<p>原著バージョン: 2.11.0.4</p>
<p>更新日: 2020/10/31</p>
<p>翻訳者（アルファベット順）:</p>
<ul class="simple">
<li><p>becolomochi</p></li>
<li><p>makotosan</p></li>
<li><p>niszet</p></li>
<li><p>Takada Atsushi</p></li>
<li><p><a class="reference external" href="https://ishibaki.github.io">Tomoki Ishibashi</a></p></li>
<li><p>Yuki Fujiwara</p></li>
</ul>
<div class="contents topic" id="id1">
<p class="topic-title">目次</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pandoc-lua-filters" id="id215">Pandoc Lua Filters 日本語版</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id216">Introduction</a></p></li>
<li><p><a class="reference internal" href="#lua-filter-structure" id="id217">Lua filter structure</a></p>
<ul>
<li><p><a class="reference internal" href="#filters-on-element-sequences" id="id218">Filters on element sequences</a></p></li>
<li><p><a class="reference internal" href="#execution-order" id="id219">Execution Order</a></p></li>
<li><p><a class="reference internal" href="#global-variables" id="id220">Global variables</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#pandoc-module" id="id221">Pandoc Module</a></p>
<ul>
<li><p><a class="reference internal" href="#element-creation" id="id222">Element creation</a></p></li>
<li><p><a class="reference internal" href="#exposed-pandoc-functionality" id="id223">Exposed pandoc functionality</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#lua-interpreter-initialization" id="id224">Lua interpreter initialization</a></p></li>
<li><p><a class="reference internal" href="#debugging-lua-filters" id="id225">Debugging Lua filters</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id226">Examples</a></p>
<ul>
<li><p><a class="reference internal" href="#macro-substitution" id="id227">Macro substitution</a></p></li>
<li><p><a class="reference internal" href="#center-images-in-latex-and-html-output" id="id228">Center images in LaTeX and HTML output</a></p></li>
<li><p><a class="reference internal" href="#setting-the-date-in-the-metadata" id="id229">Setting the date in the metadata</a></p></li>
<li><p><a class="reference internal" href="#remove-spaces-before-citations" id="id230">Remove spaces before citations</a></p></li>
<li><p><a class="reference internal" href="#replacing-placeholders-with-their-metadata-value" id="id231">Replacing placeholders with their metadata value</a></p></li>
<li><p><a class="reference internal" href="#modifying-pandocs-manual-txt-for-man-pages" id="id232">Modifying pandoc’s <code class="docutils literal notranslate"><span class="pre">MANUAL.txt</span></code> for man pages</a></p></li>
<li><p><a class="reference internal" href="#creating-a-handout-from-a-paper" id="id233">Creating a handout from a paper</a></p></li>
<li><p><a class="reference internal" href="#counting-words-in-a-document" id="id234">Counting words in a document</a></p></li>
<li><p><a class="reference internal" href="#converting-abc-code-to-music-notation" id="id235">Converting ABC code to music notation</a></p></li>
<li><p><a class="reference internal" href="#building-images-with-tikz" id="id236">Building images with Ti<em>k</em>Z</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#lua-type-reference" id="id237">Lua type reference</a></p>
<ul>
<li><p><a class="reference internal" href="#shared-properties" id="id238">Shared Properties</a></p></li>
<li><p><a class="reference internal" href="#pandoc" id="id239">Pandoc</a></p></li>
<li><p><a class="reference internal" href="#meta" id="id240">Meta</a></p></li>
<li><p><a class="reference internal" href="#metavalue" id="id241">MetaValue</a></p></li>
<li><p><a class="reference internal" href="#block" id="id242">Block</a></p></li>
<li><p><a class="reference internal" href="#inline" id="id243">Inline</a></p></li>
<li><p><a class="reference internal" href="#element-components" id="id244">Element components</a></p></li>
<li><p><a class="reference internal" href="#readeroptions" id="id245">ReaderOptions</a></p></li>
<li><p><a class="reference internal" href="#commonstate" id="id246">CommonState</a></p></li>
<li><p><a class="reference internal" href="#list" id="id247">List</a></p></li>
<li><p><a class="reference internal" href="#logmessage" id="id248">LogMessage</a></p></li>
<li><p><a class="reference internal" href="#simpletable" id="id249">SimpleTable</a></p></li>
<li><p><a class="reference internal" href="#version" id="id250">Version</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-text" id="id251">Module text</a></p></li>
<li><p><a class="reference internal" href="#module-pandoc" id="id252">Module pandoc</a></p>
<ul>
<li><p><a class="reference internal" href="#id136" id="id253">Pandoc</a></p></li>
<li><p><a class="reference internal" href="#id137" id="id254">Meta</a></p></li>
<li><p><a class="reference internal" href="#id138" id="id255">MetaValue</a></p></li>
<li><p><a class="reference internal" href="#blocks" id="id256">Blocks</a></p></li>
<li><p><a class="reference internal" href="#id139" id="id257">Inline</a></p></li>
<li><p><a class="reference internal" href="#element-components-1" id="id258">Element components</a></p></li>
<li><p><a class="reference internal" href="#legacy-types" id="id259">Legacy types</a></p></li>
<li><p><a class="reference internal" href="#constants" id="id260">Constants</a></p></li>
<li><p><a class="reference internal" href="#helper-functions" id="id261">Helper functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-pandoc-utils" id="id262">Module pandoc.utils</a></p></li>
<li><p><a class="reference internal" href="#module-pandoc-mediabag" id="id263">Module pandoc.mediabag</a></p></li>
<li><p><a class="reference internal" href="#module-pandoc-list" id="id264">Module pandoc.List</a></p>
<ul>
<li><p><a class="reference internal" href="#constructor" id="id265">Constructor</a></p></li>
<li><p><a class="reference internal" href="#metamethods" id="id266">Metamethods</a></p></li>
<li><p><a class="reference internal" href="#methods" id="id267">Methods</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-pandoc-system" id="id268">Module pandoc.system</a></p>
<ul>
<li><p><a class="reference internal" href="#static-fields" id="id269">Static Fields</a></p></li>
<li><p><a class="reference internal" href="#functions" id="id270">Functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-pandoc-types" id="id271">Module pandoc.types</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id216">Introduction</a><a class="headerlink" href="#introduction" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Pandoc has long supported filters, which allow the pandoc abstract
syntax tree (AST) to be manipulated between the parsing and the writing
phase. <a class="reference external" href="https://pandoc.org/filters.html">Traditional pandoc filters</a> accept a JSON representation of the
pandoc AST and produce an altered JSON representation of the AST. They
may be written in any programming language, and invoked from pandoc
using the <code class="docutils literal notranslate"><span class="pre">--filter</span></code> option.</p>
<p>Although traditional filters are very flexible, they have a couple of
disadvantages. First, there is some overhead in writing JSON to stdout
and reading it from stdin (twice, once on each side of the filter).
Second, whether a filter will work will depend on details of the user’s
environment. A filter may require an interpreter for a certain
programming language to be available, as well as a library for
manipulating the pandoc AST in JSON form. One cannot simply provide a
filter that can be used by anyone who has a certain version of the
pandoc executable.</p>
<p>Starting with version 2.0, pandoc makes it possible to write filters in
Lua without any external dependencies at all. A Lua interpreter (version
5.3) and a Lua library for creating pandoc filters is built into the
pandoc executable. Pandoc data types are marshaled to Lua directly,
avoiding the overhead of writing JSON to stdout and reading it from
stdin.</p>
<p>Here is an example of a Lua filter that converts strong emphasis to
small caps:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">return</span> <span class="p">{</span>
  <span class="p">{</span>
    <span class="n">Strong</span> <span class="o">=</span> <span class="kr">function</span> <span class="p">(</span><span class="n">elem</span><span class="p">)</span>
      <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">SmallCaps</span><span class="p">(</span><span class="n">elem</span><span class="p">.</span><span class="n">c</span><span class="p">)</span>
    <span class="kr">end</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>or equivalently,</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">function</span> <span class="nf">Strong</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">SmallCaps</span><span class="p">(</span><span class="n">elem</span><span class="p">.</span><span class="n">c</span><span class="p">)</span>
<span class="kr">end</span>
</pre></div>
</div>
<p>This says: walk the AST, and when you find a Strong element, replace it
with a SmallCaps element with the same content.</p>
<p>To run it, save it in a file, say <code class="docutils literal notranslate"><span class="pre">smallcaps.lua</span></code>, and invoke pandoc
with <code class="docutils literal notranslate"><span class="pre">--lua-filter=smallcaps.lua</span></code>.</p>
<p>Here’s a quick performance comparison, converting the pandoc manual
(MANUAL.txt) to HTML, with versions of the same JSON filter written in
compiled Haskell (<code class="docutils literal notranslate"><span class="pre">smallcaps</span></code>) and interpreted Python
(<code class="docutils literal notranslate"><span class="pre">smallcaps.py</span></code>):</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 89%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Time</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pandoc</span></code></p></td>
<td><p>1.01s</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pandoc</span> <span class="pre">--filter</span> <span class="pre">./smallcaps</span></code></p></td>
<td><p>1.36s</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pandoc</span> <span class="pre">--filter</span> <span class="pre">./smallcaps.py</span></code></p></td>
<td><p>1.40s</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pandoc</span> <span class="pre">--lua-filter</span> <span class="pre">./smallcaps.lua</span></code></p></td>
<td><p>1.03s</p></td>
</tr>
</tbody>
</table>
<p>As you can see, the Lua filter avoids the substantial overhead
associated with marshaling to and from JSON over a pipe.</p>
</div>
<div class="section" id="lua-filter-structure">
<h2><a class="toc-backref" href="#id217">Lua filter structure</a><a class="headerlink" href="#lua-filter-structure" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Lua filters are tables with element names as keys and values consisting
of functions acting on those elements.</p>
<p>Filters are expected to be put into separate files and are passed via
the <code class="docutils literal notranslate"><span class="pre">--lua-filter</span></code> command-line argument. For example, if a filter is
defined in a file <code class="docutils literal notranslate"><span class="pre">current-date.lua</span></code>, then it would be applied like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pandoc</span> <span class="o">--</span><span class="n">lua</span><span class="o">-</span><span class="nb">filter</span><span class="o">=</span><span class="n">current</span><span class="o">-</span><span class="n">date</span><span class="o">.</span><span class="n">lua</span> <span class="o">-</span><span class="n">f</span> <span class="n">markdown</span> <span class="n">MANUAL</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--lua-filter</span></code> option may be supplied multiple times. Pandoc
applies all filters (including JSON filters specified via <code class="docutils literal notranslate"><span class="pre">--filter</span></code>
and Lua filters specified via <code class="docutils literal notranslate"><span class="pre">--lua-filter</span></code>) in the order they appear
on the command line.</p>
<p>Pandoc expects each Lua file to return a list of filters. The filters in
that list are called sequentially, each on the result of the previous
filter. If there is no value returned by the filter script, then pandoc
will try to generate a single filter by collecting all top-level
functions whose names correspond to those of pandoc elements (e.g.,
<code class="docutils literal notranslate"><span class="pre">Str</span></code>, <code class="docutils literal notranslate"><span class="pre">Para</span></code>, <code class="docutils literal notranslate"><span class="pre">Meta</span></code>, or <code class="docutils literal notranslate"><span class="pre">Pandoc</span></code>). (That is why the two
examples above are equivalent.)</p>
<p>For each filter, the document is traversed and each element subjected to
the filter. Elements for which the filter contains an entry (i.e. a
function of the same name) are passed to Lua element filtering function.
In other words, filter entries will be called for each corresponding
element in the document, getting the respective element as input.</p>
<p>The return of a filter function must one of the following:</p>
<ul class="simple">
<li><p>nil: this means that the object should remain unchanged.</p></li>
<li><p>a pandoc object: this must be of the same type as the input and will
replace the original object.</p></li>
<li><p>a list of pandoc objects: these will replace the original object; the
list is merged with the neighbors of the original objects (spliced
into the list the original object belongs to); returning an empty
list deletes the object.</p></li>
</ul>
<p>The function’s output must result in an element of the same type as the
input. This means a filter function acting on an inline element must
return either nil, an inline, or a list of inlines, and a function
filtering a block element must return one of nil, a block, or a list of
block elements. Pandoc will throw an error if this condition is
violated.</p>
<p>If there is no function matching the element’s node type, then the
filtering system will look for a more general fallback function. Two
fallback functions are supported, <code class="docutils literal notranslate"><span class="pre">Inline</span></code> and <code class="docutils literal notranslate"><span class="pre">Block</span></code>. Each matches
elements of the respective type.</p>
<p>Elements without matching functions are left untouched.</p>
<p>See <a class="reference external" href="#module-pandoc">module documentation</a> for a list of pandoc elements.</p>
<div class="section" id="filters-on-element-sequences">
<h3><a class="toc-backref" href="#id218">Filters on element sequences</a><a class="headerlink" href="#filters-on-element-sequences" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>For some filtering tasks, it is necessary to know the order in which
elements occur in the document. It is not enough then to inspect a
single element at a time.</p>
<p>There are two special function names, which can be used to define
filters on lists of blocks or lists of inlines.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Inlines</span> <span class="pre">(inlines)</span></code></dt><dd><p>If present in a filter, this function will be called on all lists of
inline elements, like the content of a <a class="reference external" href="#type-para">Para</a> (paragraph) block, or
the description of an <a class="reference external" href="#type-image">Image</a>. The <code class="docutils literal notranslate"><span class="pre">inlines</span></code> argument passed to
the function will be a <a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a> for each call.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Blocks</span> <span class="pre">(blocks)</span></code></dt><dd><p>If present in a filter, this function will be called on all lists of
block elements, like the content of a <a class="reference external" href="#type-metablocks">MetaBlocks</a> meta element
block, on each item of a list, and the main content of the <a class="reference external" href="#type-pandoc">Pandoc</a>
document. The <code class="docutils literal notranslate"><span class="pre">blocks</span></code> argument passed to the function will be a
<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-block">Blocks</a> for each call.</p>
</dd>
</dl>
<p>These filter functions are special in that the result must either be
nil, in which case the list is left unchanged, or must be a list of the
correct type, i.e., the same type as the input argument. Single elements
are <strong>not</strong> allowed as return values, as a single element in this
context usually hints at a bug.</p>
<p>See <a class="reference external" href="#remove-spaces-before-citations">“Remove spaces before normal citations”</a> for an example.</p>
<p>This functionality has been added in pandoc 2.9.2.</p>
</div>
<div class="section" id="execution-order">
<h3><a class="toc-backref" href="#id219">Execution Order</a><a class="headerlink" href="#execution-order" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Element filter functions within a filter set are called in a fixed
order, skipping any which are not present:</p>
<ol class="arabic simple">
<li><p>functions for <a class="reference external" href="#type-inline">Inline elements</a>,</p></li>
<li><p>the <a href="#id2"><span class="problematic" id="id3">``</span></a><a href="#id272"><span class="problematic" id="id273">`Inlines```_</span></a> filter function,</p></li>
<li><p>functions for <a class="reference external" href="#type-block">Block elements</a> ,</p></li>
<li><p>the <a href="#id4"><span class="problematic" id="id5">``</span></a><a href="#id274"><span class="problematic" id="id275">`Blocks```_</span></a> filter function,</p></li>
<li><p>the <a href="#id6"><span class="problematic" id="id7">``</span></a><a href="#id276"><span class="problematic" id="id277">`Meta```_</span></a> filter function, and last</p></li>
<li><p>the <a href="#id8"><span class="problematic" id="id9">``</span></a><a href="#id278"><span class="problematic" id="id279">`Pandoc```_</span></a> filter function.</p></li>
</ol>
<p>It is still possible to force a different order by explicitly returning
multiple filter sets. For example, if the filter for <em>Meta</em> is to be run
before that for <em>Str</em>, one can write</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- ... filter definitions ...</span>

<span class="kr">return</span> <span class="p">{</span>
  <span class="p">{</span> <span class="n">Meta</span> <span class="o">=</span> <span class="n">Meta</span> <span class="p">},</span>  <span class="c1">-- (1)</span>
  <span class="p">{</span> <span class="n">Str</span> <span class="o">=</span> <span class="n">Str</span> <span class="p">}</span>     <span class="c1">-- (2)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Filter sets are applied in the order in which they are returned. All
functions in set (1) are thus run before those in (2), causing the
filter function for <em>Meta</em> to be run before the filtering of <em>Str</em>
elements is started.</p>
</div>
<div class="section" id="global-variables">
<h3><a class="toc-backref" href="#id220">Global variables</a><a class="headerlink" href="#global-variables" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Pandoc passes additional data to Lua filters by setting global
variables.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">FORMAT</span></code></dt><dd><p>The global <code class="docutils literal notranslate"><span class="pre">FORMAT</span></code> is set to the format of the pandoc writer being
used (<code class="docutils literal notranslate"><span class="pre">html5</span></code>, <code class="docutils literal notranslate"><span class="pre">latex</span></code>, etc.), so the behavior of a filter can be
made conditional on the eventual output format.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PANDOC_READER_OPTIONS</span></code></dt><dd><p>Table of the options which were provided to the parser.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PANDOC_VERSION</span></code></dt><dd><p>Contains the pandoc version as a <a class="reference external" href="#type-version">Version</a> object which behaves like
a numerically indexed table, most significant number first. E.g., for
pandoc 2.7.3, the value of the variable is equivalent to a table
<code class="docutils literal notranslate"><span class="pre">{2,</span> <span class="pre">7,</span> <span class="pre">3}</span></code>. Use <code class="docutils literal notranslate"><span class="pre">tostring(PANDOC_VERSION)</span></code> to produce a version
string. This variable is also set in custom writers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PANDOC_API_VERSION</span></code></dt><dd><p>Contains the version of the pandoc-types API against which pandoc was
compiled. It is given as a numerically indexed table, most
significant number first. E.g., if pandoc was compiled against
pandoc-types 1.17.3, then the value of the variable will behave like
the table <code class="docutils literal notranslate"><span class="pre">{1,</span> <span class="pre">17,</span> <span class="pre">3}</span></code>. Use <code class="docutils literal notranslate"><span class="pre">tostring(PANDOC_API_VERSION)</span></code> to
produce a version string. This variable is also set in custom
writers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PANDOC_SCRIPT_FILE</span></code></dt><dd><p>The name used to involve the filter. This value can be used to find
files relative to the script file. This variable is also set in
custom writers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">PANDOC_STATE</span></code></dt><dd><p>The state shared by all readers and writers. It is used by pandoc to
collect and pass information. The value of this variable is of type
<a class="reference external" href="#type-commonstate">CommonState</a> and is read-only.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="pandoc-module">
<h2><a class="toc-backref" href="#id221">Pandoc Module</a><a class="headerlink" href="#pandoc-module" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">pandoc</span></code> Lua module is loaded into the filter’s Lua environment
and provides a set of functions and constants to make creation and
manipulation of elements easier. The global variable <code class="docutils literal notranslate"><span class="pre">pandoc</span></code> is bound
to the module and should generally not be overwritten for this reason.</p>
<p>Two major functionalities are provided by the module: element creator
functions and access to some of pandoc’s main functionalities.</p>
<div class="section" id="element-creation">
<h3><a class="toc-backref" href="#id222">Element creation</a><a class="headerlink" href="#element-creation" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Element creator functions like <code class="docutils literal notranslate"><span class="pre">Str</span></code>, <code class="docutils literal notranslate"><span class="pre">Para</span></code>, and <code class="docutils literal notranslate"><span class="pre">Pandoc</span></code> are
designed to allow easy creation of new elements that are simple to use
and can be read back from the Lua environment. Internally, pandoc uses
these functions to create the Lua objects which are passed to element
filter functions. This means that elements created via this module will
behave exactly as those elements accessible through the filter function
parameter.</p>
</div>
<div class="section" id="exposed-pandoc-functionality">
<h3><a class="toc-backref" href="#id223">Exposed pandoc functionality</a><a class="headerlink" href="#exposed-pandoc-functionality" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Some pandoc functions have been made available in Lua:</p>
<ul class="simple">
<li><p><a href="#id10"><span class="problematic" id="id11">``</span></a><a href="#id280"><span class="problematic" id="id281">`walk_block```_</span></a> and <a href="#id12"><span class="problematic" id="id13">``</span></a><a href="#id282"><span class="problematic" id="id283">`walk_inline```_</span></a> allow filters to be applied
inside specific block or inline elements;</p></li>
<li><p><a href="#id14"><span class="problematic" id="id15">``</span></a><a href="#id284"><span class="problematic" id="id285">`read```_</span></a> allows filters to parse strings into pandoc documents;</p></li>
<li><p><a href="#id16"><span class="problematic" id="id17">``</span></a><a href="#id286"><span class="problematic" id="id287">`pipe```_</span></a> runs an external command with input from and output to
strings;</p></li>
<li><p>the <a href="#id18"><span class="problematic" id="id19">``</span></a><a href="#id288"><span class="problematic" id="id289">`pandoc.mediabag```_</span></a> module allows access to the “mediabag,”
which stores binary content such as images that may be included in
the final document;</p></li>
<li><p>the <a href="#id20"><span class="problematic" id="id21">``</span></a><a href="#id290"><span class="problematic" id="id291">`pandoc.utils```_</span></a> module contains various utility functions.</p></li>
</ul>
</div>
</div>
<div class="section" id="lua-interpreter-initialization">
<h2><a class="toc-backref" href="#id224">Lua interpreter initialization</a><a class="headerlink" href="#lua-interpreter-initialization" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Initialization of pandoc’s Lua interpreter can be controlled by placing
a file <code class="docutils literal notranslate"><span class="pre">init.lua</span></code> in pandoc’s data directory. A common use-case would
be to load additional modules, or even to alter default modules.</p>
<p>The following snippet is an example of code that might be useful when
added to <code class="docutils literal notranslate"><span class="pre">init.lua</span></code>. The snippet adds all Unicode-aware functions
defined in the <code class="docutils literal notranslate"><span class="pre">`text</span></code> module`_ to the default <code class="docutils literal notranslate"><span class="pre">string</span></code> module,
prefixed with the string <code class="docutils literal notranslate"><span class="pre">uc_</span></code>.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">fn</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="nb">require</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span> <span class="kr">do</span>
  <span class="n">string</span><span class="p">[</span><span class="s1">&#39;uc_&#39;</span> <span class="o">..</span> <span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">fn</span>
<span class="kr">end</span>
</pre></div>
</div>
<p>This makes it possible to apply these functions on strings using colon
syntax (<code class="docutils literal notranslate"><span class="pre">mystring:uc_upper()</span></code>).</p>
</div>
<div class="section" id="debugging-lua-filters">
<h2><a class="toc-backref" href="#id225">Debugging Lua filters</a><a class="headerlink" href="#debugging-lua-filters" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>It is possible to use a debugging interface to halt execution and step
through a Lua filter line by line as it is run inside Pandoc. This is
accomplished using the remote-debugging interface of the package
<a href="#id22"><span class="problematic" id="id23">``</span></a><a href="#id292"><span class="problematic" id="id293">`mobdebug```_</span></a>. Although mobdebug can be run from the terminal, it is
more useful run within the donation-ware Lua editor and IDE,
<a class="reference external" href="https://studio.zerobrane.com/">ZeroBrane</a>. ZeroBrane offers a REPL console and UI to step-through and
view all variables and state.</p>
<p>If you already have Lua 5.3 installed, you can add
<code class="docutils literal notranslate"><span class="pre">`mobdebug</span></code> &lt;<a class="reference external" href="https://luarocks.org/modules/paulclinger/mobdebug">https://luarocks.org/modules/paulclinger/mobdebug</a>&gt;`__ and
its dependency <code class="docutils literal notranslate"><span class="pre">`luasocket```_</span> <span class="pre">using</span> <span class="pre">```luarocks```_,</span> <span class="pre">which</span> <span class="pre">should</span> <span class="pre">then</span>
<span class="pre">be</span> <span class="pre">available</span> <span class="pre">on</span> <span class="pre">the</span> <span class="pre">path.</span> <span class="pre">ZeroBrane</span> <span class="pre">also</span> <span class="pre">includes</span> <span class="pre">both</span> <span class="pre">of</span> <span class="pre">these</span> <span class="pre">in</span> <span class="pre">its</span>
<span class="pre">package,</span> <span class="pre">so</span> <span class="pre">if</span> <span class="pre">you</span> <span class="pre">don’t</span> <span class="pre">want</span> <span class="pre">to</span> <span class="pre">install</span> <span class="pre">Lua</span> <span class="pre">separately,</span> <span class="pre">you</span> <span class="pre">should</span>
<span class="pre">add/modify</span> <span class="pre">your</span> <span class="pre">``LUA_PATH</span></code> and <code class="docutils literal notranslate"><span class="pre">LUA_CPATH</span></code> to include the correct
locations; <a class="reference external" href="https://studio.zerobrane.com/doc-remote-debugging">see detailed instructions here</a>.</p>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id226">Examples</a><a class="headerlink" href="#examples" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The following filters are presented as examples. A repository of useful
Lua filters (which may also serve as good examples) is available at
<a class="reference external" href="https://github.com/pandoc/lua-filters">https://github.com/pandoc/lua-filters</a>.</p>
<div class="section" id="macro-substitution">
<h3><a class="toc-backref" href="#id227">Macro substitution</a><a class="headerlink" href="#macro-substitution" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>The following filter converts the string <code class="docutils literal notranslate"><span class="pre">{{helloworld}}</span></code> into
emphasized text “Hello, World”.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">return</span> <span class="p">{</span>
  <span class="p">{</span>
    <span class="n">Str</span> <span class="o">=</span> <span class="kr">function</span> <span class="p">(</span><span class="n">elem</span><span class="p">)</span>
      <span class="kr">if</span> <span class="n">elem</span><span class="p">.</span><span class="n">text</span> <span class="o">==</span> <span class="s2">&quot;{{helloworld}}&quot;</span> <span class="kr">then</span>
        <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Emph</span> <span class="p">{</span><span class="n">pandoc</span><span class="p">.</span><span class="n">Str</span> <span class="s2">&quot;Hello, World&quot;</span><span class="p">}</span>
      <span class="kr">else</span>
        <span class="kr">return</span> <span class="n">elem</span>
      <span class="kr">end</span>
    <span class="kr">end</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="center-images-in-latex-and-html-output">
<h3><a class="toc-backref" href="#id228">Center images in LaTeX and HTML output</a><a class="headerlink" href="#center-images-in-latex-and-html-output" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>For LaTeX, wrap an image in LaTeX snippets which cause the image to be
centered horizontally. In HTML, the image element’s style attribute is
used to achieve centering.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Filter images with this function if the target format is LaTeX.</span>
<span class="kr">if</span> <span class="n">FORMAT</span><span class="p">:</span><span class="n">match</span> <span class="s1">&#39;latex&#39;</span> <span class="kr">then</span>
  <span class="kr">function</span> <span class="nf">Image</span> <span class="p">(</span><span class="n">elem</span><span class="p">)</span>
    <span class="c1">-- Surround all images with image-centering raw LaTeX.</span>
    <span class="kr">return</span> <span class="p">{</span>
      <span class="n">pandoc</span><span class="p">.</span><span class="n">RawInline</span><span class="p">(</span><span class="s1">&#39;latex&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">hfill</span><span class="se">\\</span><span class="s1">break{</span><span class="se">\\</span><span class="s1">centering&#39;</span><span class="p">),</span>
      <span class="n">elem</span><span class="p">,</span>
      <span class="n">pandoc</span><span class="p">.</span><span class="n">RawInline</span><span class="p">(</span><span class="s1">&#39;latex&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">par}&#39;</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="c1">-- Filter images with this function if the target format is HTML</span>
<span class="kr">if</span> <span class="n">FORMAT</span><span class="p">:</span><span class="n">match</span> <span class="s1">&#39;html&#39;</span> <span class="kr">then</span>
  <span class="kr">function</span> <span class="nf">Image</span> <span class="p">(</span><span class="n">elem</span><span class="p">)</span>
    <span class="c1">-- Use CSS style to center image</span>
    <span class="n">elem</span><span class="p">.</span><span class="n">attributes</span><span class="p">.</span><span class="n">style</span> <span class="o">=</span> <span class="s1">&#39;margin:auto; display: block;&#39;</span>
    <span class="kr">return</span> <span class="n">elem</span>
  <span class="kr">end</span>
<span class="kr">end</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-the-date-in-the-metadata">
<h3><a class="toc-backref" href="#id229">Setting the date in the metadata</a><a class="headerlink" href="#setting-the-date-in-the-metadata" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>This filter sets the date in the document’s metadata to the current
date, if a date isn’t already set:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">function</span> <span class="nf">Meta</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">m</span><span class="p">.</span><span class="n">date</span> <span class="o">==</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="n">m</span><span class="p">.</span><span class="n">date</span> <span class="o">=</span> <span class="nb">os.date</span><span class="p">(</span><span class="s2">&quot;%B %e, %Y&quot;</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">m</span>
  <span class="kr">end</span>
<span class="kr">end</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-spaces-before-citations">
<h3><a class="toc-backref" href="#id230">Remove spaces before citations</a><a class="headerlink" href="#remove-spaces-before-citations" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>This filter removes all spaces preceding an “author-in-text” citation.
In Markdown, author-in-text citations (e.g., <code class="docutils literal notranslate"><span class="pre">&#64;citekey</span></code>), must be
preceded by a space. If these spaces are undesired, they must be removed
with a filter.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="kr">function</span> <span class="nf">is_space_before_author_in_text</span><span class="p">(</span><span class="n">spc</span><span class="p">,</span> <span class="n">cite</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">spc</span> <span class="ow">and</span> <span class="n">spc</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s1">&#39;Space&#39;</span>
    <span class="ow">and</span> <span class="n">cite</span> <span class="ow">and</span> <span class="n">cite</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s1">&#39;Cite&#39;</span>
    <span class="c1">-- there must be only a single citation, and it must have</span>
    <span class="c1">-- mode &#39;AuthorInText&#39;</span>
    <span class="ow">and</span> <span class="o">#</span><span class="n">cite</span><span class="p">.</span><span class="n">citations</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="ow">and</span> <span class="n">cite</span><span class="p">.</span><span class="n">citations</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;AuthorInText&#39;</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">Inlines</span> <span class="p">(</span><span class="n">inlines</span><span class="p">)</span>
  <span class="c1">-- Go from end to start to avoid problems with shifting indices.</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="o">#</span><span class="n">inlines</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="kr">do</span>
    <span class="kr">if</span> <span class="n">is_space_before_author_in_text</span><span class="p">(</span><span class="n">inlines</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">inlines</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="kr">then</span>
      <span class="n">inlines</span><span class="p">:</span><span class="n">remove</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="kr">end</span>
  <span class="kr">end</span>
  <span class="kr">return</span> <span class="n">inlines</span>
<span class="kr">end</span>
</pre></div>
</div>
</div>
<div class="section" id="replacing-placeholders-with-their-metadata-value">
<h3><a class="toc-backref" href="#id231">Replacing placeholders with their metadata value</a><a class="headerlink" href="#replacing-placeholders-with-their-metadata-value" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Lua filter functions are run in the order</p>
<blockquote>
<div><p><em>Inlines → Blocks → Meta → Pandoc</em>.</p>
</div></blockquote>
<p>Passing information from a higher level (e.g., metadata) to a lower
level (e.g., inlines) is still possible by using two filters living in
the same file:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">vars</span> <span class="o">=</span> <span class="p">{}</span>

<span class="kr">function</span> <span class="nf">get_vars</span> <span class="p">(</span><span class="n">meta</span><span class="p">)</span>
  <span class="kr">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">meta</span><span class="p">)</span> <span class="kr">do</span>
    <span class="kr">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;table&#39;</span> <span class="ow">and</span> <span class="n">v</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s1">&#39;MetaInlines&#39;</span> <span class="kr">then</span>
      <span class="n">vars</span><span class="p">[</span><span class="s2">&quot;%&quot;</span> <span class="o">..</span> <span class="n">k</span> <span class="o">..</span> <span class="s2">&quot;%&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="nb">table.unpack</span><span class="p">(</span><span class="n">v</span><span class="p">)}</span>
    <span class="kr">end</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">replace</span> <span class="p">(</span><span class="n">el</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">vars</span><span class="p">[</span><span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">]</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Span</span><span class="p">(</span><span class="n">vars</span><span class="p">[</span><span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">])</span>
  <span class="kr">else</span>
    <span class="kr">return</span> <span class="n">el</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="kr">return</span> <span class="p">{{</span><span class="n">Meta</span> <span class="o">=</span> <span class="n">get_vars</span><span class="p">},</span> <span class="p">{</span><span class="n">Str</span> <span class="o">=</span> <span class="n">replace</span><span class="p">}}</span>
</pre></div>
</div>
<p>If the contents of file <code class="docutils literal notranslate"><span class="pre">occupations.md</span></code> is</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>---
name: Samuel Q. Smith
occupation: Professor of Phrenology
---

Name

:   %name%

Occupation

:   %occupation%
</pre></div>
</div>
<p>then running <code class="docutils literal notranslate"><span class="pre">pandoc</span> <span class="pre">--lua-filter=meta-vars.lua</span> <span class="pre">occupations.md</span></code> will
output:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Samuel Q. Smith<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Occupation<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Professor of Phrenology<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="modifying-pandocs-manual-txt-for-man-pages">
<h3><a class="toc-backref" href="#id232">Modifying pandoc’s <code class="docutils literal notranslate"><span class="pre">MANUAL.txt</span></code> for man pages</a><a class="headerlink" href="#modifying-pandocs-manual-txt-for-man-pages" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>This is the filter we use when converting <code class="docutils literal notranslate"><span class="pre">MANUAL.txt</span></code> to man pages.
It converts level-1 headers to uppercase (using <code class="docutils literal notranslate"><span class="pre">walk_block</span></code> to
transform inline elements inside headers), removes footnotes, and
replaces links with regular text.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- we use preloaded text to get a UTF-8 aware &#39;upper&#39; function</span>
<span class="kd">local</span> <span class="n">text</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">)</span>

<span class="kr">function</span> <span class="nf">Header</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="kr">if</span> <span class="n">el</span><span class="p">.</span><span class="n">level</span> <span class="o">==</span> <span class="mi">1</span> <span class="kr">then</span>
      <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">walk_block</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="p">{</span>
        <span class="n">Str</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
            <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Str</span><span class="p">(</span><span class="n">text</span><span class="p">.</span><span class="n">upper</span><span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">))</span>
        <span class="kr">end</span> <span class="p">})</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">Link</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">el</span><span class="p">.</span><span class="n">content</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">Note</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="kr">return</span> <span class="p">{}</span>
<span class="kr">end</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-a-handout-from-a-paper">
<h3><a class="toc-backref" href="#id233">Creating a handout from a paper</a><a class="headerlink" href="#creating-a-handout-from-a-paper" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>This filter extracts all the numbered examples, section headers, block
quotes, and figures from a document, in addition to any divs with class
<code class="docutils literal notranslate"><span class="pre">handout</span></code>. (Note that only blocks at the “outer level” are included;
this ignores blocks inside nested constructs, like list items.)</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- creates a handout from an article, using its headings,</span>
<span class="c1">-- blockquotes, numbered examples, figures, and any</span>
<span class="c1">-- Divs with class &quot;handout&quot;</span>

<span class="kr">function</span> <span class="nf">Pandoc</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">hblocks</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="kr">for</span> <span class="n">i</span><span class="p">,</span><span class="n">el</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">doc</span><span class="p">.</span><span class="n">blocks</span><span class="p">)</span> <span class="kr">do</span>
        <span class="kr">if</span> <span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;Div&quot;</span> <span class="ow">and</span> <span class="n">el</span><span class="p">.</span><span class="n">classes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;handout&quot;</span><span class="p">)</span> <span class="ow">or</span>
           <span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;BlockQuote&quot;</span><span class="p">)</span> <span class="ow">or</span>
           <span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;OrderedList&quot;</span> <span class="ow">and</span> <span class="n">el</span><span class="p">.</span><span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;Example&quot;</span><span class="p">)</span> <span class="ow">or</span>
           <span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;Para&quot;</span> <span class="ow">and</span> <span class="o">#</span><span class="n">el</span><span class="p">.</span><span class="n">c</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">el</span><span class="p">.</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;Image&quot;</span><span class="p">)</span> <span class="ow">or</span>
           <span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;Header&quot;</span><span class="p">)</span> <span class="kr">then</span>
           <span class="nb">table.insert</span><span class="p">(</span><span class="n">hblocks</span><span class="p">,</span> <span class="n">el</span><span class="p">)</span>
        <span class="kr">end</span>
    <span class="kr">end</span>
    <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Pandoc</span><span class="p">(</span><span class="n">hblocks</span><span class="p">,</span> <span class="n">doc</span><span class="p">.</span><span class="n">meta</span><span class="p">)</span>
<span class="kr">end</span>
</pre></div>
</div>
</div>
<div class="section" id="counting-words-in-a-document">
<h3><a class="toc-backref" href="#id234">Counting words in a document</a><a class="headerlink" href="#counting-words-in-a-document" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>This filter counts the words in the body of a document (omitting
metadata like titles and abstracts), including words in code. It should
be more accurate than <code class="docutils literal notranslate"><span class="pre">wc</span> <span class="pre">-w</span></code> run directly on a Markdown document,
since the latter will count markup characters, like the <code class="docutils literal notranslate"><span class="pre">#</span></code> in front
of an ATX header, or tags in HTML documents, as words. To run it,
<code class="docutils literal notranslate"><span class="pre">pandoc</span> <span class="pre">--lua-filter</span> <span class="pre">wordcount.lua</span> <span class="pre">myfile.md</span></code>.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- counts words in a document</span>

<span class="n">words</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">wordcount</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">Str</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="c1">-- we don&#39;t count a word if it&#39;s entirely punctuation:</span>
    <span class="kr">if</span> <span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">:</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;%P&quot;</span><span class="p">)</span> <span class="kr">then</span>
        <span class="n">words</span> <span class="o">=</span> <span class="n">words</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="kr">end</span>
  <span class="kr">end</span><span class="p">,</span>

  <span class="n">Code</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="n">_</span><span class="p">,</span><span class="n">n</span> <span class="o">=</span> <span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">:</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot;%S+&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">words</span> <span class="o">+</span> <span class="n">n</span>
  <span class="kr">end</span><span class="p">,</span>

  <span class="n">CodeBlock</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="n">_</span><span class="p">,</span><span class="n">n</span> <span class="o">=</span> <span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">:</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot;%S+&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">words</span> <span class="o">+</span> <span class="n">n</span>
  <span class="kr">end</span>
<span class="p">}</span>

<span class="kr">function</span> <span class="nf">Pandoc</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
    <span class="c1">-- skip metadata, just count body:</span>
    <span class="n">pandoc</span><span class="p">.</span><span class="n">walk_block</span><span class="p">(</span><span class="n">pandoc</span><span class="p">.</span><span class="n">Div</span><span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">blocks</span><span class="p">),</span> <span class="n">wordcount</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">words</span> <span class="o">..</span> <span class="s2">&quot; words in body&quot;</span><span class="p">)</span>
    <span class="nb">os.exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="kr">end</span>
</pre></div>
</div>
</div>
<div class="section" id="converting-abc-code-to-music-notation">
<h3><a class="toc-backref" href="#id235">Converting ABC code to music notation</a><a class="headerlink" href="#converting-abc-code-to-music-notation" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>This filter replaces code blocks with class <code class="docutils literal notranslate"><span class="pre">abc</span></code> with images created
by running their contents through <code class="docutils literal notranslate"><span class="pre">abcm2ps</span></code> and ImageMagick’s
<code class="docutils literal notranslate"><span class="pre">convert</span></code>. (For more on ABC notation, see <a class="reference external" href="https://abcnotation.com">https://abcnotation.com</a>.)</p>
<p>Images are added to the mediabag. For output to binary formats, pandoc
will use images in the mediabag. For textual formats, use
<code class="docutils literal notranslate"><span class="pre">--extract-media</span></code> to specify a directory where the files in the
mediabag will be written, or (for HTML only) use <code class="docutils literal notranslate"><span class="pre">--self-contained</span></code>.</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Pandoc filter to process code blocks with class &quot;abc&quot; containing</span>
<span class="c1">-- ABC notation into images.</span>
<span class="c1">--</span>
<span class="c1">-- * Assumes that abcm2ps and ImageMagick&#39;s convert are in the path.</span>
<span class="c1">-- * For textual output formats, use --extract-media=abc-images</span>
<span class="c1">-- * For HTML formats, you may alternatively use --self-contained</span>

<span class="kd">local</span> <span class="n">filetypes</span> <span class="o">=</span> <span class="p">{</span> <span class="n">html</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="s2">&quot;image/png&quot;</span><span class="p">}</span>
                  <span class="p">,</span> <span class="n">latex</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;application/pdf&quot;</span><span class="p">}</span>
                  <span class="p">}</span>
<span class="kd">local</span> <span class="n">filetype</span> <span class="o">=</span> <span class="n">filetypes</span><span class="p">[</span><span class="n">FORMAT</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;png&quot;</span>
<span class="kd">local</span> <span class="n">mimetype</span> <span class="o">=</span> <span class="n">filetypes</span><span class="p">[</span><span class="n">FORMAT</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;image/png&quot;</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">abc2eps</span><span class="p">(</span><span class="n">abc</span><span class="p">,</span> <span class="n">filetype</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">eps</span> <span class="o">=</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">pipe</span><span class="p">(</span><span class="s2">&quot;abcm2ps&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;-q&quot;</span><span class="p">,</span> <span class="s2">&quot;-O&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">},</span> <span class="n">abc</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">final</span> <span class="o">=</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">pipe</span><span class="p">(</span><span class="s2">&quot;convert&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">filetype</span> <span class="o">..</span> <span class="s2">&quot;:-&quot;</span><span class="p">},</span> <span class="n">eps</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">final</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nf">CodeBlock</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
    <span class="kr">if</span> <span class="n">block</span><span class="p">.</span><span class="n">classes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;abc&quot;</span> <span class="kr">then</span>
        <span class="kd">local</span> <span class="n">img</span> <span class="o">=</span> <span class="n">abc2eps</span><span class="p">(</span><span class="n">block</span><span class="p">.</span><span class="n">text</span><span class="p">,</span> <span class="n">filetype</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">fname</span> <span class="o">=</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">sha1</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&quot;.&quot;</span> <span class="o">..</span> <span class="n">filetype</span>
        <span class="n">pandoc</span><span class="p">.</span><span class="n">mediabag</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">mimetype</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
        <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Para</span><span class="p">{</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Image</span><span class="p">({</span><span class="n">pandoc</span><span class="p">.</span><span class="n">Str</span><span class="p">(</span><span class="s2">&quot;abc tune&quot;</span><span class="p">)},</span> <span class="n">fname</span><span class="p">)</span> <span class="p">}</span>
    <span class="kr">end</span>
<span class="kr">end</span>
</pre></div>
</div>
</div>
<div class="section" id="building-images-with-tikz">
<h3><a class="toc-backref" href="#id236">Building images with Ti<em>k</em>Z</a><a class="headerlink" href="#building-images-with-tikz" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>This filter converts raw LaTeX Ti<em>k</em>Z environments into images. It
works with both PDF and HTML output. The Ti<em>k</em>Z code is compiled to
an image using <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>, and the image is converted from pdf to svg
format using <a href="#id24"><span class="problematic" id="id25">``</span></a><a href="#id294"><span class="problematic" id="id295">`pdf2svg```_</span></a>, so both of these must be in the system
path. Converted images are cached in the working directory and given
filenames based on a hash of the source, so that they need not be
regenerated each time the document is built. (A more sophisticated
version of this might put these in a special cache directory.)</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">system</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;pandoc.system&#39;</span>

<span class="kd">local</span> <span class="n">tikz_doc_template</span> <span class="o">=</span> <span class="s">[[</span>
<span class="s">\documentclass{standalone}</span>
<span class="s">\usepackage{xcolor}</span>
<span class="s">\usepackage{tikz}</span>
<span class="s">\begin{document}</span>
<span class="s">\nopagecolor</span>
<span class="s">%s</span>
<span class="s">\end{document}</span>
<span class="s">]]</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">tikz2image</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">filetype</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
  <span class="n">system</span><span class="p">.</span><span class="n">with_temporary_directory</span><span class="p">(</span><span class="s1">&#39;tikz2image&#39;</span><span class="p">,</span> <span class="kr">function</span> <span class="p">(</span><span class="n">tmpdir</span><span class="p">)</span>
    <span class="n">system</span><span class="p">.</span><span class="n">with_working_directory</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="kr">function</span><span class="p">()</span>
      <span class="kd">local</span> <span class="n">f</span> <span class="o">=</span> <span class="nb">io.open</span><span class="p">(</span><span class="s1">&#39;tikz.tex&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
      <span class="n">f</span><span class="p">:</span><span class="n">write</span><span class="p">(</span><span class="n">tikz_doc_template</span><span class="p">:</span><span class="n">format</span><span class="p">(</span><span class="n">src</span><span class="p">))</span>
      <span class="n">f</span><span class="p">:</span><span class="n">close</span><span class="p">()</span>
      <span class="nb">os.execute</span><span class="p">(</span><span class="s1">&#39;pdflatex tikz.tex&#39;</span><span class="p">)</span>
      <span class="kr">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;pdf&#39;</span> <span class="kr">then</span>
        <span class="nb">os.rename</span><span class="p">(</span><span class="s1">&#39;tikz.pdf&#39;</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
      <span class="kr">else</span>
        <span class="nb">os.execute</span><span class="p">(</span><span class="s1">&#39;pdf2svg tikz.pdf &#39;</span> <span class="o">..</span> <span class="n">outfile</span><span class="p">)</span>
      <span class="kr">end</span>
    <span class="kr">end</span><span class="p">)</span>
  <span class="kr">end</span><span class="p">)</span>
<span class="kr">end</span>

<span class="n">extension_for</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;svg&#39;</span><span class="p">,</span>
  <span class="n">html4</span> <span class="o">=</span> <span class="s1">&#39;svg&#39;</span><span class="p">,</span>
  <span class="n">html5</span> <span class="o">=</span> <span class="s1">&#39;svg&#39;</span><span class="p">,</span>
  <span class="n">latex</span> <span class="o">=</span> <span class="s1">&#39;pdf&#39;</span><span class="p">,</span>
  <span class="n">beamer</span> <span class="o">=</span> <span class="s1">&#39;pdf&#39;</span> <span class="p">}</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">file_exists</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">f</span> <span class="o">=</span> <span class="nb">io.open</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">f</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="nb">io.close</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="kr">return</span> <span class="kc">true</span>
  <span class="kr">else</span>
    <span class="kr">return</span> <span class="kc">false</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">starts_with</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">str</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">str</span><span class="p">:</span><span class="n">sub</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">#</span><span class="n">start</span><span class="p">)</span> <span class="o">==</span> <span class="n">start</span>
<span class="kr">end</span>


<span class="kr">function</span> <span class="nf">RawBlock</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">starts_with</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">begin{tikzpicture}&#39;</span><span class="p">,</span> <span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">)</span> <span class="kr">then</span>
    <span class="kd">local</span> <span class="n">filetype</span> <span class="o">=</span> <span class="n">extension_for</span><span class="p">[</span><span class="n">FORMAT</span><span class="p">]</span> <span class="ow">or</span> <span class="s1">&#39;svg&#39;</span>
    <span class="kd">local</span> <span class="n">fname</span> <span class="o">=</span> <span class="n">system</span><span class="p">.</span><span class="n">get_working_directory</span><span class="p">()</span> <span class="o">..</span> <span class="s1">&#39;/&#39;</span> <span class="o">..</span>
        <span class="n">pandoc</span><span class="p">.</span><span class="n">sha1</span><span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">)</span> <span class="o">..</span> <span class="s1">&#39;.&#39;</span> <span class="o">..</span> <span class="n">filetype</span>
    <span class="kr">if</span> <span class="ow">not</span> <span class="n">file_exists</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="kr">then</span>
      <span class="n">tikz2image</span><span class="p">(</span><span class="n">el</span><span class="p">.</span><span class="n">text</span><span class="p">,</span> <span class="n">filetype</span><span class="p">,</span> <span class="n">fname</span><span class="p">)</span>
    <span class="kr">end</span>
    <span class="kr">return</span> <span class="n">pandoc</span><span class="p">.</span><span class="n">Para</span><span class="p">({</span><span class="n">pandoc</span><span class="p">.</span><span class="n">Image</span><span class="p">({},</span> <span class="n">fname</span><span class="p">)})</span>
  <span class="kr">else</span>
   <span class="kr">return</span> <span class="n">el</span>
  <span class="kr">end</span>
<span class="kr">end</span>
</pre></div>
</div>
<p>Example of use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pandoc --lua-filter tikz.lua -s -o cycle.html &lt;&lt;EOF
Here is a diagram of the cycle:

\begin{tikzpicture}

\def \n {5}
\def \radius {3cm}
\def \margin {8} % margin in angles, depends on the radius

\foreach \s in {1,...,\n}
{
  \node[draw, circle] at ({360/\n * (\s - 1)}:\radius) {$\s$};
  \draw[-&gt;, &gt;=latex] ({360/\n * (\s - 1)+\margin}:\radius)
    arc ({360/\n * (\s - 1)+\margin}:{360/\n * (\s)-\margin}:\radius);
}
\end{tikzpicture}
EOF
</pre></div>
</div>
</div>
</div>
<div class="section" id="lua-type-reference">
<h2><a class="toc-backref" href="#id237">Lua type reference</a><a class="headerlink" href="#lua-type-reference" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>This section describes the types of objects available to Lua filters.
See the <a class="reference external" href="#module-pandoc">pandoc module</a> for functions to create these objects.</p>
<div class="section" id="shared-properties">
<h3><a class="toc-backref" href="#id238">Shared Properties</a><a class="headerlink" href="#shared-properties" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="clone">
<h4><code class="docutils literal notranslate"><span class="pre">clone</span></code><a class="headerlink" href="#clone" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">clone</span> <span class="pre">()</span></code></p>
<p>All instances of the types listed here, with the exception of read-only
objects, can be cloned via the <code class="docutils literal notranslate"><span class="pre">clone()</span></code> method.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">emph</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Emph</span> <span class="p">{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;important&#39;</span><span class="p">}</span>
<span class="n">local</span> <span class="n">cloned_emph</span> <span class="o">=</span> <span class="n">emph</span><span class="p">:</span><span class="n">clone</span><span class="p">()</span>  <span class="o">--</span> <span class="n">note</span> <span class="n">the</span> <span class="n">colon</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pandoc">
<span id="type-pandoc"></span><h3><a class="toc-backref" href="#id239">Pandoc</a><a class="headerlink" href="#pandoc" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Pandoc document</p>
<p>Values of this type can be created with the <a href="#id26"><span class="problematic" id="id27">``</span></a><a href="#id296"><span class="problematic" id="id297">`pandoc.Pandoc```_</span></a>
constructor. Object equality is determined via
<a href="#id28"><span class="problematic" id="id29">``</span></a><a href="#id298"><span class="problematic" id="id299">`pandoc.utils.equals```_</span></a>.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">blocks</span></code></dt><dd><p>document content (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-block">Blocks</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">meta</span></code></dt><dd><p>document meta information (<a class="reference external" href="#type-meta">Meta</a> object)</p>
</dd>
</dl>
</div>
<div class="section" id="meta">
<span id="type-meta"></span><h3><a class="toc-backref" href="#id240">Meta</a><a class="headerlink" href="#meta" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Meta information on a document; string-indexed collection of
<a class="reference external" href="#type-metavalue">MetaValues</a>.</p>
<p>Values of this type can be created with the <a href="#id30"><span class="problematic" id="id31">``</span></a><a href="#id300"><span class="problematic" id="id301">`pandoc.Meta```_</span></a>
constructor. Object equality is determined via
<a href="#id32"><span class="problematic" id="id33">``</span></a><a href="#id302"><span class="problematic" id="id303">`pandoc.utils.equals```_</span></a>.</p>
</div>
<div class="section" id="metavalue">
<span id="type-metavalue"></span><h3><a class="toc-backref" href="#id241">MetaValue</a><a class="headerlink" href="#metavalue" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Document meta information items.</p>
<p>Object equality is determined via <a href="#id34"><span class="problematic" id="id35">``</span></a><a href="#id304"><span class="problematic" id="id305">`pandoc.utils.equals```_</span></a>.</p>
<div class="section" id="metablocks">
<span id="type-metablocks"></span><h4>MetaBlocks<a class="headerlink" href="#metablocks" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A list of blocks usable as meta value (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-block">Blocks</a>).</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">MetaBlocks</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="metabool">
<span id="type-metabool"></span><h4>MetaBool<a class="headerlink" href="#metabool" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Alias for Lua boolean, i.e. the values <code class="docutils literal notranslate"><span class="pre">true</span></code> and <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</div>
<div class="section" id="metainlines">
<span id="type-metainlines"></span><h4>MetaInlines<a class="headerlink" href="#metainlines" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>List of inlines used in metadata (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
<p>Values of this type can be created with the <a href="#id36"><span class="problematic" id="id37">``</span></a><a href="#id306"><span class="problematic" id="id307">`pandoc.MetaInlines```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">MetaInlines</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="metalist">
<span id="type-metalist"></span><h4>MetaList<a class="headerlink" href="#metalist" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A list of other metadata values (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-metavalue">MetaValues</a>).</p>
<p>Values of this type can be created with the <a href="#id38"><span class="problematic" id="id39">``</span></a><a href="#id308"><span class="problematic" id="id309">`pandoc.MetaList```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">MetaList</span></code> (string)</p>
</dd>
</dl>
<p>All methods available for <a class="reference external" href="#type-list">List</a>s can be used on this type as well.</p>
</div>
<div class="section" id="metamap">
<span id="type-metamap"></span><h4>MetaMap<a class="headerlink" href="#metamap" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A string-indexed map of meta-values. (table).</p>
<p>Values of this type can be created with the <a href="#id40"><span class="problematic" id="id41">``</span></a><a href="#id310"><span class="problematic" id="id311">`pandoc.MetaMap```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">MetaMap</span></code> (string)</p>
</dd>
</dl>
<p><em>Note</em>: The fields will be shadowed if the map contains a field with the
same name as those listed.</p>
</div>
<div class="section" id="metastring">
<span id="type-metastring"></span><h4>MetaString<a class="headerlink" href="#metastring" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Plain Lua string value (string).</p>
</div>
</div>
<div class="section" id="block">
<span id="type-block"></span><h3><a class="toc-backref" href="#id242">Block</a><a class="headerlink" href="#block" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Object equality is determined via <a href="#id42"><span class="problematic" id="id43">``</span></a><a href="#id312"><span class="problematic" id="id313">`pandoc.utils.equals```_</span></a>.</p>
<div class="section" id="blockquote">
<span id="type-blockquote"></span><h4>BlockQuote<a class="headerlink" href="#blockquote" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A block quote element.</p>
<p>Values of this type can be created with the <a href="#id44"><span class="problematic" id="id45">``</span></a><a href="#id314"><span class="problematic" id="id315">`pandoc.BlockQuote```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>block content (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-block">Blocks</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">BlockQuote</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="bulletlist">
<span id="type-bulletlist"></span><h4>BulletList<a class="headerlink" href="#bulletlist" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A bullet list.</p>
<p>Values of this type can be created with the <a href="#id46"><span class="problematic" id="id47">``</span></a><a href="#id316"><span class="problematic" id="id317">`pandoc.BulletList```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>list items (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-block">Blocks</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">BulletList</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="codeblock">
<span id="type-codeblock"></span><h4>CodeBlock<a class="headerlink" href="#codeblock" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Block of code.</p>
<p>Values of this type can be created with the <a href="#id48"><span class="problematic" id="id49">``</span></a><a href="#id318"><span class="problematic" id="id319">`pandoc.CodeBlock```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>code string (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>element attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a class="reference external" href="#type-list">List</a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">CodeBlock</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="definitionlist">
<span id="type-definitionlist"></span><h4>DefinitionList<a class="headerlink" href="#definitionlist" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Definition list, containing terms and their explanation.</p>
<p>Values of this type can be created with the <a href="#id50"><span class="problematic" id="id51">``</span></a><a href="#id320"><span class="problematic" id="id321">`pandoc.DefinitionList```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>list of items</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">DefinitionList</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="div">
<span id="type-div"></span><h4>Div<a class="headerlink" href="#div" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Generic block container with attributes.</p>
<p>Values of this type can be created with the <a href="#id52"><span class="problematic" id="id53">``</span></a><a href="#id322"><span class="problematic" id="id323">`pandoc.Div```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>block content (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-block">Blocks</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>element attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a class="reference external" href="#type-list">List</a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Div</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="header">
<span id="type-header"></span><h4>Header<a class="headerlink" href="#header" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Creates a header element.</p>
<p>Values of this type can be created with the <a href="#id54"><span class="problematic" id="id55">``</span></a><a href="#id324"><span class="problematic" id="id325">`pandoc.Header```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">level</span></code></dt><dd><p>header level (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>element attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a class="reference external" href="#type-list">List</a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Header</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="horizontalrule">
<span id="type-horizontalrule"></span><h4>HorizontalRule<a class="headerlink" href="#horizontalrule" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A horizontal rule.</p>
<p>Values of this type can be created with the <a href="#id56"><span class="problematic" id="id57">``</span></a><a href="#id326"><span class="problematic" id="id327">`pandoc.HorizontalRule```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">HorizontalRule</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="lineblock">
<span id="type-lineblock"></span><h4>LineBlock<a class="headerlink" href="#lineblock" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A line block, i.e. a list of lines, each separated from the next by a
newline.</p>
<p>Values of this type can be created with the <a href="#id58"><span class="problematic" id="id59">``</span></a><a href="#id328"><span class="problematic" id="id329">`pandoc.LineBlock```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">LineBlock</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="null">
<span id="type-null"></span><h4>Null<a class="headerlink" href="#null" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A null element; this element never produces any output in the target
format.</p>
<p>Values of this type can be created with the <a href="#id60"><span class="problematic" id="id61">``</span></a><a href="#id330"><span class="problematic" id="id331">`pandoc.Null```_</span></a>
constructor.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Null</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="orderedlist">
<span id="type-orderedlist"></span><h4>OrderedList<a class="headerlink" href="#orderedlist" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>An ordered list.</p>
<p>Values of this type can be created with the <a href="#id62"><span class="problematic" id="id63">``</span></a><a href="#id332"><span class="problematic" id="id333">`pandoc.OrderedList```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>list items (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-block">Blocks</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">listAttributes</span></code></dt><dd><p>list parameters (<a class="reference external" href="#type-listattributes">ListAttributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">start</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">listAttributes.start</span></code> (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">style</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">listAttributes.style</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">delimiter</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">listAttributes.delimiter</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">OrderedList</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="para">
<span id="type-para"></span><h4>Para<a class="headerlink" href="#para" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A paragraph.</p>
<p>Values of this type can be created with the <a href="#id64"><span class="problematic" id="id65">``</span></a><a href="#id334"><span class="problematic" id="id335">`pandoc.Para```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Para</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="plain">
<span id="type-plain"></span><h4>Plain<a class="headerlink" href="#plain" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Plain text, not a paragraph.</p>
<p>Values of this type can be created with the <a href="#id66"><span class="problematic" id="id67">``</span></a><a href="#id336"><span class="problematic" id="id337">`pandoc.Plain```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Plain</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="rawblock">
<span id="type-rawblock"></span><h4>RawBlock<a class="headerlink" href="#rawblock" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Raw content of a specified format.</p>
<p>Values of this type can be created with the <a href="#id68"><span class="problematic" id="id69">``</span></a><a href="#id338"><span class="problematic" id="id339">`pandoc.RawBlock```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code></dt><dd><p>format of content (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>raw content (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">RawBlock</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="table">
<span id="type-table"></span><h4>Table<a class="headerlink" href="#table" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A table.</p>
<p>Values of this type can be created with the <a href="#id70"><span class="problematic" id="id71">``</span></a><a href="#id340"><span class="problematic" id="id341">`pandoc.Table```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>table attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">caption</span></code></dt><dd><p>table caption (<a class="reference external" href="#type-caption">Caption</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">colspecs</span></code></dt><dd><p>column specifications, i.e., alignments and widths (<a class="reference external" href="#type-list">List</a> of
<a class="reference external" href="#type-colspec">ColSpec</a>s)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">head</span></code></dt><dd><p>table head (<a class="reference external" href="#type-tablehead">TableHead</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bodies</span></code></dt><dd><p>table bodies (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-tablebody">TableBody</a>s)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">foot</span></code></dt><dd><p>table foot (<a class="reference external" href="#type-tablefoot">TableFoot</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a class="reference external" href="#type-list">List</a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Table</span></code> (string)</p>
</dd>
</dl>
<p>A table cell is a list of blocks.</p>
<p><em>Alignment</em> is a string value indicating the horizontal alignment of a
table column. <code class="docutils literal notranslate"><span class="pre">AlignLeft</span></code>, <code class="docutils literal notranslate"><span class="pre">AlignRight</span></code>, and <code class="docutils literal notranslate"><span class="pre">AlignCenter</span></code> leads
cell content to be left-aligned, right-aligned, and centered,
respectively. The default alignment is <code class="docutils literal notranslate"><span class="pre">AlignDefault</span></code> (often
equivalent to centered).</p>
</div>
</div>
<div class="section" id="inline">
<span id="type-inline"></span><h3><a class="toc-backref" href="#id243">Inline</a><a class="headerlink" href="#inline" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Object equality is determined via <a href="#id72"><span class="problematic" id="id73">``</span></a><a href="#id342"><span class="problematic" id="id343">`pandoc.utils.equals```_</span></a>.</p>
<div class="section" id="cite">
<span id="type-cite"></span><h4>Cite<a class="headerlink" href="#cite" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Citation.</p>
<p>Values of this type can be created with the <a href="#id74"><span class="problematic" id="id75">``</span></a><a href="#id344"><span class="problematic" id="id345">`pandoc.Cite```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>(<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">citations</span></code></dt><dd><p>citation entries (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-citation">Citations</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Cite</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="code">
<span id="type-code"></span><h4>Code<a class="headerlink" href="#code" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Inline code</p>
<p>Values of this type can be created with the <a href="#id76"><span class="problematic" id="id77">``</span></a><a href="#id346"><span class="problematic" id="id347">`pandoc.Code```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>code string (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a class="reference external" href="#type-list">List</a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Code</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="emph">
<span id="type-emph"></span><h4>Emph<a class="headerlink" href="#emph" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Emphasized text</p>
<p>Values of this type can be created with the <a href="#id78"><span class="problematic" id="id79">``</span></a><a href="#id348"><span class="problematic" id="id349">`pandoc.Emph```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Emph</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="image">
<span id="type-image"></span><h4>Image<a class="headerlink" href="#image" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Image: alt text (list of inlines), target</p>
<p>Values of this type can be created with the <a href="#id80"><span class="problematic" id="id81">``</span></a><a href="#id350"><span class="problematic" id="id351">`pandoc.Image```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">caption</span></code></dt><dd><p>text used to describe the image (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">src</span></code></dt><dd><p>path to the image file (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">title</span></code></dt><dd><p>brief image description</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a class="reference external" href="#type-list">List</a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Image</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="linebreak">
<span id="type-linebreak"></span><h4>LineBreak<a class="headerlink" href="#linebreak" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Hard line break</p>
<p>Values of this type can be created with the <a href="#id82"><span class="problematic" id="id83">``</span></a><a href="#id352"><span class="problematic" id="id353">`pandoc.LineBreak```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">LineBreak</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="link">
<span id="type-link"></span><h4>Link<a class="headerlink" href="#link" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Hyperlink: alt text (list of inlines), target</p>
<p>Values of this type can be created with the <a href="#id84"><span class="problematic" id="id85">``</span></a><a href="#id354"><span class="problematic" id="id355">`pandoc.Link```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>text for this link (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target</span></code></dt><dd><p>the link target (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">title</span></code></dt><dd><p>brief link description</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a class="reference external" href="#type-list">List</a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Link</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="math">
<span id="type-math"></span><h4>Math<a class="headerlink" href="#math" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>TeX math (literal)</p>
<p>Values of this type can be created with the <a href="#id86"><span class="problematic" id="id87">``</span></a><a href="#id356"><span class="problematic" id="id357">`pandoc.Math```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">mathtype</span></code></dt><dd><p>specifier determining whether the math content should be shown inline
(<code class="docutils literal notranslate"><span class="pre">InlineMath</span></code>) or on a separate line (<code class="docutils literal notranslate"><span class="pre">DisplayMath</span></code>) (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>math content (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Math</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="note">
<span id="type-note"></span><h4>Note<a class="headerlink" href="#note" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Footnote or endnote</p>
<p>Values of this type can be created with the <a href="#id88"><span class="problematic" id="id89">``</span></a><a href="#id358"><span class="problematic" id="id359">`pandoc.Note```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>(<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-block">Blocks</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Note</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="quoted">
<span id="type-quoted"></span><h4>Quoted<a class="headerlink" href="#quoted" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Quoted text</p>
<p>Values of this type can be created with the <a href="#id90"><span class="problematic" id="id91">``</span></a><a href="#id360"><span class="problematic" id="id361">`pandoc.Quoted```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">quotetype</span></code></dt><dd><p>type of quotes to be used; one of <code class="docutils literal notranslate"><span class="pre">SingleQuote</span></code> or <code class="docutils literal notranslate"><span class="pre">DoubleQuote</span></code>
(string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>quoted text (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Quoted</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="rawinline">
<span id="type-rawinline"></span><h4>RawInline<a class="headerlink" href="#rawinline" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Raw inline</p>
<p>Values of this type can be created with the <a href="#id92"><span class="problematic" id="id93">``</span></a><a href="#id362"><span class="problematic" id="id363">`pandoc.RawInline```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code></dt><dd><p>the format of the content (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>raw content (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">RawInline</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="smallcaps">
<span id="type-smallcaps"></span><h4>SmallCaps<a class="headerlink" href="#smallcaps" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Small caps text</p>
<p>Values of this type can be created with the <a href="#id94"><span class="problematic" id="id95">``</span></a><a href="#id364"><span class="problematic" id="id365">`pandoc.SmallCaps```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>(<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">SmallCaps</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="softbreak">
<span id="type-softbreak"></span><h4>SoftBreak<a class="headerlink" href="#softbreak" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Soft line break</p>
<p>Values of this type can be created with the <a href="#id96"><span class="problematic" id="id97">``</span></a><a href="#id366"><span class="problematic" id="id367">`pandoc.SoftBreak```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">SoftBreak</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="space">
<span id="type-space"></span><h4>Space<a class="headerlink" href="#space" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Inter-word space</p>
<p>Values of this type can be created with the <a href="#id98"><span class="problematic" id="id99">``</span></a><a href="#id368"><span class="problematic" id="id369">`pandoc.Space```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Space</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="span">
<span id="type-span"></span><h4>Span<a class="headerlink" href="#span" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Generic inline container with attributes</p>
<p>Values of this type can be created with the <a href="#id100"><span class="problematic" id="id101">``</span></a><a href="#id370"><span class="problematic" id="id371">`pandoc.Span```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>wrapped content (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.identifier</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.classes</span></code> (<a class="reference external" href="#type-list">List</a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>alias for <code class="docutils literal notranslate"><span class="pre">attr.attributes</span></code> (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Span</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="str">
<span id="type-str"></span><h4>Str<a class="headerlink" href="#str" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Text</p>
<p>Values of this type can be created with the <a href="#id102"><span class="problematic" id="id103">``</span></a><a href="#id372"><span class="problematic" id="id373">`pandoc.Str```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>content (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Str</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="strikeout">
<span id="type-strikeout"></span><h4>Strikeout<a class="headerlink" href="#strikeout" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Strikeout text</p>
<p>Values of this type can be created with the <a href="#id104"><span class="problematic" id="id105">``</span></a><a href="#id374"><span class="problematic" id="id375">`pandoc.Strikeout```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Strikeout</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="strong">
<span id="type-strong"></span><h4>Strong<a class="headerlink" href="#strong" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Strongly emphasized text</p>
<p>Values of this type can be created with the <a href="#id106"><span class="problematic" id="id107">``</span></a><a href="#id376"><span class="problematic" id="id377">`pandoc.Strong```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Strong</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="subscript">
<span id="type-subscript"></span><h4>Subscript<a class="headerlink" href="#subscript" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Subscripted text</p>
<p>Values of this type can be created with the <a href="#id108"><span class="problematic" id="id109">``</span></a><a href="#id378"><span class="problematic" id="id379">`pandoc.Subscript```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Subscript</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="superscript">
<span id="type-superscript"></span><h4>Superscript<a class="headerlink" href="#superscript" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Superscripted text</p>
<p>Values of this type can be created with the <a href="#id110"><span class="problematic" id="id111">``</span></a><a href="#id380"><span class="problematic" id="id381">`pandoc.Superscript```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Superscript</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="underline">
<span id="type-underline"></span><h4>Underline<a class="headerlink" href="#underline" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Underlined text</p>
<p>Values of this type can be created with the <a href="#id112"><span class="problematic" id="id113">``</span></a><a href="#id382"><span class="problematic" id="id383">`pandoc.Underline```_</span></a>
constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code></dt><dd><p>inline content (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code></dt><dd><p>the literal <code class="docutils literal notranslate"><span class="pre">Underline</span></code> (string)</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="element-components">
<h3><a class="toc-backref" href="#id244">Element components</a><a class="headerlink" href="#element-components" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="attr">
<span id="type-attr"></span><h4>Attr<a class="headerlink" href="#attr" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A set of element attributes. Values of this type can be created with the
<a href="#id114"><span class="problematic" id="id115">``</span></a><a href="#id384"><span class="problematic" id="id385">`pandoc.Attr```_</span></a> constructor. For convenience, it is usually not
necessary to construct the value directly if it is part of an element,
and it is sufficient to pass an HTML-like table. E.g., to create a span
with identifier “text” and classes “a” and “b”, on can write:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>local span = pandoc.Span(&#39;text&#39;, {id = &#39;text&#39;, class = &#39;a b&#39;})
</pre></div>
</div>
<p>This also works when using the <code class="docutils literal notranslate"><span class="pre">attr</span></code> setter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>local span = pandoc.Span &#39;text&#39;
span.attr = {id = &#39;text&#39;, class = &#39;a b&#39;, other_attribute = &#39;1&#39;}
</pre></div>
</div>
<p>Object equality is determined via <a href="#id116"><span class="problematic" id="id117">``</span></a><a href="#id386"><span class="problematic" id="id387">`pandoc.utils.equals```_</span></a>.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code></dt><dd><p>element identifier (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code></dt><dd><p>element classes (<a class="reference external" href="#type-list">List</a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code></dt><dd><p>collection of key/value pairs (<a class="reference external" href="#type-attributes">Attributes</a>)</p>
</dd>
</dl>
</div>
<div class="section" id="attributes">
<span id="type-attributes"></span><h4>Attributes<a class="headerlink" href="#attributes" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>List of key/value pairs. Values can be accessed by using keys as indices
to the list table.</p>
</div>
<div class="section" id="caption">
<span id="type-caption"></span><h4>Caption<a class="headerlink" href="#caption" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The caption of a table, with an optional short caption.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">long</span></code></dt><dd><p>long caption (list of <a class="reference external" href="#type-block">Blocks</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">short</span></code></dt><dd><p>short caption (list of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
</dl>
</div>
<div class="section" id="cell">
<span id="type-cell"></span><h4>Cell<a class="headerlink" href="#cell" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A table cell.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>cell attributes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">alignment</span></code></dt><dd><p>individual cell alignment (<a class="reference external" href="#type-alignment">Alignment</a>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">contents</span></code></dt><dd><p>cell contents (list of <a class="reference external" href="#type-block">Blocks</a>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">col_span</span></code></dt><dd><p>number of columns occupied by the cell; the height of the cell
(integer).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">row_span</span></code></dt><dd><p>number of rows occupied by the cell; the height of the cell
(integer).</p>
</dd>
</dl>
</div>
<div class="section" id="citation">
<span id="type-citation"></span><h4>Citation<a class="headerlink" href="#citation" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Single citation entry</p>
<p>Values of this type can be created with the <a href="#id118"><span class="problematic" id="id119">``</span></a><a href="#id388"><span class="problematic" id="id389">`pandoc.Citation```_</span></a>
constructor.</p>
<p>Object equality is determined via <a href="#id120"><span class="problematic" id="id121">``</span></a><a href="#id390"><span class="problematic" id="id391">`pandoc.utils.equals```_</span></a>.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code></dt><dd><p>citation identifier, e.g., a bibtex key (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code></dt><dd><p>citation mode, one of <code class="docutils literal notranslate"><span class="pre">AuthorInText</span></code>, <code class="docutils literal notranslate"><span class="pre">SuppressAuthor</span></code>, or
<code class="docutils literal notranslate"><span class="pre">NormalCitation</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">prefix</span></code></dt><dd><p>citation prefix (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">suffix</span></code></dt><dd><p>citation suffix (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">note_num</span></code></dt><dd><p>note number (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hash</span></code></dt><dd><p>hash (integer)</p>
</dd>
</dl>
</div>
<div class="section" id="colspec">
<span id="type-colspec"></span><h4>ColSpec<a class="headerlink" href="#colspec" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Column alignment and width specification for a single table column.</p>
<p>This is a pair with the following components:</p>
<ol class="arabic simple">
<li><p>cell alignment (<a class="reference external" href="#type-alignment">Alignment</a>).</p></li>
<li><p>table column width, as a fraction of the total table width (number).</p></li>
</ol>
</div>
<div class="section" id="listattributes">
<span id="type-listattributes"></span><h4>ListAttributes<a class="headerlink" href="#listattributes" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>List attributes</p>
<p>Values of this type can be created with the <a href="#id122"><span class="problematic" id="id123">``</span></a><a href="#id392"><span class="problematic" id="id393">`pandoc.ListAttributes```_</span></a>
constructor.</p>
<p>Object equality is determined via <a href="#id124"><span class="problematic" id="id125">``</span></a><a href="#id394"><span class="problematic" id="id395">`pandoc.utils.equals```_</span></a>.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">start</span></code></dt><dd><p>number of the first list item (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">style</span></code></dt><dd><p>style used for list numbers; possible values are <code class="docutils literal notranslate"><span class="pre">DefaultStyle</span></code>,
<code class="docutils literal notranslate"><span class="pre">Example</span></code>, <code class="docutils literal notranslate"><span class="pre">Decimal</span></code>, <code class="docutils literal notranslate"><span class="pre">LowerRoman</span></code>, <code class="docutils literal notranslate"><span class="pre">UpperRoman</span></code>,
<code class="docutils literal notranslate"><span class="pre">LowerAlpha</span></code>, and <code class="docutils literal notranslate"><span class="pre">UpperAlpha</span></code> (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">delimiter</span></code></dt><dd><p>delimiter of list numbers; one of <code class="docutils literal notranslate"><span class="pre">DefaultDelim</span></code>, <code class="docutils literal notranslate"><span class="pre">Period</span></code>,
<code class="docutils literal notranslate"><span class="pre">OneParen</span></code>, and <code class="docutils literal notranslate"><span class="pre">TwoParens</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="row">
<span id="type-row"></span><h4>Row<a class="headerlink" href="#row" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A table row.</p>
<p>Tuple fields:</p>
<ol class="arabic simple">
<li><p>row attributes</p></li>
<li><p>row cells (list of <a class="reference external" href="#type-cell">Cells</a>)</p></li>
</ol>
</div>
<div class="section" id="tablebody">
<span id="type-tablebody"></span><h4>TableBody<a class="headerlink" href="#tablebody" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>A body of a table, with an intermediate head and the specified number of
row header columns.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code></dt><dd><p>table body attributes (<a class="reference external" href="#type-attr">Attr</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">body</span></code></dt><dd><p>table body rows (list of <a class="reference external" href="#type-row">Rows</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">head</span></code></dt><dd><p>intermediate head (list of <a class="reference external" href="#type-row">Rows</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">row_head_columns</span></code></dt><dd><p>number of columns taken up by the row head of each row of a
<a class="reference external" href="#type-tablebody">TableBody</a>. The row body takes up the remaining columns.</p>
</dd>
</dl>
</div>
<div class="section" id="tablefoot">
<span id="type-tablefoot"></span><h4>TableFoot<a class="headerlink" href="#tablefoot" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The foot of a table.</p>
<p>This is a pair with the following components:</p>
<ol class="arabic simple">
<li><p>attributes</p></li>
<li><p>foot rows (<a class="reference external" href="#type-row">Rows</a>)</p></li>
</ol>
</div>
<div class="section" id="tablehead">
<span id="type-tablehead"></span><h4>TableHead<a class="headerlink" href="#tablehead" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The head of a table.</p>
<p>This is a pair with the following components:</p>
<ol class="arabic simple">
<li><p>attributes</p></li>
<li><p>head rows (<a class="reference external" href="#type-row">Rows</a>)</p></li>
</ol>
</div>
</div>
<div class="section" id="readeroptions">
<span id="type-readeroptions"></span><h3><a class="toc-backref" href="#id245">ReaderOptions</a><a class="headerlink" href="#readeroptions" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Pandoc reader options</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">abbreviations</span></code></dt><dd><p>set of known abbreviations (set of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">columns</span></code></dt><dd><p>number of columns in terminal (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">default_image_extension</span></code></dt><dd><p>default extension for images (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extensions</span></code></dt><dd><p>string representation of the syntax extensions bit field (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">indented_code_classes</span></code></dt><dd><p>default classes for indented code blocks (list of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">standalone</span></code></dt><dd><p>whether the input was a standalone document with header (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">strip_comments</span></code></dt><dd><p>HTML comments are stripped instead of parsed as raw HTML (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tab_stop</span></code></dt><dd><p>width (i.e. equivalent number of spaces) of tab stops (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track_changes</span></code></dt><dd><p>track changes setting for docx; one of <code class="docutils literal notranslate"><span class="pre">AcceptChanges</span></code>,
<code class="docutils literal notranslate"><span class="pre">RejectChanges</span></code>, and <code class="docutils literal notranslate"><span class="pre">AllChanges</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="commonstate">
<span id="type-commonstate"></span><h3><a class="toc-backref" href="#id246">CommonState</a><a class="headerlink" href="#commonstate" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>The state used by pandoc to collect information and make it available to
readers and writers.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">input_files</span></code></dt><dd><p>List of input files from command line (<a class="reference external" href="#type-list">List</a> of strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">output_file</span></code></dt><dd><p>Output file from command line (string or nil)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">log</span></code></dt><dd><p>A list of log messages in reverse order (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-logmessage">LogMessage</a>s)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">request_headers</span></code></dt><dd><p>Headers to add for HTTP requests; table with header names as keys and
header contents as value (table)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">resource_path</span></code></dt><dd><p>Path to search for resources like included images (<a class="reference external" href="#type-list">List</a> of
strings)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">source_url</span></code></dt><dd><p>Absolute URL or directory of first source file (string or nil)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">user_data_dir</span></code></dt><dd><p>Directory to search for data files (string or nil)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">trace</span></code></dt><dd><p>Whether tracing messages are issued (boolean)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">verbosity</span></code></dt><dd><p>Verbosity level; one of <code class="docutils literal notranslate"><span class="pre">INFO</span></code>, <code class="docutils literal notranslate"><span class="pre">WARNING</span></code>, <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> (string)</p>
</dd>
</dl>
</div>
<div class="section" id="list">
<span id="type-list"></span><h3><a class="toc-backref" href="#id247">List</a><a class="headerlink" href="#list" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>A list is any Lua table with integer indices. Indices start at one, so
if <code class="docutils literal notranslate"><span class="pre">alist</span> <span class="pre">=</span> <span class="pre">{'value'}</span></code> then <code class="docutils literal notranslate"><span class="pre">alist[1]</span> <span class="pre">==</span> <span class="pre">'value'</span></code>.</p>
<p>Lists, when part of an element, or when generated during marshaling, are
made instances of the <code class="docutils literal notranslate"><span class="pre">pandoc.List</span></code> type for convenience. The
<code class="docutils literal notranslate"><span class="pre">pandoc.List</span></code> type is defined in the <a class="reference external" href="#module-pandoc.list">pandoc.List</a> module. See there
for available methods.</p>
<p>Values of this type can be created with the <a href="#id126"><span class="problematic" id="id127">``</span></a><a href="#id396"><span class="problematic" id="id397">`pandoc.List```_</span></a>
constructor, turning a normal Lua table into a List.</p>
</div>
<div class="section" id="logmessage">
<span id="type-logmessage"></span><h3><a class="toc-backref" href="#id248">LogMessage</a><a class="headerlink" href="#logmessage" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>A pandoc log message. Objects have no fields, but can be converted to a
string via <code class="docutils literal notranslate"><span class="pre">tostring</span></code>.</p>
</div>
<div class="section" id="simpletable">
<span id="type-simpletable"></span><h3><a class="toc-backref" href="#id249">SimpleTable</a><a class="headerlink" href="#simpletable" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>A simple table is a table structure which resembles the old (pre pandoc
2.10) Table type. Bi-directional conversion from and to <a class="reference external" href="#type-table">Tables</a> is
possible with the <a href="#id128"><span class="problematic" id="id129">``</span></a><a href="#id398"><span class="problematic" id="id399">`pandoc.utils.to_simple_table```_</span></a> and
<a href="#id130"><span class="problematic" id="id131">``</span></a><a href="#id400"><span class="problematic" id="id401">`pandoc.utils.from_simple_table```_</span></a> function, respectively. Instances
of this type can also be created directly with the
<a href="#id132"><span class="problematic" id="id133">``</span></a><a href="#id402"><span class="problematic" id="id403">`pandoc.SimpleTable```_</span></a> constructor.</p>
<p>Fields:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">caption</span></code>:</dt><dd><p><a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aligns</span></code>:</dt><dd><p>column alignments (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-alignment">Alignments</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">widths</span></code>:</dt><dd><p>column widths; a (<a class="reference external" href="#type-list">List</a> of numbers)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">headers</span></code>:</dt><dd><p>table header row (<a class="reference external" href="#type-list">List</a> of lists of <a class="reference external" href="#type-block">Blocks</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rows</span></code>:</dt><dd><p>table rows (<a class="reference external" href="#type-list">List</a> of rows, where a row is a list of lists of
<a class="reference external" href="#type-block">Blocks</a>)</p>
</dd>
</dl>
</div>
<div class="section" id="version">
<span id="type-version"></span><h3><a class="toc-backref" href="#id250">Version</a><a class="headerlink" href="#version" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>A version object. This represents a software version like “2.7.3”. The
object behaves like a numerically indexed table, i.e., if <code class="docutils literal notranslate"><span class="pre">version</span></code>
represents the version <code class="docutils literal notranslate"><span class="pre">2.7.3</span></code>, then</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span>
<span class="n">version</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">7</span>
<span class="n">version</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span>
<span class="c1">#version == 3   -- length</span>
</pre></div>
</div>
<p>Comparisons are performed element-wise, i.e.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Version</span> <span class="s1">&#39;1.12&#39;</span> <span class="o">&gt;</span> <span class="n">Version</span> <span class="s1">&#39;1.9&#39;</span>
</pre></div>
</div>
<p>Values of this type can be created with the <a href="#id134"><span class="problematic" id="id135">``</span></a><a href="#id404"><span class="problematic" id="id405">`pandoc.types.Version```_</span></a>
constructor.</p>
<div class="section" id="must-be-at-least">
<h4><code class="docutils literal notranslate"><span class="pre">must_be_at_least</span></code><a class="headerlink" href="#must-be-at-least" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">must_be_at_least(actual,</span> <span class="pre">expected</span> <span class="pre">[,</span> <span class="pre">error_message])</span></code></p>
<p>Raise an error message if the actual version is older than the expected
version; does nothing if actual is equal to or newer than the expected
version.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">actual</span></code></dt><dd><p>actual version specifier (<a class="reference external" href="#type-version">Version</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>minimum expected version (<a class="reference external" href="#type-version">Version</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">error_message</span></code></dt><dd><p>optional error message template. The string is used as format string,
with the expected and actual versions as arguments. Defaults to
<code class="docutils literal notranslate"><span class="pre">&quot;expected</span> <span class="pre">version</span> <span class="pre">%s</span> <span class="pre">or</span> <span class="pre">newer,</span> <span class="pre">got</span> <span class="pre">%s&quot;</span></code>.</p>
</dd>
</dl>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PANDOC_VERSION</span><span class="p">:</span><span class="n">must_be_at_least</span> <span class="s1">&#39;2.7.3&#39;</span>
<span class="n">PANDOC_API_VERSION</span><span class="p">:</span><span class="n">must_be_at_least</span><span class="p">(</span>
  <span class="s1">&#39;1.17.4&#39;</span><span class="p">,</span>
  <span class="s1">&#39;pandoc-types is too old: expected version </span><span class="si">%s</span><span class="s1">, got </span><span class="si">%s</span><span class="s1">&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="module-text">
<h2><a class="toc-backref" href="#id251">Module text</a><a class="headerlink" href="#module-text" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>UTF-8 aware text manipulation functions, implemented in Haskell. The
module is made available as part of the <code class="docutils literal notranslate"><span class="pre">pandoc</span></code> module via
<code class="docutils literal notranslate"><span class="pre">pandoc.text</span></code>. The text module can also be loaded explicitly:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- uppercase all regular text in a document:</span>
<span class="n">text</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;text&#39;</span>
<span class="kr">function</span> <span class="nf">Str</span> <span class="p">(</span><span class="n">s</span><span class="p">)</span>
  <span class="n">s</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="n">upper</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">s</span>
<span class="kr">end</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">lower</span> <span class="pre">(s)</span></code></p>
<p>Returns a copy of a UTF-8 string, converted to lowercase.</p>
<p><code class="docutils literal notranslate"><span class="pre">upper</span> <span class="pre">(s)</span></code></p>
<p>Returns a copy of a UTF-8 string, converted to uppercase.</p>
<p><code class="docutils literal notranslate"><span class="pre">reverse</span> <span class="pre">(s)</span></code></p>
<p>Returns a copy of a UTF-8 string, with characters reversed.</p>
<p><code class="docutils literal notranslate"><span class="pre">len</span> <span class="pre">(s)</span></code></p>
<p>Returns the length of a UTF-8 string.</p>
<p><code class="docutils literal notranslate"><span class="pre">sub</span> <span class="pre">(s)</span></code></p>
<p>Returns a substring of a UTF-8 string, using Lua’s string indexing
rules.</p>
</div>
<div class="section" id="module-pandoc">
<h2><a class="toc-backref" href="#id252">Module pandoc</a><a class="headerlink" href="#module-pandoc" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Lua functions for pandoc scripts; includes constructors for document
tree elements, functions to parse text in a given format, and functions
to filter and modify a subtree.</p>
<div class="section" id="id136">
<h3><a class="toc-backref" href="#id253">Pandoc</a><a class="headerlink" href="#id136" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">Pandoc</span> <span class="pre">(blocks[,</span> <span class="pre">meta])</span></code></dt><dd><p>A complete pandoc document</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">blocks</span></code>:</dt><dd><p>document content</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">meta</span></code>:</dt><dd><p>document meta data</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-pandoc">Pandoc</a> object</p>
</dd>
</dl>
</div>
<div class="section" id="id137">
<h3><a class="toc-backref" href="#id254">Meta</a><a class="headerlink" href="#id137" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">Meta</span> <span class="pre">(table)</span></code></dt><dd><p>Create a new Meta object.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">table</span></code>:</dt><dd><p>table containing document meta information</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-meta">Meta</a> object</p>
</dd>
</dl>
</div>
<div class="section" id="id138">
<h3><a class="toc-backref" href="#id255">MetaValue</a><a class="headerlink" href="#id138" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MetaBlocks</span> <span class="pre">(blocks)</span></code></dt><dd><p>Meta blocks</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">blocks</span></code>:</dt><dd><p>blocks</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-metablocks">MetaBlocks</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MetaInlines</span> <span class="pre">(inlines)</span></code></dt><dd><p>Meta inlines</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">inlines</span></code>:</dt><dd><p>inlines</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-metainlines">MetaInlines</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MetaList</span> <span class="pre">(meta_values)</span></code></dt><dd><p>Meta list</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">meta_values</span></code>:</dt><dd><p>list of meta values</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-metalist">MetaList</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MetaMap</span> <span class="pre">(key_value_map)</span></code></dt><dd><p>Meta map</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">key_value_map</span></code>:</dt><dd><p>a string-indexed map of meta values</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-metamap">MetaMap</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MetaString</span> <span class="pre">(str)</span></code></dt><dd><p>Creates string to be used in meta data.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">str</span></code>:</dt><dd><p>string value</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-metastring">MetaString</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MetaBool</span> <span class="pre">(bool)</span></code></dt><dd><p>Creates boolean to be used in meta data.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">bool</span></code>:</dt><dd><p>boolean value</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-metabool">MetaBool</a> object</p>
</dd>
</dl>
</div>
<div class="section" id="blocks">
<h3><a class="toc-backref" href="#id256">Blocks</a><a class="headerlink" href="#blocks" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">BlockQuote</span> <span class="pre">(content)</span></code></dt><dd><p>Creates a block quote element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>block content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-blockquote">BlockQuote</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">BulletList</span> <span class="pre">(items)</span></code></dt><dd><p>Creates a bullet list.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">items</span></code>:</dt><dd><p>list items</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-bulletlist">BulletList</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">CodeBlock</span> <span class="pre">(text[,</span> <span class="pre">attr])</span></code></dt><dd><p>Creates a code block element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code>:</dt><dd><p>code string</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code>:</dt><dd><p>element attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-codeblock">CodeBlock</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">DefinitionList</span> <span class="pre">(content)</span></code></dt><dd><p>Creates a definition list, containing terms and their explanation.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>list of items</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-definitionlist">DefinitionList</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Div</span> <span class="pre">(content[,</span> <span class="pre">attr])</span></code></dt><dd><p>Creates a div element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>block content</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code>:</dt><dd><p>element attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-div">Div</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Header</span> <span class="pre">(level,</span> <span class="pre">content[,</span> <span class="pre">attr])</span></code></dt><dd><p>Creates a header element.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">level</span></code>:</dt><dd><p>header level</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code>:</dt><dd><p>element attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-header">Header</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">HorizontalRule</span> <span class="pre">()</span></code></dt><dd><p>Creates a horizontal rule.</p>
<p>Returns: <a class="reference external" href="#type-horizontalrule">HorizontalRule</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LineBlock</span> <span class="pre">(content)</span></code></dt><dd><p>Creates a line block element.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-lineblock">LineBlock</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Null</span> <span class="pre">()</span></code></dt><dd><p>Creates a null element.</p>
<p>Returns: <a class="reference external" href="#type-null">Null</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">OrderedList</span> <span class="pre">(items[,</span> <span class="pre">listAttributes])</span></code></dt><dd><p>Creates an ordered list.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">items</span></code>:</dt><dd><p>list items</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">listAttributes</span></code>:</dt><dd><p>list parameters</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-orderedlist">OrderedList</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Para</span> <span class="pre">(content)</span></code></dt><dd><p>Creates a para element.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-para">Para</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Plain</span> <span class="pre">(content)</span></code></dt><dd><p>Creates a plain element.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-plain">Plain</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">RawBlock</span> <span class="pre">(format,</span> <span class="pre">text)</span></code></dt><dd><p>Creates a raw content block of the specified format.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>:</dt><dd><p>format of content</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code>:</dt><dd><p>string content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-rawblock">RawBlock</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Table</span> <span class="pre">(caption,</span> <span class="pre">colspecs,</span> <span class="pre">head,</span> <span class="pre">bodies,</span> <span class="pre">foot[,</span> <span class="pre">attr])</span></code></dt><dd><p>Creates a table element.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">caption</span></code>:</dt><dd><p>table <a class="reference external" href="#type-caption">caption</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">colspecs</span></code>:</dt><dd><p>column alignments and widths (list of <a class="reference external" href="#type-colspec">ColSpec</a>s)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">head</span></code>:</dt><dd><p><a class="reference external" href="#type-tablehead">table head</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bodies</span></code>:</dt><dd><p><a class="reference external" href="#type-tablebody">table bodies</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">foot</span></code>:</dt><dd><p><a class="reference external" href="#type-tablefoot">table foot</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code>:</dt><dd><p>element attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-table">Table</a> object</p>
</dd>
</dl>
</div>
<div class="section" id="id139">
<h3><a class="toc-backref" href="#id257">Inline</a><a class="headerlink" href="#id139" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">Cite</span> <span class="pre">(content,</span> <span class="pre">citations)</span></code></dt><dd><p>Creates a Cite inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>List of inlines</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">citations</span></code>:</dt><dd><p>List of citations</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-cite">Cite</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Code</span> <span class="pre">(text[,</span> <span class="pre">attr])</span></code></dt><dd><p>Creates a Code inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code>:</dt><dd><p>code string</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code>:</dt><dd><p>additional attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-code">Code</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Emph</span> <span class="pre">(content)</span></code></dt><dd><p>Creates an inline element representing emphasized text.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-emph">Emph</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Image</span> <span class="pre">(caption,</span> <span class="pre">src[,</span> <span class="pre">title[,</span> <span class="pre">attr]])</span></code></dt><dd><p>Creates a Image inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">caption</span></code>:</dt><dd><p>text used to describe the image</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">src</span></code>:</dt><dd><p>path to the image file</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">title</span></code>:</dt><dd><p>brief image description</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code>:</dt><dd><p>additional attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-image">Image</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LineBreak</span> <span class="pre">()</span></code></dt><dd><p>Create a LineBreak inline element</p>
<p>Returns: <a class="reference external" href="#type-linebreak">LineBreak</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Link</span> <span class="pre">(content,</span> <span class="pre">target[,</span> <span class="pre">title[,</span> <span class="pre">attr]])</span></code></dt><dd><p>Creates a link inline element, usually a hyperlink.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>text for this link</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target</span></code>:</dt><dd><p>the link target</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">title</span></code>:</dt><dd><p>brief link description</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code>:</dt><dd><p>additional attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-link">Link</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Math</span> <span class="pre">(mathtype,</span> <span class="pre">text)</span></code></dt><dd><p>Creates a Math element, either inline or displayed.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">mathtype</span></code>:</dt><dd><p>rendering specifier</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code>:</dt><dd><p>Math content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-math">Math</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">DisplayMath</span> <span class="pre">(text)</span></code></dt><dd><p>Creates a math element of type “DisplayMath” (DEPRECATED).</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code>:</dt><dd><p>Math content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-math">Math</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">InlineMath</span> <span class="pre">(text)</span></code></dt><dd><p>Creates a math element of type “InlineMath” (DEPRECATED).</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code>:</dt><dd><p>Math content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-math">Math</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Note</span> <span class="pre">(content)</span></code></dt><dd><p>Creates a Note inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>footnote block content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-note">Note</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Quoted</span> <span class="pre">(quotetype,</span> <span class="pre">content)</span></code></dt><dd><p>Creates a Quoted inline element given the quote type and quoted
content.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">quotetype</span></code>:</dt><dd><p>type of quotes to be used</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-quoted">Quoted</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SingleQuoted</span> <span class="pre">(content)</span></code></dt><dd><p>Creates a single-quoted inline element (DEPRECATED).</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-quoted">Quoted</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">DoubleQuoted</span> <span class="pre">(content)</span></code></dt><dd><p>Creates a single-quoted inline element (DEPRECATED).</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-quoted">Quoted</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">RawInline</span> <span class="pre">(format,</span> <span class="pre">text)</span></code></dt><dd><p>Creates a raw inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>:</dt><dd><p>format of the contents</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code>:</dt><dd><p>string content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-rawinline">RawInline</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SmallCaps</span> <span class="pre">(content)</span></code></dt><dd><p>Creates text rendered in small caps</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-smallcaps">SmallCaps</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SoftBreak</span> <span class="pre">()</span></code></dt><dd><p>Creates a SoftBreak inline element.</p>
<p>Returns: <a class="reference external" href="#type-softbreak">SoftBreak</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Space</span> <span class="pre">()</span></code></dt><dd><p>Create a Space inline element</p>
<p>Returns: <a class="reference external" href="#type-space">Space</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Span</span> <span class="pre">(content[,</span> <span class="pre">attr])</span></code></dt><dd><p>Creates a Span inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attr</span></code>:</dt><dd><p>additional attributes</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-span">Span</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Str</span> <span class="pre">(text)</span></code></dt><dd><p>Creates a Str inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code>:</dt><dd><p>content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-str">Str</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Strikeout</span> <span class="pre">(content)</span></code></dt><dd><p>Creates text which is struck out.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-strikeout">Strikeout</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Strong</span> <span class="pre">(content)</span></code></dt><dd><p>Creates a Strong element, whose text is usually displayed in a bold
font.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-strong">Strong</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Subscript</span> <span class="pre">(content)</span></code></dt><dd><p>Creates a Subscript inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-subscript">Subscript</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Superscript</span> <span class="pre">(content)</span></code></dt><dd><p>Creates a Superscript inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-superscript">Superscript</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Underline</span> <span class="pre">(content)</span></code></dt><dd><p>Creates an Underline inline element</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">content</span></code>:</dt><dd><p>inline content</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-underline">Underline</a> object</p>
</dd>
</dl>
</div>
<div class="section" id="element-components-1">
<span id="id140"></span><h3><a class="toc-backref" href="#id258">Element components</a><a class="headerlink" href="#element-components-1" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">Attr</span> <span class="pre">([identifier[,</span> <span class="pre">classes[,</span> <span class="pre">attributes]]])</span></code></dt><dd><p>Create a new set of attributes (Attr).</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">identifier</span></code>:</dt><dd><p>element identifier</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">classes</span></code>:</dt><dd><p>element classes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attributes</span></code>:</dt><dd><p>table containing string keys and values</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-attr">Attr</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Citation</span> <span class="pre">(id,</span> <span class="pre">mode[,</span> <span class="pre">prefix[,</span> <span class="pre">suffix[,</span> <span class="pre">note_num[,</span> <span class="pre">hash]]]])</span></code></dt><dd><p>Creates a single citation.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code>:</dt><dd><p>citation identifier (like a bibtex key)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code>:</dt><dd><p>citation mode</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">prefix</span></code>:</dt><dd><p>citation prefix</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">suffix</span></code>:</dt><dd><p>citation suffix</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">note_num</span></code>:</dt><dd><p>note number</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hash</span></code>:</dt><dd><p>hash number</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-citation">Citation</a> object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ListAttributes</span> <span class="pre">([start[,</span> <span class="pre">style[,</span> <span class="pre">delimiter]]])</span></code></dt><dd><p>Creates a set of list attributes.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">start</span></code>:</dt><dd><p>number of the first list item</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">style</span></code>:</dt><dd><p>style used for list numbering</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">delimiter</span></code>:</dt><dd><p>delimiter of list numbers</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-listattributes">ListAttributes</a> object</p>
</dd>
</dl>
</div>
<div class="section" id="legacy-types">
<h3><a class="toc-backref" href="#id259">Legacy types</a><a class="headerlink" href="#legacy-types" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">SimpleTable</span> <span class="pre">(caption,</span> <span class="pre">aligns,</span> <span class="pre">widths,</span> <span class="pre">headers,</span> <span class="pre">rows)</span></code></dt><dd><p>Creates a simple table resembling the old (pre pandoc 2.10) table
type.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">caption</span></code>:</dt><dd><p><a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">aligns</span></code>:</dt><dd><p>column alignments (<a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-alignment">Alignments</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">widths</span></code>:</dt><dd><p>column widths; a (<a class="reference external" href="#type-list">List</a> of numbers)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">headers</span></code>:</dt><dd><p>table header row (<a class="reference external" href="#type-list">List</a> of lists of <a class="reference external" href="#type-block">Blocks</a>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rows</span></code>:</dt><dd><p>table rows (<a class="reference external" href="#type-list">List</a> of rows, where a row is a list of lists of
<a class="reference external" href="#type-block">Blocks</a>)</p>
</dd>
</dl>
<p>Returns: <a class="reference external" href="#type-simpletable">SimpleTable</a> object</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">caption</span> <span class="o">=</span> <span class="s2">&quot;Overview&quot;</span>
<span class="n">local</span> <span class="n">aligns</span> <span class="o">=</span> <span class="p">{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">AlignDefault</span><span class="p">,</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">AlignDefault</span><span class="p">}</span>
<span class="n">local</span> <span class="n">widths</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span> <span class="o">--</span> <span class="n">let</span> <span class="n">pandoc</span> <span class="n">determine</span> <span class="n">col</span> <span class="n">widths</span>
<span class="n">local</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Language&quot;</span><span class="p">,</span> <span class="s2">&quot;Typing&quot;</span><span class="p">}</span>
<span class="n">local</span> <span class="n">rows</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">{{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Plain</span> <span class="s2">&quot;Haskell&quot;</span><span class="p">},</span> <span class="p">{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Plain</span> <span class="s2">&quot;static&quot;</span><span class="p">}},</span>
  <span class="p">{{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Plain</span> <span class="s2">&quot;Lua&quot;</span><span class="p">},</span> <span class="p">{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Plain</span> <span class="s2">&quot;Dynamic&quot;</span><span class="p">}},</span>
<span class="p">}</span>
<span class="n">simple_table</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">SimpleTable</span><span class="p">(</span>
  <span class="n">caption</span><span class="p">,</span>
  <span class="n">aligns</span><span class="p">,</span>
  <span class="n">widths</span><span class="p">,</span>
  <span class="n">headers</span><span class="p">,</span>
  <span class="n">rows</span>
<span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="constants">
<h3><a class="toc-backref" href="#id260">Constants</a><a class="headerlink" href="#constants" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">AuthorInText</span></code></dt><dd><p>Author name is mentioned in the text.</p>
<p>See also: <a class="reference external" href="#type-citation">Citation</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SuppressAuthor</span></code></dt><dd><p>Author name is suppressed.</p>
<p>See also: <a class="reference external" href="#type-citation">Citation</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">NormalCitation</span></code></dt><dd><p>Default citation style is used.</p>
<p>See also: <a class="reference external" href="#type-citation">Citation</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">AlignLeft</span></code></dt><dd><p>Table cells aligned left.</p>
<p>See also: <a class="reference external" href="#type-alignment">Table</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">AlignRight</span></code></dt><dd><p>Table cells right-aligned.</p>
<p>See also: <a class="reference external" href="#type-alignment">Table</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">AlignCenter</span></code></dt><dd><p>Table cell content is centered.</p>
<p>See also: <a class="reference external" href="#type-alignment">Table</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">AlignDefault</span></code></dt><dd><p>Table cells are alignment is unaltered.</p>
<p>See also: <a class="reference external" href="#type-alignment">Table</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">DefaultDelim</span></code></dt><dd><p>Default list number delimiters are used.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Period</span></code></dt><dd><p>List numbers are delimited by a period.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">OneParen</span></code></dt><dd><p>List numbers are delimited by a single parenthesis.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">TwoParens</span></code></dt><dd><p>List numbers are delimited by a double parentheses.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">DefaultStyle</span></code></dt><dd><p>List are numbered in the default style</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Example</span></code></dt><dd><p>List items are numbered as examples.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Decimal</span></code></dt><dd><p>List are numbered using decimal integers.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LowerRoman</span></code></dt><dd><p>List are numbered using lower-case roman numerals.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">UpperRoman</span></code></dt><dd><p>List are numbered using upper-case roman numerals</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LowerAlpha</span></code></dt><dd><p>List are numbered using lower-case alphabetic characters.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">UpperAlpha</span></code></dt><dd><p>List are numbered using upper-case alphabetic characters.</p>
<p>See also: <a class="reference external" href="#type-listattributes">ListAttributes</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sha1</span></code></dt><dd><p>Alias for <a href="#id141"><span class="problematic" id="id142">``</span></a><a href="#id406"><span class="problematic" id="id407">`pandoc.utils.sha1```_</span></a> (DEPRECATED).</p>
</dd>
</dl>
</div>
<div class="section" id="helper-functions">
<h3><a class="toc-backref" href="#id261">Helper functions</a><a class="headerlink" href="#helper-functions" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="pipe">
<span id="pandoc-pipe"></span><h4>pipe<a class="headerlink" href="#pipe" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pipe</span> <span class="pre">(command,</span> <span class="pre">args,</span> <span class="pre">input)</span></code></p>
<p>Runs command with arguments, passing it some input, and returns the
output.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">command</span></code></dt><dd><p>program to run; the executable will be resolved using default system
methods (string).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">args</span></code></dt><dd><p>list of arguments to pass to the program (list of strings).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">input</span></code></dt><dd><p>data which is piped into the program via stdin (string).</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>Output of command, i.e. data printed to stdout (string)</p></li>
</ul>
<p>Raises:</p>
<ul class="simple">
<li><p>A table containing the keys <code class="docutils literal notranslate"><span class="pre">command</span></code>, <code class="docutils literal notranslate"><span class="pre">error_code</span></code>, and
<code class="docutils literal notranslate"><span class="pre">output</span></code> is thrown if the command exits with a non-zero error code.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">output</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="s2">&quot;sed&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;-e&quot;</span><span class="p">,</span><span class="s2">&quot;s/a/b/&quot;</span><span class="p">},</span> <span class="s2">&quot;abc&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="walk-block">
<span id="pandoc-walk-block"></span><h4>walk_block<a class="headerlink" href="#walk-block" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">walk_block</span> <span class="pre">(element,</span> <span class="pre">filter)</span></code></p>
<p>Apply a filter inside a block element, walking its contents.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">element</span></code>:</dt><dd><p>the block element</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filter</span></code>:</dt><dd><p>a Lua filter (table of functions) to be applied within the block
element</p>
</dd>
</dl>
<p>Returns: the transformed block element</p>
</div>
<div class="section" id="walk-inline">
<span id="pandoc-walk-inline"></span><h4>walk_inline<a class="headerlink" href="#walk-inline" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">walk_inline</span> <span class="pre">(element,</span> <span class="pre">filter)</span></code></p>
<p>Apply a filter inside an inline element, walking its contents.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">element</span></code>:</dt><dd><p>the inline element</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filter</span></code>:</dt><dd><p>a Lua filter (table of functions) to be applied within the inline
element</p>
</dd>
</dl>
<p>Returns: the transformed inline element</p>
</div>
<div class="section" id="read">
<span id="pandoc-read"></span><h4>read<a class="headerlink" href="#read" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">read</span> <span class="pre">(markup[,</span> <span class="pre">format])</span></code></p>
<p>Parse the given string into a Pandoc document.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">markup</span></code>:</dt><dd><p>the markup to be parsed</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code>:</dt><dd><p>format specification, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;markdown&quot;</span></code>.</p>
</dd>
</dl>
<p>Returns: pandoc document</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>local org_markup = &quot;/emphasis/&quot;  -- Input to be read
local document = pandoc.read(org_markup, &quot;org&quot;)
-- Get the first block of the document
local block = document.blocks[1]
-- The inline element in that block is an `Emph`
assert(block.content[1].t == &quot;Emph&quot;)
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="module-pandoc-utils">
<h2><a class="toc-backref" href="#id262">Module pandoc.utils</a><a class="headerlink" href="#module-pandoc-utils" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>This module exposes internal pandoc functions and utility functions.</p>
<p>The module is loaded as part of the <code class="docutils literal notranslate"><span class="pre">pandoc</span></code> module and available as
<code class="docutils literal notranslate"><span class="pre">pandoc.utils</span></code>. In versions up-to and including pandoc 2.6, this
module had to be loaded explicitly. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span> <span class="o">=</span> <span class="n">require</span> <span class="s1">&#39;pandoc.utils&#39;</span>
</pre></div>
</div>
<p>Use the above for backwards compatibility.</p>
<p><code class="docutils literal notranslate"><span class="pre">blocks_to_inlines</span> <span class="pre">(blocks[,</span> <span class="pre">sep])</span></code></p>
<p>Squash a list of blocks into a list of inlines.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">blocks</span></code>:</dt><dd><p>List of <a class="reference external" href="#type-block">Blocks</a> to be flattened.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sep</span></code>:</dt><dd><p>List of <a class="reference external" href="#type-inline">Inlines</a> inserted as separator between two consecutive
blocks; defaults to
<code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">pandoc.Space(),</span> <span class="pre">pandoc.Str'¶',</span> <span class="pre">pandoc.Space()}</span></code>.</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p><a class="reference external" href="#type-list">List</a> of <a class="reference external" href="#type-inline">Inlines</a></p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">blocks</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">pandoc</span><span class="o">.</span><span class="n">Para</span><span class="p">{</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;Paragraph1&#39;</span> <span class="p">},</span>
  <span class="n">pandoc</span><span class="o">.</span><span class="n">Para</span><span class="p">{</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Emph</span> <span class="s1">&#39;Paragraph2&#39;</span> <span class="p">}</span>
<span class="p">}</span>
<span class="n">local</span> <span class="n">inlines</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">blocks_to_inlines</span><span class="p">(</span><span class="n">blocks</span><span class="p">)</span>
<span class="o">--</span> <span class="n">inlines</span> <span class="o">=</span> <span class="p">{</span>
<span class="o">--</span>   <span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;Paragraph1&#39;</span><span class="p">,</span>
<span class="o">--</span>   <span class="n">pandoc</span><span class="o">.</span><span class="n">Space</span><span class="p">(),</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span><span class="s1">&#39;¶&#39;</span><span class="p">,</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Space</span><span class="p">(),</span>
<span class="o">--</span>   <span class="n">pandoc</span><span class="o">.</span><span class="n">Emph</span><span class="p">{</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;Paragraph2&#39;</span> <span class="p">}</span>
<span class="o">--</span> <span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">equals</span> <span class="pre">(element1,</span> <span class="pre">element2)</span></code></p>
<p>Test equality of AST elements. Elements in Lua are considered equal if
and only if the objects obtained by unmarshaling are equal.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">element1</span></code>, <code class="docutils literal notranslate"><span class="pre">element2</span></code>:</dt><dd><p>Objects to be compared. Acceptable input types are <a class="reference external" href="#type-pandoc">Pandoc</a>,
<a class="reference external" href="#type-meta">Meta</a>, <a class="reference external" href="#type-metavalue">MetaValue</a>, <a class="reference external" href="#type-block">Block</a>, <a class="reference external" href="#type-inline">Inline</a>, <a class="reference external" href="#type-attr">Attr</a>,
<a class="reference external" href="#type-listattributes">ListAttributes</a>, and <a class="reference external" href="#type-citation">Citation</a>.</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>Whether the two objects represent the same element (boolean)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">from_simple_table</span> <span class="pre">(table)</span></code></p>
<p>Creates a <a class="reference external" href="#type-table">Table</a> block element from a <a class="reference external" href="#type-simpletable">SimpleTable</a>. This is useful
for dealing with legacy code which was written for pandoc versions older
than 2.10.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>table block element (<a class="reference external" href="#type-table">Table</a>)</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">simple</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">SimpleTable</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="o">--</span> <span class="n">modify</span><span class="p">,</span> <span class="n">using</span> <span class="n">pre</span> <span class="n">pandoc</span> <span class="mf">2.10</span> <span class="n">methods</span>
<span class="n">simple</span><span class="o">.</span><span class="n">caption</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">SmallCaps</span><span class="p">(</span><span class="n">simple</span><span class="o">.</span><span class="n">caption</span><span class="p">)</span>
<span class="o">--</span> <span class="n">create</span> <span class="n">normal</span> <span class="n">table</span> <span class="n">block</span> <span class="n">again</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">from_simple_table</span><span class="p">(</span><span class="n">simple</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">make_sections</span> <span class="pre">(number_sections,</span> <span class="pre">base_level,</span> <span class="pre">blocks)</span></code></p>
<p>Converts list of <a class="reference external" href="#type-block">Blocks</a> into sections. <code class="docutils literal notranslate"><span class="pre">Div</span></code>s will be created
beginning at each <code class="docutils literal notranslate"><span class="pre">Header</span></code> and containing following content until the
next <code class="docutils literal notranslate"><span class="pre">Header</span></code> of comparable level. If <code class="docutils literal notranslate"><span class="pre">number_sections</span></code> is true, a
<code class="docutils literal notranslate"><span class="pre">number</span></code> attribute will be added to each <code class="docutils literal notranslate"><span class="pre">Header</span></code> containing the
section number. If <code class="docutils literal notranslate"><span class="pre">base_level</span></code> is non-null, <code class="docutils literal notranslate"><span class="pre">Header</span></code> levels will be
reorganized so that there are no gaps, and so that the base level is the
level specified.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>List of <a class="reference external" href="#type-block">Blocks</a>.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">blocks</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">pandoc</span><span class="o">.</span><span class="n">Header</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;first&#39;</span><span class="p">),</span>
  <span class="n">pandoc</span><span class="o">.</span><span class="n">Header</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;second&#39;</span><span class="p">),</span>
<span class="p">}</span>
<span class="n">local</span> <span class="n">newblocks</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">make_sections</span><span class="p">(</span><span class="n">true</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">blocks</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">run_json_filter</span> <span class="pre">(doc,</span> <span class="pre">filter[,</span> <span class="pre">args])</span></code></p>
<p>Filter the given doc by passing it through the a JSON filter.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code>:</dt><dd><p>the Pandoc document to filter</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filter</span></code>:</dt><dd><p>filter to run</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">args</span></code>:</dt><dd><p>list of arguments passed to the filter. Defaults to <code class="docutils literal notranslate"><span class="pre">{FORMAT}</span></code>.</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>(<a class="reference external" href="#type-pandoc">Pandoc</a>) Filtered document</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>-- Assumes `some_blocks` contains blocks for which a
-- separate literature section is required.
local sub_doc = pandoc.Pandoc(some_blocks, metadata)
sub_doc_with_bib = pandoc.utils.run_json_filter(
  sub_doc,
  &#39;pandoc-citeproc&#39;
)
some_blocks = sub_doc.blocks -- some blocks with bib
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">normalize_date</span> <span class="pre">(date_string)</span></code></p>
<p>Parse a date and convert (if possible) to “YYYY-MM-DD” format. We limit
years to the range 1601-9999 (ISO 8601 accepts greater than or equal to
1583, but MS Word only accepts dates starting 1601).</p>
<p>Returns:</p>
<ul class="simple">
<li><p>A date string, or nil when the conversion failed.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">sha1</span> <span class="pre">(contents)</span></code></p>
<p>Returns the SHA1 has of the contents.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>SHA1 hash of the contents.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">fp</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">sha1</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">stringify</span> <span class="pre">(element)</span></code></p>
<p>Converts the given element (Pandoc, Meta, Block, or Inline) into a
string with all formatting removed.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>A plain string representation of the given element.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">inline</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">Emph</span><span class="p">{</span><span class="n">pandoc</span><span class="o">.</span><span class="n">Str</span> <span class="s1">&#39;Moin&#39;</span><span class="p">}</span>
<span class="o">--</span> <span class="n">outputs</span> <span class="s2">&quot;Moin&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">inline</span><span class="p">))</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">to_roman_numeral</span> <span class="pre">(integer)</span></code></p>
<p>Converts an integer &lt; 4000 to uppercase roman numeral.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>A roman numeral string.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">to_roman_numeral</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">to_roman_numeral</span>
<span class="n">local</span> <span class="n">pandoc_birth_year</span> <span class="o">=</span> <span class="n">to_roman_numeral</span><span class="p">(</span><span class="mi">2006</span><span class="p">)</span>
<span class="o">--</span> <span class="n">pandoc_birth_year</span> <span class="o">==</span> <span class="s1">&#39;MMVI&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">to_simple_table</span> <span class="pre">(table)</span></code></p>
<p>Creates a <a class="reference external" href="#type-simpletable">SimpleTable</a> out of a <a class="reference external" href="#type-table">Table</a> block.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>a simple table object (<a class="reference external" href="#type-simpletable">SimpleTable</a>)</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">simple</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">to_simple_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="o">--</span> <span class="n">modify</span><span class="p">,</span> <span class="n">using</span> <span class="n">pre</span> <span class="n">pandoc</span> <span class="mf">2.10</span> <span class="n">methods</span>
<span class="n">simple</span><span class="o">.</span><span class="n">caption</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">SmallCaps</span><span class="p">(</span><span class="n">simple</span><span class="o">.</span><span class="n">caption</span><span class="p">)</span>
<span class="o">--</span> <span class="n">create</span> <span class="n">normal</span> <span class="n">table</span> <span class="n">block</span> <span class="n">again</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">from_simple_table</span><span class="p">(</span><span class="n">simple</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="module-pandoc-mediabag">
<h2><a class="toc-backref" href="#id263">Module pandoc.mediabag</a><a class="headerlink" href="#module-pandoc-mediabag" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">pandoc.mediabag</span></code> module allows accessing pandoc’s media storage.
The “media bag” is used when pandoc is called with the
<code class="docutils literal notranslate"><span class="pre">--extract-media</span></code> or (for HTML only) <code class="docutils literal notranslate"><span class="pre">--self-contained</span></code> option.</p>
<p>The module is loaded as part of module <code class="docutils literal notranslate"><span class="pre">pandoc</span></code> and can either be
accessed via the <code class="docutils literal notranslate"><span class="pre">pandoc.mediabag</span></code> field, or explicitly required,
e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">mb</span> <span class="o">=</span> <span class="n">require</span> <span class="s1">&#39;pandoc.mediabag&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">(filepath)</span></code></p>
<p>Removes a single entry from the media bag.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepath</span></code>:</dt><dd><p>filename of the item to be deleted. The media bag will be left
unchanged if no entry with the given filename exists.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">empty</span> <span class="pre">()</span></code></p>
<p>Clear-out the media bag, deleting all items.</p>
<p><code class="docutils literal notranslate"><span class="pre">insert</span> <span class="pre">(filepath,</span> <span class="pre">mime_type,</span> <span class="pre">contents)</span></code></p>
<p>Adds a new entry to pandoc’s media bag.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepath</span></code>:</dt><dd><p>filename and path relative to the output folder.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mime_type</span></code>:</dt><dd><p>the file’s MIME type</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">contents</span></code>:</dt><dd><p>the binary contents of the file.</p>
</dd>
</dl>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">fp</span> <span class="o">=</span> <span class="s2">&quot;media/hello.txt&quot;</span>
<span class="n">local</span> <span class="n">mt</span> <span class="o">=</span> <span class="s2">&quot;text/plain&quot;</span>
<span class="n">local</span> <span class="n">contents</span> <span class="o">=</span> <span class="s2">&quot;Hello, World!&quot;</span>
<span class="n">pandoc</span><span class="o">.</span><span class="n">mediabag</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">mt</span><span class="p">,</span> <span class="n">contents</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">items</span> <span class="pre">()</span></code></p>
<p>Returns an iterator triple to be used with Lua’s generic <code class="docutils literal notranslate"><span class="pre">for</span></code>
statement. The iterator returns the filepath, MIME type, and content of
a media bag item on each invocation. Items are processed one-by-one to
avoid excessive memory use.</p>
<p>This function should be used only when full access to all items,
including their contents, is required. For all other cases, <a href="#id143"><span class="problematic" id="id144">``</span></a><a href="#id408"><span class="problematic" id="id409">`list```_</span></a>
should be preferred.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>The iterator function; must be called with the iterator state and the
current iterator value.</p></li>
<li><p>Iterator state – an opaque value to be passed to the iterator
function.</p></li>
<li><p>Initial iterator value.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">fp</span><span class="p">,</span> <span class="n">mt</span><span class="p">,</span> <span class="n">contents</span> <span class="ow">in</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">mediabag</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="n">do</span>
  <span class="o">--</span> <span class="nb">print</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">mt</span><span class="p">,</span> <span class="n">contents</span><span class="p">)</span>
<span class="n">end</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">list</span> <span class="pre">()</span></code></p>
<p>Get a summary of the current media bag contents.</p>
<p>Returns: A list of elements summarizing each entry in the media bag. The
summary item contains the keys <code class="docutils literal notranslate"><span class="pre">path</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span></code>, and <code class="docutils literal notranslate"><span class="pre">length</span></code>,
giving the filepath, MIME type, and length of contents in bytes,
respectively.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">calculate</span> <span class="n">the</span> <span class="n">size</span> <span class="n">of</span> <span class="n">the</span> <span class="n">media</span> <span class="n">bag</span><span class="o">.</span>
<span class="n">local</span> <span class="n">mb_items</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">mediabag</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="n">local</span> <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">#mb_items do</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">mb_items</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">length</span>
<span class="n">end</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">lookup</span> <span class="pre">(filepath)</span></code></p>
<p>Lookup a media item in the media bag, and return its MIME type and
contents.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filepath</span></code>:</dt><dd><p>name of the file to look up.</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>the entry’s MIME type, or nil if the file was not found.</p></li>
<li><p>contents of the file, or nil if the file was not found.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;media/diagram.png&quot;</span>
<span class="n">local</span> <span class="n">mt</span><span class="p">,</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">mediabag</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">fetch</span> <span class="pre">(source,</span> <span class="pre">base_url)</span></code></p>
<p>Fetches the given source from a URL or local file. Returns two values:
the contents of the file and the MIME type (or an empty string).</p>
<p>Returns:</p>
<ul class="simple">
<li><p>the entries MIME type, or nil if the file was not found.</p></li>
<li><p>contents of the file, or nil if the file was not found.</p></li>
</ul>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">diagram_url</span> <span class="o">=</span> <span class="s2">&quot;https://pandoc.org/diagram.jpg&quot;</span>
<span class="n">local</span> <span class="n">mt</span><span class="p">,</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">pandoc</span><span class="o">.</span><span class="n">mediabag</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">diagram_url</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="module-pandoc-list">
<h2><a class="toc-backref" href="#id264">Module pandoc.List</a><a class="headerlink" href="#module-pandoc-list" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The this module defines pandoc’s list type. It comes with useful methods
and convenience functions.</p>
<div class="section" id="constructor">
<h3><a class="toc-backref" href="#id265">Constructor</a><a class="headerlink" href="#constructor" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List([table])</span></code></dt><dd><p>Create a new List. If the optional argument <code class="docutils literal notranslate"><span class="pre">table</span></code> is given, set
the metatable of that value to <code class="docutils literal notranslate"><span class="pre">pandoc.List</span></code>. This is an alias for
<a href="#id145"><span class="problematic" id="id146">``</span></a><a href="#id410"><span class="problematic" id="id411">`pandoc.List:new([table])```_</span></a>.</p>
</dd>
</dl>
</div>
<div class="section" id="metamethods">
<h3><a class="toc-backref" href="#id266">Metamethods</a><a class="headerlink" href="#metamethods" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List:__concat</span> <span class="pre">(list)</span></code></dt><dd><p>Concatenates two lists.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">list</span></code>:</dt><dd><p>second list concatenated to the first</p>
</dd>
</dl>
<p>Returns: a new list containing all elements from list1 and list2</p>
</dd>
</dl>
</div>
<div class="section" id="methods">
<h3><a class="toc-backref" href="#id267">Methods</a><a class="headerlink" href="#methods" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List:clone</span> <span class="pre">()</span></code></dt><dd><p>Returns a (shallow) copy of the list.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List:extend</span> <span class="pre">(list)</span></code></dt><dd><p>Adds the given list to the end of this list.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">list</span></code>:</dt><dd><p>list to appended</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List:find</span> <span class="pre">(needle,</span> <span class="pre">init)</span></code></dt><dd><p>Returns the value and index of the first occurrence of the given
item.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">needle</span></code>:</dt><dd><p>item to search for</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">init</span></code>:</dt><dd><p>index at which the search is started</p>
</dd>
</dl>
<p>Returns: first item equal to the needle, or nil if no such item
exists.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List:find_if</span> <span class="pre">(pred,</span> <span class="pre">init)</span></code></dt><dd><p>Returns the value and index of the first element for which the
predicate holds true.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">pred</span></code>:</dt><dd><p>the predicate function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">init</span></code>:</dt><dd><p>index at which the search is started</p>
</dd>
</dl>
<p>Returns: first item for which `test` succeeds, or nil if no such
item exists.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List:filter</span> <span class="pre">(pred)</span></code></dt><dd><p>Returns a new list containing all items satisfying a given condition.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">pred</span></code>:</dt><dd><p>condition items must satisfy.</p>
</dd>
</dl>
<p>Returns: a new list containing all items for which `test` was true.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List:includes</span> <span class="pre">(needle,</span> <span class="pre">init)</span></code></dt><dd><p>Checks if the list has an item equal to the given needle.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">needle</span></code>:</dt><dd><p>item to search for</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">init</span></code>:</dt><dd><p>index at which the search is started</p>
</dd>
</dl>
<p>Returns: true if a list item is equal to the needle, false otherwise</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List:insert</span> <span class="pre">([pos],</span> <span class="pre">value)</span></code></dt><dd><p>Inserts element <code class="docutils literal notranslate"><span class="pre">value</span></code> at position <code class="docutils literal notranslate"><span class="pre">pos</span></code> in list, shifting
elements to the next-greater index if necessary.</p>
<p>This function is identical to <a href="#id147"><span class="problematic" id="id148">``</span></a><a href="#id412"><span class="problematic" id="id413">`table.insert```_</span></a>.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">pos</span></code>:</dt><dd><p>index of the new value; defaults to length of the list + 1</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">value</span></code>:</dt><dd><p>value to insert into the list</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List:map</span> <span class="pre">(fn)</span></code></dt><dd><p>Returns a copy of the current list by applying the given function to
all elements.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fn</span></code>:</dt><dd><p>function which is applied to all list items.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List:new([table])</span></code></dt><dd><p>Create a new List. If the optional argument <code class="docutils literal notranslate"><span class="pre">table</span></code> is given, set
the metatable of that value to <code class="docutils literal notranslate"><span class="pre">pandoc.List</span></code>.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">table</span></code>:</dt><dd><p>table which should be treatable as a list; defaults to an empty
table</p>
</dd>
</dl>
<p>Returns: the updated input value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List:remove</span> <span class="pre">([pos])</span></code></dt><dd><p>Removes the element at position <code class="docutils literal notranslate"><span class="pre">pos</span></code>, returning the value of the
removed element.</p>
<p>This function is identical to <a href="#id149"><span class="problematic" id="id150">``</span></a><a href="#id414"><span class="problematic" id="id415">`table.remove```_</span></a>.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">pos</span></code>:</dt><dd><p>position of the list value that will be removed; defaults to the
index of the last element</p>
</dd>
</dl>
<p>Returns: the removed element</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pandoc.List:sort</span> <span class="pre">([comp])</span></code></dt><dd><p>Sorts list elements in a given order, in-place. If <code class="docutils literal notranslate"><span class="pre">comp</span></code> is given,
then it must be a function that receives two list elements and
returns true when the first element must come before the second in
the final order (so that, after the sort, <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">&lt;</span> <span class="pre">j</span></code> implies
<code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">comp(list[j],list[i]))</span></code>. If comp is not given, then the
standard Lua operator <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> is used instead.</p>
<p>Note that the comp function must define a strict partial order over
the elements in the list; that is, it must be asymmetric and
transitive. Otherwise, no valid sort may be possible.</p>
<p>The sort algorithm is not stable: elements considered equal by the
given order may have their relative positions changed by the sort.</p>
<p>This function is identical to <a href="#id151"><span class="problematic" id="id152">``</span></a><a href="#id416"><span class="problematic" id="id417">`table.sort```_</span></a>.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">comp</span></code>:</dt><dd><p>Comparison function as described above.</p>
</dd>
</dl>
</dd>
</dl>
</div>
</div>
<div class="section" id="module-pandoc-system">
<h2><a class="toc-backref" href="#id268">Module pandoc.system</a><a class="headerlink" href="#module-pandoc-system" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Access to system information and functionality.</p>
<div class="section" id="static-fields">
<h3><a class="toc-backref" href="#id269">Static Fields</a><a class="headerlink" href="#static-fields" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="arch">
<span id="pandoc-system-arch"></span><h4>arch<a class="headerlink" href="#arch" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The machine architecture on which the program is running.</p>
</div>
<div class="section" id="os">
<span id="pandoc-system-os"></span><h4>os<a class="headerlink" href="#os" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The operating system on which the program is running.</p>
</div>
</div>
<div class="section" id="functions">
<h3><a class="toc-backref" href="#id270">Functions</a><a class="headerlink" href="#functions" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="environment">
<span id="pandoc-system-environment"></span><h4>environment<a class="headerlink" href="#environment" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">environment</span> <span class="pre">()</span></code></p>
<p>Retrieve the entire environment as a string-indexed table.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>A table mapping environment variables names to their string value
(table).</p></li>
</ul>
</div>
<div class="section" id="get-working-directory">
<span id="pandoc-system-get-working-directory"></span><h4>get_working_directory<a class="headerlink" href="#get-working-directory" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">get_working_directory</span> <span class="pre">()</span></code></p>
<p>Obtain the current working directory as an absolute path.</p>
<p>Returns:</p>
<ul class="simple">
<li><p>The current working directory (string).</p></li>
</ul>
</div>
<div class="section" id="with-environment">
<span id="pandoc-system-with-environment"></span><h4>with_environment<a class="headerlink" href="#with-environment" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">with_environment</span> <span class="pre">(environment,</span> <span class="pre">callback)</span></code></p>
<p>Run an action within a custom environment. Only the environment
variables given by <code class="docutils literal notranslate"><span class="pre">environment</span></code> will be set, when <code class="docutils literal notranslate"><span class="pre">callback</span></code> is
called. The original environment is restored after this function
finishes, even if an error occurs while running the callback action.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">environment</span></code></dt><dd><p>Environment variables and their values to be set before running
<code class="docutils literal notranslate"><span class="pre">callback</span></code>. (table with string keys and string values)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">callback</span></code></dt><dd><p>Action to execute in the custom environment (function)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>The result(s) of the call to <code class="docutils literal notranslate"><span class="pre">callback</span></code></p></li>
</ul>
</div>
<div class="section" id="with-temporary-directory">
<span id="pandoc-system-with-temporary-directory"></span><h4>with_temporary_directory<a class="headerlink" href="#with-temporary-directory" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">with_temporary_directory</span> <span class="pre">([parent_dir,]</span> <span class="pre">templ,</span> <span class="pre">callback)</span></code></p>
<p>Create and use a temporary directory inside the given directory. The
directory is deleted after the callback returns.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">parent_dir</span></code></dt><dd><p>Parent directory to create the directory in (string). If this
parameter is omitted, the system’s canonical temporary directory is
used.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">templ</span></code></dt><dd><p>Directory name template (string).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">callback</span></code></dt><dd><p>Function which takes the name of the temporary directory as its first
argument (function).</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>The result of the call to <code class="docutils literal notranslate"><span class="pre">callback</span></code>.</p></li>
</ul>
</div>
<div class="section" id="with-working-directory">
<span id="pandoc-system-with-working-directory"></span><h4>with_working_directory<a class="headerlink" href="#with-working-directory" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">with_working_directory</span> <span class="pre">(directory,</span> <span class="pre">callback)</span></code></p>
<p>Run an action within a different directory. This function will change
the working directory to <code class="docutils literal notranslate"><span class="pre">directory</span></code>, execute <code class="docutils literal notranslate"><span class="pre">callback</span></code>, then
switch back to the original working directory, even if an error occurs
while running the callback action.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">directory</span></code></dt><dd><p>Directory in which the given <code class="docutils literal notranslate"><span class="pre">callback</span></code> should be executed (string)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">callback</span></code></dt><dd><p>Action to execute in the given directory (function)</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>The result(s) of the call to <code class="docutils literal notranslate"><span class="pre">callback</span></code></p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="module-pandoc-types">
<h2><a class="toc-backref" href="#id271">Module pandoc.types</a><a class="headerlink" href="#module-pandoc-types" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Constructors for types which are not part of the pandoc AST.</p>
<p><code class="docutils literal notranslate"><span class="pre">Version</span> <span class="pre">(version_specifier)</span></code></p>
<p>Creates a Version object.</p>
<p>Parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">version_specifier</span></code>:</dt><dd><p>Version specifier: this can be a version string like <code class="docutils literal notranslate"><span class="pre">'2.7.3'</span></code>, a
list of integers like <code class="docutils literal notranslate"><span class="pre">{2,</span> <span class="pre">7,</span> <span class="pre">3}</span></code>, a single integer, or a
<a class="reference external" href="#type-version">Version</a>.</p>
</dd>
</dl>
<p>Returns:</p>
<ul class="simple">
<li><p>A new <a class="reference external" href="#type-version">Version</a> object.</p></li>
</ul>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/icon_pandoc_square_small.jpg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">日本Pandocユーザ会</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=pandoc-jp&repo=pandoc-doc-ja&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>ナビゲーション</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">日本Pandocユーザ会</a></li>
<li class="toctree-l1"><a class="reference internal" href="users-guide.html">Pandoc User’s Guide 日本語版</a></li>
<li class="toctree-l1"><a class="reference internal" href="trans-intro.html">翻訳の手引 for Pandocユーザーズガイド</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="検索" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, 日本Pandocユーザ会.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>